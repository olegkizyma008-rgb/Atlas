2025-10-26 16:30:06 [ERROR] [CHAT-MEMORY] ❌ Memory processing failed: this.memoryEligibilityProcessor.execute is not a function {"metadata":{}}
2025-10-26 16:30:52 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:52 [ERROR] Stack trace: ReferenceError: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:924:70)
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:52)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:53 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:53 [ERROR] Stack trace: ReferenceError: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:924:70)
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:52)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:55 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:55 [ERROR] Stack trace: ReferenceError: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:924:70)
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:52)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:57 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:30:57 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761489003086_leccw6ke5","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:40:02 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:02 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:07 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:07 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:13 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:19 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:40:19 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761489561992_fav2dlqbf","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:45:24 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:30 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:30 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:36 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:36 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:36 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-26 16:45:40 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:45:40 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761489850281_omy8ltjv5","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:49:36 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 401 {"metadata":{}}
2025-10-26 16:49:36 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 401
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-26 16:49:36 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-26 16:49:36 [ERROR] [STAGE-0-MCP] API Response Error: status=401, data={"error":{"message":"401 Incorrect API key provided: gho_swah****************************8jbP. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}} {"metadata":{}}
2025-10-26 16:49:49 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 401 {"metadata":{}}
2025-10-26 16:49:49 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 401
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-26 16:49:49 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-26 16:49:49 [ERROR] [STAGE-0-MCP] API Response Error: status=401, data={"error":{"message":"401 Incorrect API key provided: gho_swah****************************8jbP. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}} {"metadata":{}}
2025-10-26 17:15:19 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-26 17:15:19 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-26 17:15:19 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-26 17:15:19 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:26:17 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-27 20:26:17 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-27 20:26:17 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-27 20:26:17 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Connection error.","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-27 20:26:18 [ERROR] executor {"metadata":{}}
2025-10-27 20:26:18 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:26:18 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761589567585_dx0gmgede","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:28:49 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-27 20:28:49 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:698:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-27 20:29:19 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-27 20:29:19 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-27 20:29:19 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-27 20:29:19 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Connection error.","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-27 20:29:20 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: timeout of 30000ms exceeded {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: timeout of 30000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:519:28)\n    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)\n    at Axios.request..."}}
2025-10-27 20:29:21 [ERROR] executor {"metadata":{}}
2025-10-27 20:29:21 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:29:21 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761589758495_x7em8j4li","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:29:24 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-27 20:29:24 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:698:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-27 20:29:28 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:29:55 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-28 01:04:12 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:04:12 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:04:12 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:04:12 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:04:19 [ERROR] executor {"metadata":{}}
2025-10-28 01:04:19 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:04:19 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761604791957_vzai8yqhi","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:04:43 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:04:43 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:04:43 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:04:43 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:04:51 [ERROR] executor {"metadata":{}}
2025-10-28 01:04:51 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:04:51 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761604791957_vzai8yqhi","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:05:59 [ERROR] executor {"metadata":{}}
2025-10-28 01:05:59 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:05:59 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606353923_5g2es51gc","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:06:51 [ERROR] executor {"metadata":{}}
2025-10-28 01:06:51 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:06:51 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606406413_vkw62cuq2","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:11:15 [ERROR] [STAGE-0-MCP] Mode selection failed: timeout of 60000ms exceeded {"metadata":{}}
2025-10-28 01:11:15 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: timeout of 60000ms exceeded
    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)
    at RedirectableRequest.emit (node:events:519:28)
    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)
    at listOnTimeout (node:internal/timers:588:17)
    at process.processTimers (node:internal/timers:523:7)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:11:15 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:11:15 [ERROR] [STAGE-0-MCP] No response received from API {"metadata":{}}
2025-10-28 01:11:18 [ERROR] executor {"metadata":{}}
2025-10-28 01:11:18 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:11:18 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606406413_vkw62cuq2","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:18:06 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:18:06 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:18:06 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:18:06 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:18:12 [ERROR] executor {"metadata":{}}
2025-10-28 01:18:12 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:18:12 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606827791_01pttxqdp","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:20:38 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:20:38 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:20:38 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:20:38 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:20:44 [ERROR] executor {"metadata":{}}
2025-10-28 01:20:44 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:20:44 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606827791_01pttxqdp","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:21:13 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:21:13 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:21:13 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:21:13 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:21:21 [ERROR] executor {"metadata":{}}
2025-10-28 01:21:21 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:21:21 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606827791_01pttxqdp","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:35:25 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:35:25 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:35:25 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:35:25 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:35:32 [ERROR] executor {"metadata":{}}
2025-10-28 01:35:32 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:35:32 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761608018847_ygvg4nc6b","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 22:21:47 [ERROR] [DEV-ANALYSIS] Self-analysis failed: this._analyzeImpact is not a function {"metadata":{}}
2025-10-28 22:23:01 [ERROR] [MCP-TODO] LLM API error: 500 Internal Server Error {"metadata":{"category":"mcp-todo","component":"mcp-todo","status":500,"data":"{\"error\":{\"message\":\"400 Unknown model: mistral-medium-2411\",\"type\":\"provider_error\",\"provider\":\"atlas\",\"code\":\"API_ERROR\"}}","url":"http://localhost:4000/v1/chat/completions","method":"post"}}
2025-10-28 22:23:01 [ERROR] atlas-todo-planning {"metadata":{}}
2025-10-28 22:23:01 [ERROR] atlas-todo-planning {"metadata":{}}
2025-10-28 22:23:01 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Request failed with status code 500","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:768:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:147:13"}}
2025-10-28 22:23:01 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Request failed with status code 500","sessionId":"session_1761682901147_8e4v7meah","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:768:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:147:13"}}
2025-10-28 23:28:56 [ERROR] [DEV-MODE] Self-analysis failed: this.logger.system is not a function {"metadata":{}}
2025-10-28 23:34:56 [ERROR] [DEV-MODE] Self-analysis failed: this.logger.info is not a function {"metadata":{}}
2025-10-28 23:44:10 [ERROR] [DEV-MODE] Self-analysis failed: this.logger.info is not a function {"metadata":{}}
2025-10-28 23:59:41 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:41 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1055:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:46 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:46 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1055:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:52 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:52 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1055:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:52 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-28 23:59:59 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1591:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13"}}
2025-10-28 23:59:59 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761688425761_5hkcw3a7o","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1591:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13"}}
2025-10-29 00:36:56 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-29 00:36:56 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{}}
2025-10-29 00:36:56 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-29 00:36:56 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-29 00:47:10 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:10 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1070:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:15 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:15 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1070:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:21 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:21 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1070:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:28 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1606:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13"}}
2025-10-29 00:47:29 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761691387280_p1y1i5q1s","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1606:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13"}}
2025-10-29 01:05:51 [ERROR] [DEV-ANALYSIS] Failed to gather real context: mcpManager.getServer is not a function {"metadata":{"category":"system","component":"dev-analysis","error":"mcpManager.getServer is not a function"}}
2025-10-29 01:05:54 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'length')"}}
2025-10-29 01:09:23 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'length')"}}
2025-10-29 01:21:48 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:21:48 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'length')"}}
2025-10-29 01:25:11 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:25:11 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'length')"}}
2025-10-29 01:38:26 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:42:51 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:42:51 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1101:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:42:56 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:42:56 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1101:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:43:02 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:43:02 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1101:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:43:02 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 01:49:17 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:50:09 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:50:11 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:11 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:13 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:13 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:13 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1123:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:14 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:50:16 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:16 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:18 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:18 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:18 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1123:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:20 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:50:22 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:22 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:24 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:24 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:24 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:24 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1123:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:53:41 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:54:36 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:36 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:54:38 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:38 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:40 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:40 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:40 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1179:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:41 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:41 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:54:43 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:43 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:45 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:45 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:45 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:45 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1179:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:47 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:47 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:54:49 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:51 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:51 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:51 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:51 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1179:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:58:05 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:58:58 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:58:58 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:59:00 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:00 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:59:02 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:02 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan..."}}
2025-10-29 01:59:02 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:02 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1186:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:03 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:03 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:59:05 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:05 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:59:07 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:07 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan..."}}
2025-10-29 01:59:07 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:07 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1186:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:09 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:59:11 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:11 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:59:13 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:13 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:59:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:13 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1186:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:20:04 [ERROR] [DEV-ANALYSIS] Self-analysis failed: this._analyzeMemoryPatterns is not a function {"metadata":{"category":"system","component":"dev-analysis","error":"this._analyzeMemoryPatterns is not a function"}}
2025-10-29 02:23:44 [ERROR] mcp-server {"metadata":{}}
2025-10-29 02:23:44 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'push') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'push')"}}
2025-10-29 02:28:57 [ERROR] [DEV-ANALYSIS] Self-analysis failed: parentItem is not defined {"metadata":{"category":"system","component":"dev-analysis","error":"parentItem is not defined"}}
2025-10-29 02:30:37 [ERROR] [DEV-ANALYSIS] Self-analysis failed: this._detectInterventionRequest is not a function {"metadata":{"category":"system","component":"dev-analysis","error":"this._detectInterventionRequest is not a function"}}
2025-10-29 02:34:10 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:10 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 02:34:12 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:12 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan..."}}
2025-10-29 02:34:14 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:14 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1198:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:15 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:15 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 02:34:17 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:17 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:19 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:19 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:19 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:19 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1198:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:21 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:21 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 02:34:23 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:23 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:25 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:25 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:25 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1198:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 05:45:03 [ERROR] mcp-server {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-server {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-server {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-server {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 06:18:04 [ERROR] mcp-server {"metadata":{}}
2025-10-29 06:18:04 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 06:18:04 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 06:20:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:14 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:15 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:15 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:17 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:17 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:17 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 06:20:17 [ERROR] Item 3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3}}
2025-10-29 06:20:17 [ERROR] Item 4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":4}}
2025-10-29 06:20:17 [ERROR] Item 5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":5}}
2025-10-29 06:20:17 [ERROR] Item 6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":6}}
2025-10-29 06:20:17 [ERROR] Item 7 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":7}}
2025-10-29 06:20:17 [ERROR] Item 8 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":8}}
2025-10-29 06:20:17 [ERROR] Item 9 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":9}}
2025-10-29 06:20:17 [ERROR] Item 10 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":10}}
2025-10-29 06:20:17 [ERROR] Item 11 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":11}}
2025-10-29 06:20:17 [ERROR] Item 12 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":12}}
2025-10-29 06:20:17 [ERROR] Item 13 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":13}}
2025-10-29 06:20:17 [ERROR] Item 14 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":14}}
2025-10-29 06:20:17 [ERROR] Item 15 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":15}}
2025-10-29 06:20:17 [ERROR] Item 16 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":16}}
2025-10-29 06:20:17 [ERROR] Item 17 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":17}}
2025-10-29 06:20:17 [ERROR] Item 18 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":18}}
2025-10-29 06:20:17 [ERROR] Item 19 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":19}}
2025-10-29 06:20:17 [ERROR] Item 20 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":20}}
2025-10-29 13:00:51 [ERROR] mcp-server {"metadata":{}}
2025-10-29 13:00:51 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:00:51 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:01:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:13 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:14 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:16 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:16 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:16 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 13:15:26 [ERROR] mcp-server {"metadata":{}}
2025-10-29 13:15:26 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:15:26 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:16:33 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:33 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:34 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:34 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:37 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:37 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:37 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 13:24:28 [ERROR] mcp-server {"metadata":{}}
2025-10-29 13:24:28 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:24:28 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:40:44 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestra..."}}
2025-10-29 13:40:46 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:48 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:48 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:48 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:51 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:53 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:53 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:53 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:55 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:57 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:59 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWor..."}}
2025-10-29 13:40:59 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:59 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:59 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 13:47:11 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:47:11 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 13:47:18 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:47:18 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 13:47:31 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2037:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:889:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 13:47:33 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:47:33 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 13:47:38 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:47:38 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 13:47:55 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2037:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:889:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 13:48:09 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:48:09 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-10-29 13:48:17 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:48:17 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-10-29 13:48:29 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2037:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:889:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 13:48:31 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:48:31 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-10-29 13:48:36 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:48:36 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-10-29 14:01:52 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:01:52 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 14:01:59 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:01:59 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 14:02:50 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2115:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:900:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:02:53 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:02:53 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 14:03:00 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:03:00 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 14:03:31 [ERROR] [PORT-4000] Timeout - port 4000 too slow {"metadata":{"category":"vision-analysis","note":"OpenRouter fallback disabled - vision parsing not working"}}
2025-10-29 14:03:31 [ERROR] [VISION] API call failed: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled. {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"Error: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled.\n    at VisionAnalysisService._callPort4000VisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:852:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:549:9)\n    at process.processTimers (node:internal/timers:523:7)\n    at async VisionAnalysisService._callVisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orch..."}}
2025-10-29 14:10:41 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2115:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:900:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:10:51 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1_verify_attempt2_active_window_1761739850793.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:10:51 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 14:24:52 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2115:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:900:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:25:03 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761740693653: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761740693653","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1331:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:25:07 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2115:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:900:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:25:19 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761740719149: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761740719149","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 14:25:21 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761740719149: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761740719149","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 14:35:12 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2136:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:921:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:35:16 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2136:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:921:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:35:35 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2136:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:921:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:36:14 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761741336545: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761741336545","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1331:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:37:26 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761741336545: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761741336545","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1331:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:37:31 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2136:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:921:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:37:37 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 14:37:39 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 14:37:41 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 14:37:41 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 14:37:41 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 14:37:43 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 14:37:45 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 14:37:47 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 14:37:47 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 14:37:47 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:03:52 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743032451: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743032451","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:03:54 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743032451: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743032451","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:03:56 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743032451: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743032451","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:03:56 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:03:56 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3707:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:725:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:03:56 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3734:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:03:57 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743037976: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743037976","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:03:59 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743037976: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743037976","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:04:01 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743037976: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743037976","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:04:01 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:01 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3707:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:725:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1208:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:01 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3734:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:04:07 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 15:04:09 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 15:04:11 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 15:04:11 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:11 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:13 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 15:04:15 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 15:04:17 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 15:04:17 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:17 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:17:33 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1_verify_attempt1_active_window_1761743853258.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 15:17:33 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 15:19:38 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743978094: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743978094","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:19:40 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743978094: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743978094","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:19:42 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743978094: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743978094","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:19:42 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:19:42 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:19:42 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3744:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:19:43 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743983871: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743983871","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:19:45 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743983871: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743983871","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:19:47 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743983871: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743983871","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:19:47 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:19:47 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:19:47 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3744:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:20:07 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761744007412: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761744007412","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:20:09 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761744007412: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761744007412","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:20:11 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761744007412: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761744007412","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:20:11 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:20:11 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:20:11 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3744:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:20:12 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761744012786: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761744012786","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:20:14 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761744012786: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761744012786","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:20:16 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761744012786: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761744012786","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-29 15:20:16 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:20:16 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:20:16 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3744:58)\n    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha..."}}
2025-10-29 15:20:26 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1142:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 15:20:28 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1142:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 15:54:56 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761746096886: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761746096886","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:54:58 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761746096886: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761746096886","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:55:00 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761746096886: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761746096886","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:55:00 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:55:00 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:55:00 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3744:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:55:02 [ERROR] [UNIFIED-MCP] Workflow failed: this.mcpManager.getAvailableServers is not a function {"metadata":{"category":"mcp-todo","error":"TypeError: this.mcpManager.getAvailableServers is not a function\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3693:47)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:57)\n    at GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha..."}}
2025-10-29 15:55:16 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761746116263: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761746116263","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:55:18 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761746116263: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761746116263","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:55:20 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761746116263: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761746116263","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:55:20 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:55:20 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:55:20 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3744:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:55:22 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761746122119: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761746122119","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:55:24 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761746122119: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761746122119","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:55:26 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761746122119: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761746122119","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1111:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:55:26 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:55:26 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:55:26 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3744:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 16:20:07 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1240:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-10-29 16:20:07 [ERROR] [MCP-TODO] Failed to plan tools for item 2: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1300:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-10-29 16:25:47 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761747947129: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761747947129","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 16:25:49 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761747947129: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761747947129","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:25:51 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761747947129: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761747947129","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:25:51 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:25:51 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:25:51 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2108:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:893:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 16:25:52 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761747952441: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761747952441","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 16:25:54 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761747952441: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761747952441","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:25:56 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761747952441: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761747952441","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:25:56 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:25:56 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:25:56 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2108:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:893:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 16:26:21 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761747980786: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761747980786","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 16:26:23 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761747980786: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761747980786","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:26:25 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761747980786: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761747980786","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-29 16:26:25 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:26:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:26:25 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2108:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:893:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 16:26:26 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761747986367: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761747986367","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 16:26:28 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761747986367: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761747986367","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:26:30 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761747986367: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761747986367","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:26:30 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:26:30 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:26:30 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2108:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:893:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 16:27:21 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1.1_1761748040621: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1.1_1761748040621","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 16:27:23 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1.1_1761748040621: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1.1_1761748040621","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:27:25 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1.1_1761748040621: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1.1_1761748040621","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:27:25 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:27:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:27:25 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2108:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:893:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 16:27:26 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1.1_1761748046864: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1.1_1761748046864","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 16:27:28 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1.1_1761748046864: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1.1_1761748046864","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:27:30 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1.1_1761748046864: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1.1_1761748046864","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 16:27:30 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:27:30 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 16:27:30 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2108:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:893:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 18:25:16 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761755116978: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761755116978","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 18:25:18 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761755116978: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761755116978","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-29 18:25:20 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761755116978: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761755116978","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 18:25:20 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 18:25:20 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 18:25:20 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2108:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:893:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 18:25:23 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761755123510: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761755123510","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 18:25:25 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761755123510: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761755123510","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 18:25:27 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761755123510: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761755123510","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 18:25:27 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 18:25:27 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 18:25:27 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2108:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:893:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 18:45:07 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761756307036: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761756307036","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 18:45:09 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761756307036: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761756307036","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 18:45:11 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761756307036: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761756307036","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 18:45:11 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 18:45:11 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 18:45:19 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761756319041: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761756319041","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 18:45:21 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761756319041: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761756319041","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 18:45:23 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761756319041: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761756319041","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 18:45:23 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 18:45:23 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:01:32 [ERROR] mcp-server {"metadata":{}}
2025-10-29 19:01:32 [ERROR] mcp-extension-manager {"metadata":{}}
2025-10-29 19:01:35 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761757295100: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761757295100","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 19:01:37 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761757295100: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761757295100","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:01:39 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761757295100: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761757295100","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:01:39 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:01:39 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:02:45 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at runNextTicks (node:internal/process/task_queues:65:..."}}
2025-10-29 19:02:46 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761757365953: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761757365953","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 19:02:48 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761757365953: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761757365953","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:02:50 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761757365953: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761757365953","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:02:50 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:02:50 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:03:00 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761757380312: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761757380312","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 19:03:02 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761757380312: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761757380312","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:03:04 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761757380312: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761757380312","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:03:04 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:03:04 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:03:19 [ERROR] Item 5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":5}}
2025-10-29 19:31:12 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761759072098: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761759072098","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 19:31:14 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761759072098: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761759072098","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:31:16 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761759072098: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761759072098","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:31:16 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:31:16 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:31:21 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:31:27 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:31:32 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:31:32 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:31:32 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:31:37 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:31:43 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:31:48 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:31:48 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:31:48 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:31:53 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:31:58 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:32:03 [ERROR] [MCP-TODO] Failed to plan tools for item 2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1342:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 19:32:03 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:32:03 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:32:03 [ERROR] Item 3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3}}
2025-10-29 19:32:10 [ERROR] [MCP-TODO] Failed to plan tools for item verify_4_1761759130878: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_4_1761759130878","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 19:32:12 [ERROR] [MCP-TODO] Failed to plan tools for item verify_4_1761759130878: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_4_1761759130878","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-29 19:32:14 [ERROR] [MCP-TODO] Failed to plan tools for item verify_4_1761759130878: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_4_1761759130878","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1112:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:949:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 19:32:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 19:32:14 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:970:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3640:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 20:04:03 [ERROR] [STAGE-0-MCP] Mode selection failed: timeout of 60000ms exceeded {"metadata":{}}
2025-10-29 20:04:03 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: timeout of 60000ms exceeded
    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)
    at RedirectableRequest.emit (node:events:519:28)
    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)
    at listOnTimeout (node:internal/timers:588:17)
    at process.processTimers (node:internal/timers:523:7)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:179:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-10-29 20:04:03 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-29 20:04:03 [ERROR] [STAGE-0-MCP] No response received from API {"metadata":{}}
2025-10-30 00:01:54 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761775314305: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761775314305","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 00:01:56 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761775314305: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761775314305","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 00:01:58 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761775314305: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761775314305","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 00:01:58 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:01:58 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:01:59 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761775319848: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761775319848","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 00:02:01 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761775319848: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761775319848","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 00:02:03 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761775319848: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761775319848","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 00:02:03 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:02:03 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1489:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:02:21 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761775341657: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761775341657","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 00:02:23 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761775341657: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761775341657","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 00:02:25 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761775341657: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761775341657","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 00:02:25 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:02:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:03:35 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761775415936: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761775415936","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 00:03:37 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761775415936: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761775415936","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 00:03:39 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761775415936: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761775415936","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 00:03:39 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:03:39 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:27:32 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-30 00:27:32 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:179:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-10-30 00:27:32 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-30 00:27:32 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-10-30 00:45:09 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761777909165: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761777909165","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 00:45:11 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761777909165: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761777909165","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 00:45:13 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761777909165: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761777909165","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 00:45:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 00:45:13 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:46:46 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Chromium"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Chromium". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-10-30 01:46:46 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-30 01:46:46 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stage..."}}
2025-10-30 01:46:48 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Chromium"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Chromium". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-10-30 01:46:48 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-30 01:46:48 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-10-30 01:46:48 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781608235: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781608235","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 01:46:50 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781608235: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781608235","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:46:52 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781608235: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781608235","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:46:52 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:46:52 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:47:36 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Chromium"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Chromium". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Кліп"}}
2025-10-30 01:47:36 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_2_verify_attempt1","mode":"active_window"}}
2025-10-30 01:47:42 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Chromium"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Chromium". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Кліп"}}
2025-10-30 01:47:42 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_2_verify_attempt2","mode":"active_window"}}
2025-10-30 01:50:46 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781846742: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781846742","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 01:50:48 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781846742: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781846742","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:50:50 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781846742: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781846742","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:50:50 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:50:50 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:50:52 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781852144: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781852144","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 01:50:54 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781852144: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781852144","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:50:56 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761781852144: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761781852144","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:50:56 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:50:56 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1489:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:51:02 [ERROR] [STAGE-2.0-MCP] ❌ Fallback JSON parse also failed: Unterminated fractional number in JSON at position 206 (line 4 column 19) {"metadata":{"category":"server-selection","component":"server-selection","rawResponse":"{\n  \"selected_servers\": [\"filesystem\"],\n  \"reasoning\": \"The task requires checking for the presence of music files on the computer, which can be done by listing files in the filesystem.\",\n  \"confidence\": 0."}}
2025-10-30 01:51:08 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761781868641: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761781868641","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 01:51:10 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761781868641: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761781868641","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:51:12 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761781868641: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761781868641","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:51:12 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:51:12 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:51:20 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761781880156: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761781880156","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 01:51:22 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761781880156: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761781880156","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:51:24 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761781880156: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761781880156","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:51:24 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:51:24 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:51:41 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761781901780: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761781901780","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 01:51:43 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761781901780: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761781901780","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:51:45 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761781901780: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761781901780","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 01:51:45 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 01:51:45 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:05:17 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Chromium"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Chromium". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-10-30 02:05:17 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-30 02:05:17 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stage..."}}
2025-10-30 02:05:19 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Chromium"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Chromium". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-10-30 02:05:19 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-30 02:05:19 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-10-30 02:05:19 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761782719565: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761782719565","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 02:05:21 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761782719565: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761782719565","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 02:05:23 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761782719565: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761782719565","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 02:05:23 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:05:23 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:05:37 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Chromium"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Chromium". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Кліп"}}
2025-10-30 02:05:37 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_2_verify_attempt1","mode":"active_window"}}
2025-10-30 02:05:37 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-10-30 02:05:49 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761782749546: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761782749546","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 02:05:51 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761782749546: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761782749546","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 02:05:53 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761782749546: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761782749546","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:05:53 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:05:53 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:14:53 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761783293817: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761783293817","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 02:14:55 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761783293817: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761783293817","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:14:57 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761783293817: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761783293817","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 02:14:57 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:14:57 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:14:59 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761783299183: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761783299183","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 02:15:01 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761783299183: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761783299183","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 02:15:03 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761783299183: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761783299183","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:15:03 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:15:03 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1220:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1489:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:15:16 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761783316239: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761783316239","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 02:15:18 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761783316239: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761783316239","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:15:20 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1761783316239: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1761783316239","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 02:15:20 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:15:20 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:15:58 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761783358579: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761783358579","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 02:16:00 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761783358579: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761783358579","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:16:02 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761783358579: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761783358579","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:16:02 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:16:02 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:16:07 [ERROR] tool-dispatcher {"metadata":{}}
2025-10-30 02:16:24 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761783384904: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761783384904","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 02:16:26 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761783384904: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761783384904","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:16:28 [ERROR] [MCP-TODO] Failed to plan tools for item verify_3_1761783384904: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_3_1761783384904","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:16:28 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:16:28 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:17:37 [ERROR] mcp-server {"metadata":{}}
2025-10-30 02:17:37 [ERROR] mcp-extension-manager {"metadata":{}}
2025-10-30 02:17:39 [ERROR] [MCP-TODO] Failed to plan tools for item verify_4_1761783459953: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_4_1761783459953","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 02:17:41 [ERROR] [MCP-TODO] Failed to plan tools for item verify_4_1761783459953: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_4_1761783459953","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 02:17:43 [ERROR] [MCP-TODO] Failed to plan tools for item verify_4_1761783459953: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_4_1761783459953","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 02:17:43 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 02:17:43 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1406:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 03:08:33 [ERROR] Failed to initialize ETERNITY: {"metadata":{}}
2025-10-30 03:08:33 [ERROR] Failed to initialize ETERNITY Integration: {"metadata":{}}
2025-10-30 03:08:56 [ERROR] executor {"metadata":{}}
2025-10-30 03:08:56 [ERROR] MCP workflow failed: GlobalConfig is not defined {"metadata":{"sessionId":"default","error":"GlobalConfig is not defined","stack":"ReferenceError: GlobalConfig is not defined\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:675:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-10-30 03:08:56 [ERROR] Step-by-step workflow failed {"metadata":{"error":"GlobalConfig is not defined","sessionId":"session_1761786534193_uy1lve3gj","stack":"ReferenceError: GlobalConfig is not defined\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:675:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-10-30 03:09:12 [ERROR] executor {"metadata":{}}
2025-10-30 03:09:12 [ERROR] MCP workflow failed: GlobalConfig is not defined {"metadata":{"sessionId":"default","error":"GlobalConfig is not defined","stack":"ReferenceError: GlobalConfig is not defined\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:675:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-10-30 03:09:12 [ERROR] Step-by-step workflow failed {"metadata":{"error":"GlobalConfig is not defined","sessionId":"session_1761786550473_z6kmxn00s","stack":"ReferenceError: GlobalConfig is not defined\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:675:29)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-10-30 03:14:21 [ERROR] Failed to initialize ETERNITY: {"metadata":{}}
2025-10-30 03:14:21 [ERROR] Failed to initialize ETERNITY Integration: {"metadata":{}}
2025-10-30 13:54:06 [ERROR] Failed to initialize ETERNITY: {"metadata":{}}
2025-10-30 13:54:06 [ERROR] Failed to initialize ETERNITY Integration: {"metadata":{}}
2025-10-30 14:01:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-10-30 14:01:56 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825716881: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825716881","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 14:01:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-10-30 14:01:57 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825717980: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825717980","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 14:01:58 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825716881: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825716881","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 14:01:59 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825719627: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825719627","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 14:01:59 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825717980: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825717980","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 14:02:00 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825716881: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825716881","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 14:02:00 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:00 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1409:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:01 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825719627: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825719627","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 14:02:01 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825717980: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825717980","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 14:02:01 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:01 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1409:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:03 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1_1761825719627: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1_1761825719627","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 14:02:03 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:03 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1409:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:07 [ERROR] tool-dispatcher {"metadata":{}}
2025-10-30 14:02:11 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761825731100: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761825731100","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 14:02:13 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761825731100: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761825731100","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 14:02:15 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761825731100: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761825731100","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 14:02:15 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:15 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1409:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:46 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761825766230: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761825766230","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-30 14:02:48 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761825766230: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761825766230","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at a..."}}
2025-10-30 14:02:50 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761825766230: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761825766230","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1129:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-30 14:02:50 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:02:50 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:987:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3717:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1409:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-30 14:24:13 [ERROR] Failed to initialize ETERNITY: {"metadata":{}}
2025-10-30 14:24:13 [ERROR] Failed to initialize ETERNITY Integration: {"metadata":{}}
2025-10-30 14:26:00 [ERROR] executor {"metadata":{}}
2025-10-30 14:26:00 [ERROR] MCP workflow failed: timeout of 30000ms exceeded {"metadata":{"sessionId":"default","error":"timeout of 30000ms exceeded","stack":"AxiosError: timeout of 30000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:519:28)\n    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)\n    at Axios.request..."}}
2025-10-30 14:26:00 [ERROR] Step-by-step workflow failed {"metadata":{"error":"timeout of 30000ms exceeded","sessionId":"session_1761827128050_y5akjdx4e","stack":"AxiosError: timeout of 30000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:519:28)\n    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)\n    at Axios.request..."}}
2025-10-30 14:31:48 [ERROR] Failed to initialize ETERNITY: {"metadata":{}}
2025-10-30 14:31:48 [ERROR] Failed to initialize ETERNITY Integration: {"metadata":{}}
2025-10-30 14:49:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 14:54:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 15:00:22 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 15:05:22 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 15:12:57 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 15:25:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 15:52:46 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 15:55:24 [ERROR] executor {"metadata":{}}
2025-10-30 15:55:24 [ERROR] MCP workflow failed: timeout of 60000ms exceeded {"metadata":{"sessionId":"default","error":"timeout of 60000ms exceeded","stack":"AxiosError: timeout of 60000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:519:28)\n    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)\n    at Axios.request..."}}
2025-10-30 15:55:24 [ERROR] Step-by-step workflow failed {"metadata":{"error":"timeout of 60000ms exceeded","sessionId":"session_1761832462724_vsojai0cc","stack":"AxiosError: timeout of 60000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:519:28)\n    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)\n    at Axios.request..."}}
2025-10-30 15:59:08 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 16:20:30 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 17:04:23 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-10-30 17:09:23 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 15:49:49 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 15:49:49 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 15:49:59 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:49:59 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:50:05 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762091405109.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 15:50:05 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-02 15:50:05 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-11-02 15:50:07 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762091407049.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 15:50:07 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-02 15:50:07 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-11-02 15:50:12 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:50:12 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:50:39 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:50:39 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1568:36) {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:50:40 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.1,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 15:50:47 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:50:47 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:51:38 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:51:38 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:52:07 [ERROR] repetition-inspector {"metadata":{}}
2025-11-02 15:52:07 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:52:07 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1568:36) {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:52:09 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.2,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 15:52:16 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:52:16 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:52:21 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.2_verify_attempt1_active_window_1762091540605.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 15:52:21 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.2_verify_attempt1","mode":"active_window"}}
2025-11-02 15:52:26 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.2_verify_attempt2_active_window_1762091545725.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 15:52:26 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.2_verify_attempt2","mode":"active_window"}}
2025-11-02 15:52:41 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:52:41 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:52:46 [ERROR] [AUTO-CORRECTION] Error during auto-correction {"metadata":{}}
2025-11-02 15:52:46 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 15:53:06 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:53:06 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:53:23 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.3,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 15:53:30 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:53:30 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:54:15 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:54:15 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:54:44 [ERROR] repetition-inspector {"metadata":{}}
2025-11-02 15:54:44 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:54:44 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1568:36) {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:54:45 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.4,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 15:54:49 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231). Sanitized error: Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\" to activate\\ndelay 0.5\\ntell application \\\"System Events\\\"\\n    keystroke \\\"2\\\"\\nend tell\"}}","originalError":"Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231)"}}
2025-11-02 15:54:49 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    keystroke \"2\"\nend tell"}}, "reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","r... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231)"}}
2025-11-02 15:54:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1.4: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.4,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 15:54:57 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:54:57 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:55:05 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:55:05 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:55:11 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656). Sanitized error: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\"\\n    activate\\n    delay 0.5\\n    tell application \\\"System Events\\\"\\n        tell process \\\"Calculator\\\"\\n            set frontmost to true\\n            delay 0.3\\n            keystroke \\\"2\\\"\\n            delay 0.3\\n            set displayText to value of static text 1 of window 1\\n            if displayText contains \\\"2\\\" then\\n                return \\\"Numbe","originalError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)"}}
2025-11-02 15:55:11 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\"\n    activate\n    delay 0.5\n    tell application \"System Events\"\n        tell process \"Calculator\"\n            set frontmost to true\n            delay 0.3\n            keystroke \"2\"\n            delay 0.3\n            set displayText to value of static text 1 of window 1\n            if displayText contains \"2\" then\n                return \"Numbe... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)"}}
2025-11-02 15:55:11 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762091706879: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762091706879","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 15:55:16 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        set value of text field 1 to \"2\"\n    end tell\nend tell"}}, "reasoning: "], "reasoning": "перевіряю, що число 2 відображається на екрані калькулятора", "tts_phrase": "перевіряю, що число 2 відображається на екрані калькулятора"... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 15:55:16 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762091706879: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762091706879","errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 15:55:22 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787). Sanitized error: Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\"\\n    activate\\n    delay 0.5\\n    tell application \\\"System Events\\\"\\n        tell process \\\"Calculator\\\"\\n            set frontmost to true\\n            keystroke \\\"1\\\" using command down -- Перемикання на базовий режим\\n            delay 0.3\\n            keystroke \\\"2\\\"\\n            delay 0.3\\n            set displayedText to value of static text 1 of window","originalError":"Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787)"}}
2025-11-02 15:55:22 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\"\n    activate\n    delay 0.5\n    tell application \"System Events\"\n        tell process \"Calculator\"\n            set frontmost to true\n            keystroke \"1\" using command down -- Перемикання на базовий режим\n            delay 0.3\n            keystroke \"2\"\n            delay 0.3\n            set displayedText to value of static text 1 of window... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787)"}}
2025-11-02 15:55:22 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762091706879: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762091706879","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-ma..."}}
2025-11-02 15:55:22 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 15:55:22 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 786 (line 1 column 787)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3778:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1568:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 15:55:22 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:55:22 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1568:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:55:23 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.4,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 15:55:27 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    keystroke \"2\"\nend tell"}}, "reasoning: "], "reasoning": "вводжу число 2 в калькулятор", "tts_phrase": "вводжу число 2", "needs_split": false} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 15:55:27 [ERROR] [MCP-TODO] Failed to plan tools for item 1.4: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.4,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 15:55:33 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231). Sanitized error: Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\" to activate\\ndelay 0.5\\ntell application \\\"System Events\\\"\\n    keystroke \\\"2\\\"\\nend tell\"}}","originalError":"Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231)"}}
2025-11-02 15:55:33 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    keystroke \"2\"\nend tell"}}, "reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","r... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231)"}}
2025-11-02 15:55:33 [ERROR] [MCP-TODO] Failed to plan tools for item 1.4: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.4,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 230 (line 1 column 231)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 15:55:40 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:55:40 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:56:49 [ERROR] [PORT-4000] Timeout - port 4000 too slow {"metadata":{"category":"vision-analysis","note":"OpenRouter fallback disabled - vision parsing not working"}}
2025-11-02 15:56:49 [ERROR] [VISION] API call failed: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled. {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"Error: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled.\n    at VisionAnalysisService._callPort4000VisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:852:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:549:9)\n    at process.processTimers (node:internal/timers:523:7)\n    at async VisionAnalysisService._callVisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orch..."}}
2025-11-02 15:57:02 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:57:02 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:57:07 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656). Sanitized error: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\"\\n    activate\\n    delay 0.5\\n    tell application \\\"System Events\\\"\\n        tell process \\\"Calculator\\\"\\n            set frontmost to true\\n            delay 0.3\\n            keystroke \\\"2\\\"\\n            delay 0.3\\n            set displayText to value of static text 1 of window 1\\n            if displayText contains \\\"2\\\" then\\n                return \\\"Numbe","originalError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)"}}
2025-11-02 15:57:07 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\"\n    activate\n    delay 0.5\n    tell application \"System Events\"\n        tell process \"Calculator\"\n            set frontmost to true\n            delay 0.3\n            keystroke \"2\"\n            delay 0.3\n            set displayText to value of static text 1 of window 1\n            if displayText contains \"2\" then\n                return \"Numbe... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)"}}
2025-11-02 15:57:07 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762091823239: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762091823239","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 15:57:12 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        set value of text field 1 to \"2\"\n    end tell\nend tell"}}, "reasoning: ","перевіряю, що число 2 відображається на екрані калькулятора", "tts_phrase: ","перевіряю число на екрані калькулятора", "needs_split: false}"]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 15:57:12 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762091823239: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762091823239","errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 15:57:17 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\"\n    activate\n    delay 0.5\n    tell application \"System Events\"\n        tell process \"Calculator\"\n            set frontmost to true\n            delay 0.3\n            keystroke \"2\"\n            delay 0.3\n            set displayText to value of static text 1 of window 1\n            if displayText is \"2\" then\n                return \"Number 2 is... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 15:57:17 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762091823239: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762091823239","errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2530:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1393:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 15:57:17 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 15:57:17 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3778:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1568:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 15:57:17 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: Cannot read properties of undefined (reading 'map') {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:57:17 [ERROR] Stack trace: TypeError: Cannot read properties of undefined (reading 'map')
    at ToolDispatcher.dispatchToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-dispatcher.js:126:55)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:450:24)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3810:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1568:36) {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 15:57:18 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.4,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 15:57:18 [ERROR] Item 1.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.5}}
2025-11-02 15:57:46 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:03:34 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 16:03:34 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 16:03:42 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: results is not iterable {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:03:42 [ERROR] Stack trace: TypeError: results is not iterable
    at ToolInspectionManager.processResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-inspection-manager.js:163:30)
    at TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:367:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:03:49 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762092229028.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 16:03:49 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-02 16:03:49 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-11-02 16:03:51 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762092230703.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 16:03:51 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-02 16:03:51 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-11-02 16:03:53 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1762092231168: Cannot plan tools: Немає достатньо інформації для виконання дії. Потрібна додаткова інформація про те, як саме перевіряти результат. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1762092231168","errorName":"Error","stack":"Error: Cannot plan tools: Немає достатньо інформації для виконання дії. Потрібна додаткова інформація про те, як саме перевіряти результат.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1412:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/m..."}}
2025-11-02 16:03:58 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1762092231168: Cannot plan tools: No specific tools are required to verify if the calculator window is displayed on the screen. This is a visual confirmation that doesn't require any MCP tool operations. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1762092231168","errorName":"Error","stack":"Error: Cannot plan tools: No specific tools are required to verify if the calculator window is displayed on the screen. This is a visual confirmation that doesn't require any MCP tool operations.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1412:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///U..."}}
2025-11-02 16:04:03 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: results is not iterable {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:04:03 [ERROR] Stack trace: TypeError: results is not iterable
    at ToolInspectionManager.processResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-inspection-manager.js:163:30)
    at TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:367:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3812:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:04:12 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762092251996.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 16:04:12 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-02 16:04:12 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-11-02 16:04:15 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: results is not iterable {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:04:15 [ERROR] Stack trace: TypeError: results is not iterable
    at ToolInspectionManager.processResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-inspection-manager.js:163:30)
    at TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:367:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3812:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1568:36) {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:04:16 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.1,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 16:04:21 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: results is not iterable {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:04:21 [ERROR] Stack trace: TypeError: results is not iterable
    at ToolInspectionManager.processResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-inspection-manager.js:163:30)
    at TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:367:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1445:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:04:26 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762092266150.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 16:04:26 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-02 16:04:26 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-11-02 16:04:28 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762092267825.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 16:04:28 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-02 16:04:28 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:378:30)\n    at async GrishaVerifyItemProce..."}}
2025-11-02 16:04:30 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1762092268283: Cannot plan tools: No specific tools are required to verify if the calculator window is displayed on the screen. This is a visual confirmation that doesn't require any MCP tool operations. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1762092268283","errorName":"Error","stack":"Error: Cannot plan tools: No specific tools are required to verify if the calculator window is displayed on the screen. This is a visual confirmation that doesn't require any MCP tool operations.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1412:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///U..."}}
2025-11-02 16:04:35 [ERROR] [STAGE-2.2-MCP] ❌ Execution failed: results is not iterable {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:04:35 [ERROR] Stack trace: TypeError: results is not iterable
    at ToolInspectionManager.processResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tool-inspection-manager.js:163:30)
    at TetyanaToolSystem.executeToolCalls (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/ai/tetyana-tool-system.js:367:57)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:84:39)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3812:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-execute-tools","component":"tetyana-execute-tools"}}
2025-11-02 16:04:43 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-02 16:04:43 [ERROR] Item 1.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.3}}
2025-11-02 16:04:43 [ERROR] Item 1.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.4}}
2025-11-02 16:04:43 [ERROR] Item 1.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.5}}
2025-11-02 16:04:43 [ERROR] Item 1.6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.6}}
2025-11-02 16:06:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:11:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:16:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:19:20 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 16:19:20 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 16:19:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:19:36 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762093176097.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 16:19:36 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-02 16:20:03 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:20:11 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:20:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:20:18 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.2,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 16:20:25 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:21:26 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at runNextTicks (node:internal/process/task_queues:65:..."}}
2025-11-02 16:21:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:21:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:22:01 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        set value of text field 1 of window 1 as text\n    end tell\nend tell"}}, "reasoning: ","перевіряю, чи відображається число 2 на екрані калькулятора", "tts_phrase: ","перевіряю, чи відображається число 2 на екрані калькулятора", "... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:22:01 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762093317769: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762093317769","errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:22:06 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        set value of text field 1 of window 1 as string\n    end tell\nend tell"}}, "reasoning: ","перевіряю, чи відображається число 2 на екрані калькулятора", "tts_phrase: ","перевіряю, чи відображається число 2 на екрані калькулятора",... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:22:06 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762093317769: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762093317769","errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:22:12 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656). Sanitized error: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\"\\n    activate\\n    delay 0.5\\n    tell application \\\"System Events\\\"\\n        tell process \\\"Calculator\\\"\\n            set frontmost to true\\n            delay 0.3\\n            keystroke \\\"2\\\"\\n            delay 0.3\\n            set displayText to value of static text 1 of window 1\\n            if displayText contains \\\"2\\\" then\\n                return \\\"Numbe","originalError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)"}}
2025-11-02 16:22:12 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\"\n    activate\n    delay 0.5\n    tell application \"System Events\"\n        tell process \"Calculator\"\n            set frontmost to true\n            delay 0.3\n            keystroke \"2\"\n            delay 0.3\n            set displayText to value of static text 1 of window 1\n            if displayText contains \"2\" then\n                return \"Numbe... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)"}}
2025-11-02 16:22:12 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762093317769: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762093317769","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-ma..."}}
2025-11-02 16:22:12 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:22:12 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 655 (line 1 column 656)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3780:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:22:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:22:48 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"3\"\n        keystroke \"3\"\n        keystroke \"3\"\n        keystroke \"*\"\n        keystroke \"2\"\n        keystroke return\n        delay 0.5\n        set resultText to value of static text 1 of window 1\n        if resultText is \"666\" then\n            display notification \"Результат множення ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:22:48 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:22:54 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 639 (line 1 column 640). Sanitized error: Expected ',' or ']' after array element in JSON at position 639 (line 1 column 640) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        set frontmost to true\\n        keystroke \\\"c\\\" using command down\\n        delay 0.5\\n        set clipboardText to the clipboard\\n        if clipboardText is \\\"666\\\" then\\n            display notification \\\"Результат множення 333 на 2 дорівнює 666\\\" with title \\\"Перевірка успішна\\\"\\n        else\\n            display","originalError":"Expected ',' or ']' after array element in JSON at position 639 (line 1 column 640)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 639 (line 1 column 640)"}}
2025-11-02 16:22:54 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        keystroke \"c\" using command down\n        delay 0.5\n        set clipboardText to the clipboard\n        if clipboardText is \"666\" then\n            display notification \"Результат множення 333 на 2 дорівнює 666\" with title \"Перевірка успішна\"\n        else\n            display... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 639 (line 1 column 640)"}}
2025-11-02 16:22:54 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 639 (line 1 column 640) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 639 (line 1 column 640)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 16:22:59 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        delay 0.5\n        set resultText to value of static text 1 of window 1\n        if resultText is \"666\" then\n            display dialog \"Результат множення 333 на 2 дорівнює 666\" buttons {\"OK\"} default button 1\n        else\n            display dialog \"Результат множення 333 н... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:22:59 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:22:59 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:22:59 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1382:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:23:04 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"3\"\n        keystroke \"3\"\n        keystroke \"3\"\n        keystroke \"*\"\n        keystroke \"2\"\n        keystroke return\n        delay 0.5\n        set resultText to value of static text 1 of window 1\n        if resultText is \"666\" then\n            display notification \"Результат множення ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:23:04 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:23:09 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"3\"\n        keystroke \"3\"\n        keystroke \"3\"\n        keystroke \"*\"\n        keystroke \"2\"\n        keystroke return\n        delay 0.5\n        set resultText to value of static text 1 of window 1\n        if resultText is \"666\" then\n            display notification \"Результат множення ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:23:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:23:16 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949). Sanitized error: Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke \\\"3\\\" using command down\\n        delay 0.3\\n        keystroke \\\"c\\\" using command down\\n        delay 0.3\\n        keystroke \\\"v\\\" using command down\\n        delay 0.3\\n        keystroke \\\"*\\\"\\n        delay 0.3\\n        keystroke \\\"2\\\"\\n        delay 0.3\\n        keystroke \\\"=\\\"\\n        delay 0.3\\n    ","originalError":"Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949)"}}
2025-11-02 16:23:16 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"3\" using command down\n        delay 0.3\n        keystroke \"c\" using command down\n        delay 0.3\n        keystroke \"v\" using command down\n        delay 0.3\n        keystroke \"*\"\n        delay 0.3\n        keystroke \"2\"\n        delay 0.3\n        keystroke \"=\"\n        delay 0.3\n    ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949)"}}
2025-11-02 16:23:16 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 16:23:16 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:23:16 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 948 (line 1 column 949)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1382:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:23:22 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 622 (line 1 column 623). Sanitized error: Expected ',' or ']' after array element in JSON at position 622 (line 1 column 623) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke \\\"c\\\" using command down\\n        delay 0.3\\n        set resultText to value of text field 1 of window 1\\n        if resultText is \\\"666\\\" then\\n            display notification \\\"Результат множення 333 на 2 дорівнює 666\\\" with title \\\"Перевірка успішна\\\"\\n        else\\n            display notification \\\"Р","originalError":"Expected ',' or ']' after array element in JSON at position 622 (line 1 column 623)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 622 (line 1 column 623)"}}
2025-11-02 16:23:22 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"c\" using command down\n        delay 0.3\n        set resultText to value of text field 1 of window 1\n        if resultText is \"666\" then\n            display notification \"Результат множення 333 на 2 дорівнює 666\" with title \"Перевірка успішна\"\n        else\n            display notification \"Р... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 622 (line 1 column 623)"}}
2025-11-02 16:23:22 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 622 (line 1 column 623) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 622 (line 1 column 623)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-ma..."}}
2025-11-02 16:23:27 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"3\" using command down\n        delay 0.3\n        keystroke \"c\" using command down\n        delay 0.3\n        keystroke \"v\" using command down\n        delay 0.3\n        keystroke \"*\"\n        delay 0.3\n        keystroke \"2\"\n        delay 0.3\n        keystroke \"=\"\n        delay 0.3\n    ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:23:27 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:23:33 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796). Sanitized error: Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        set frontmost to true\\n        keystroke \\\"c\\\" using command down\\n        keystroke \\\"v\\\" using command down\\n        keystroke \\\"=\\\"\\n        delay 0.5\\n        keystroke return\\n        delay 0.5\\n        keystroke \\\"c\\\" using command down\\n        set theClipboard to the clipboard\\n        if theClipboard is \\\"6","originalError":"Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796)"}}
2025-11-02 16:23:33 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        keystroke \"c\" using command down\n        keystroke \"v\" using command down\n        keystroke \"=\"\n        delay 0.5\n        keystroke return\n        delay 0.5\n        keystroke \"c\" using command down\n        set theClipboard to the clipboard\n        if theClipboard is \"6... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796)"}}
2025-11-02 16:23:33 [ERROR] [MCP-TODO] Failed to plan tools for item 1.6: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.6,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 16:23:33 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:23:33 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 795 (line 1 column 796)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1382:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:26:45 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 16:26:45 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 16:26:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:27:04 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762093623935.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 16:27:04 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-02 16:27:14 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762093634411.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-02 16:27:14 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-02 16:27:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:27:44 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:27:50 [ERROR] repetition-inspector {"metadata":{}}
2025-11-02 16:27:51 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.2,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 16:27:58 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:28:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:28:13 [ERROR] repetition-inspector {"metadata":{}}
2025-11-02 16:28:14 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.2,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 16:28:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:28:30 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 558 (line 1 column 559). Sanitized error: Expected ',' or ']' after array element in JSON at position 558 (line 1 column 559) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\"\\n    activate\\n    delay 0.5\\n    tell application \\\"System Events\\\"\\n        tell process \\\"Calculator\\\"\\n            set frontmost to true\\n            delay 0.3\\n            set displayText to value of static text 1 of window 1\\n            if displayText contains \\\"2\\\" then\\n                return true\\n            else\\n                return false\\n     ","originalError":"Expected ',' or ']' after array element in JSON at position 558 (line 1 column 559)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 558 (line 1 column 559)"}}
2025-11-02 16:28:30 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\"\n    activate\n    delay 0.5\n    tell application \"System Events\"\n        tell process \"Calculator\"\n            set frontmost to true\n            delay 0.3\n            set displayText to value of static text 1 of window 1\n            if displayText contains \"2\" then\n                return true\n            else\n                return false\n     ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 558 (line 1 column 559)"}}
2025-11-02 16:28:30 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.2_1762093704074: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 558 (line 1 column 559) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.2_1762093704074","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 558 (line 1 column 559)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 16:28:35 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        set value of text field 1 of window 1 as string\n    end tell\nend tell"}}, "reasoning: ","перевіряю, чи відображається число 2 на екрані калькулятора", "tts_phrase: ","перевіряю, чи відображається число 2 на екрані калькулятора",... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:28:35 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.2_1762093704074: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.2_1762093704074","errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProce..."}}
2025-11-02 16:28:40 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        set frontmost to true\n        set value of text field 1 to \"2\"\n    end tell\nend tell"}}, "reasoning: ","перевіряю, що число 2 відображається на екрані калькулятора", "tts_phrase: ","перевіряю число на екрані калькулятора", "needs_split: false}"]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:28:40 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.2_1762093704074: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.2_1762093704074","errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:28:40 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:28:40 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3780:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1485:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-02 16:28:44 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"*\"\n    end tell\nend tell"}}, "reasoning: ","натискаю кнопку множення в калькуляторі", "tts_phrase: ","натискаю кнопку множення", "needs_split: ",false]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-02 16:28:44 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-02 16:28:49 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282). Sanitized error: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\" to activate\\ndelay 0.5\\ntell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke \\\"*\\\"\\n    end tell\\nend tell\"}}","originalError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)"}}
2025-11-02 16:28:49 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"*\"\n    end tell\nend tell"}}, "reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reason... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)"}}
2025-11-02 16:28:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 16:28:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:29:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:29:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:29:33 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:29:34 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.3,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 16:29:40 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282). Sanitized error: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\" to activate\\ndelay 0.5\\ntell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke \\\"*\\\"\\n    end tell\\nend tell\"}}","originalError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)"}}
2025-11-02 16:29:40 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"*\"\n    end tell\nend tell"}}, "reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reason... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)"}}
2025-11-02 16:29:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 16:29:46 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282). Sanitized error: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\" to activate\\ndelay 0.5\\ntell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke \\\"*\\\"\\n    end tell\\nend tell\"}}","originalError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)"}}
2025-11-02 16:29:46 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"*\"\n    end tell\nend tell"}}, "reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reason... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)"}}
2025-11-02 16:29:46 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 16:29:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:30:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:30:31 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:30:51 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:30:51 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:30:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:30:53 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.3,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 16:30:58 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282). Sanitized error: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\": [{\"server\": \"applescript\", \"tool\": \"applescript__execute\", \"parameters\": {\"code_snippet\": \"tell application \\\"Calculator\\\" to activate\\ndelay 0.5\\ntell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke \\\"*\\\"\\n    end tell\\nend tell\"}}","originalError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)"}}
2025-11-02 16:30:58 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls": [{"server": "applescript", "tool": "applescript__execute", "parameters": {"code_snippet": "tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"*\"\n    end tell\nend tell"}}, "reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reasoning: ","reason... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)"}}
2025-11-02 16:30:58 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 281 (line 1 column 282)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-02 16:31:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:31:07 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:31:15 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:31:15 [ERROR] repetition-inspector {"metadata":{}}
2025-11-02 16:31:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-02 16:31:24 [ERROR] Failed to analyze/replan: HierarchicalIdManager is not defined {"metadata":{"sessionId":"default","itemId":1.3,"error":"HierarchicalIdManager is not defined","stack":"ReferenceError: HierarchicalIdManager is not defined\n    at file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1637:33\n    at Array.forEach (<anonymous>)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1635:38)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 16:31:24 [ERROR] Item 1.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.4}}
2025-11-02 16:31:24 [ERROR] Item 1.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.5}}
2025-11-02 16:31:24 [ERROR] Item 2.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.1}}
2025-11-02 16:31:39 [ERROR] Item 2.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.3}}
2025-11-02 16:39:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:44:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:49:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:54:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 16:59:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 17:04:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 17:09:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 17:14:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 17:19:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 17:21:43 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 17:21:43 [ERROR] context-enrichment {"metadata":{}}
2025-11-02 17:21:54 [ERROR] [MCP-TODO] LLM API request failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"category":"mcp-todo","component":"mcp-todo","code":"undefined","stack":"Error: Item 1.1 has forward/circular dependency 1.9\n    at MCPTodoManager._validateTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2398:17)\n    at MCPTodoManager.createTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:481:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AtlasTodoPlanningProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workf"}}
2025-11-02 17:21:54 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-02 17:21:54 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-02 17:21:54 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1061:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 17:21:54 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","sessionId":"session_1762094107246_8mkl5u15b","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1061:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-02 17:28:52 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 17:39:12 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 17:50:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 17:55:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:00:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:05:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:14:41 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:19:42 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:24:42 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:39:12 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:47:47 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:52:47 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 18:57:47 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 19:02:47 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 19:13:53 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 19:30:16 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 19:37:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 19:42:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 19:47:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 19:52:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 19:57:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:02:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:07:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:12:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:17:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:29:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:34:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:39:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:44:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:49:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:54:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 20:59:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:04:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:09:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:14:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:19:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:24:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:32:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:37:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:42:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:47:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:52:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 21:57:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 22:02:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 22:07:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 22:12:56 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 22:16:16 [ERROR] mcp-server {"metadata":{}}
2025-11-02 22:16:16 [ERROR] mcp-manager {"metadata":{}}
2025-11-02 22:16:16 [ERROR] mcp-manager {"metadata":{}}
2025-11-02 22:18:37 [ERROR] MCP workflow failed: [DI] Failed to resolve service "multiModelOrchestrator": require is not defined {"metadata":{"sessionId":"default","error":"[DI] Failed to resolve service \"multiModelOrchestrator\": require is not defined","stack":"Error: [DI] Failed to resolve service \"multiModelOrchestrator\": require is not defined\n    at DIContainer.resolve (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/core/di-container.js:167:19)\n    at NexusContextActivator.executeWithNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:256:43)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:78:43)\n    at process.processTicksAndRejections (..."}}
2025-11-02 22:18:37 [ERROR] Step-by-step workflow failed {"metadata":{"error":"[DI] Failed to resolve service \"multiModelOrchestrator\": require is not defined","sessionId":"session_1762114609207_awy9dpihi","stack":"Error: [DI] Failed to resolve service \"multiModelOrchestrator\": require is not defined\n    at DIContainer.resolve (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/core/di-container.js:167:19)\n    at NexusContextActivator.executeWithNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:256:43)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:78:43)\n    at process.processTicksAndRejections (..."}}
2025-11-02 22:19:46 [ERROR] mcp-server {"metadata":{}}
2025-11-02 22:19:46 [ERROR] mcp-manager {"metadata":{}}
2025-11-02 22:19:46 [ERROR] mcp-manager {"metadata":{}}
2025-11-02 22:50:52 [ERROR] mcp-server {"metadata":{}}
2025-11-02 22:50:52 [ERROR] mcp-manager {"metadata":{}}
2025-11-02 22:50:52 [ERROR] mcp-manager {"metadata":{}}
2025-11-02 22:54:51 [ERROR] mcp-server {"metadata":{}}
2025-11-02 22:54:51 [ERROR] mcp-manager {"metadata":{}}
2025-11-02 22:54:51 [ERROR] mcp-manager {"metadata":{}}
2025-11-02 22:55:31 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:00:03 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:01:40 [ERROR] MCP workflow failed: [DI] Service "multiModelOrchestrator" is not registered. Available: config, logger, errorHandler, telemetry, localizationService, llmClient, wsManager, webIntegration, sessions, networkConfig, visionAnalysis, chatMemoryEligibilityProcessor, chatMemoryCoordinator, mcpManager, tetyanaToolSystem, ttsSyncManager, mcpTodoManager, modeSelectionProcessor, devSelfAnalysisProcessor, atlasContextEnrichmentProcessor, selfCorrectionValidator, contextAwareToolFilter, workflowStateMachine, routerClassifier, mcpSchemaBuilder, atlasTodoPlanningProcessor, serverSelectionProcessor, tetyanaPlanToolsProcessor, tetyanaExecuteToolsProcessor, grishaVerifyItemProcessor, atlasReplanTodoProcessor, mcpFinalSummaryProcessor, eternityIntegration {"metadata":{"sessionId":"default","error":"[DI] Service \"multiModelOrchestrator\" is not registered. Available: config, logger, errorHandler, telemetry, localizationService, llmClient, wsManager, webIntegration, sessions, networkConfig, visionAnalysis, chatMemoryEligibilityProcessor, chatMemoryCoordinator, mcpManager, tetyanaToolSystem, ttsSyncManager, mcpTodoManager, modeSelectionProcessor, devSelfAnalysisProcessor, atlasContextEnrichmentProcessor, selfCorrectionValidator, contextAwareToolFilter, workflowStateMachine, routerClassifier...","stack":"Error: [DI] Service \"multiModelOrchestrator\" is not registered. Available: config, logger, errorHandler, telemetry, localizationService, llmClient, wsManager, webIntegration, sessions, networkConfig, visionAnalysis, chatMemoryEligibilityProcessor, chatMemoryCoordinator, mcpManager, tetyanaToolSystem, ttsSyncManager, mcpTodoManager, modeSelectionProcessor, devSelfAnalysisProcessor, atlasContextEnrichmentProcessor, selfCorrectionValidator, contextAwareToolFilter, workflowStateMachine, routerCla..."}}
2025-11-02 23:01:40 [ERROR] Step-by-step workflow failed {"metadata":{"error":"[DI] Service \"multiModelOrchestrator\" is not registered. Available: config, logger, errorHandler, telemetry, localizationService, llmClient, wsManager, webIntegration, sessions, networkConfig, visionAnalysis, chatMemoryEligibilityProcessor, chatMemoryCoordinator, mcpManager, tetyanaToolSystem, ttsSyncManager, mcpTodoManager, modeSelectionProcessor, devSelfAnalysisProcessor, atlasContextEnrichmentProcessor, selfCorrectionValidator, contextAwareToolFilter, workflowStateMachine, routerClassifier...","sessionId":"session_1762117233841_ucc4kdfhh","stack":"Error: [DI] Service \"multiModelOrchestrator\" is not registered. Available: config, logger, errorHandler, telemetry, localizationService, llmClient, wsManager, webIntegration, sessions, networkConfig, visionAnalysis, chatMemoryEligibilityProcessor, chatMemoryCoordinator, mcpManager, tetyanaToolSystem, ttsSyncManager, mcpTodoManager, modeSelectionProcessor, devSelfAnalysisProcessor, atlasContextEnrichmentProcessor, selfCorrectionValidator, contextAwareToolFilter, workflowStateMachine, routerCla..."}}
2025-11-02 23:02:30 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:03:01 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:03:22 [ERROR] MCP workflow failed: multiModel.autonomousDataCollection is not a function {"metadata":{"sessionId":"default","error":"multiModel.autonomousDataCollection is not a function","stack":"TypeError: multiModel.autonomousDataCollection is not a function\n    at NexusContextActivator._executeDevFullNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:281:39)\n    at NexusContextActivator.executeWithNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:260:35)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:78:43)\n    at process.processTick..."}}
2025-11-02 23:03:22 [ERROR] Step-by-step workflow failed {"metadata":{"error":"multiModel.autonomousDataCollection is not a function","sessionId":"session_1762117402477_z5rqqhgf4","stack":"TypeError: multiModel.autonomousDataCollection is not a function\n    at NexusContextActivator._executeDevFullNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:281:39)\n    at NexusContextActivator.executeWithNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:260:35)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:78:43)\n    at process.processTick..."}}
2025-11-02 23:05:21 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:05:53 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:06:06 [ERROR] MCP workflow failed: multiModel.autonomousDataCollection is not a function {"metadata":{"sessionId":"default","error":"multiModel.autonomousDataCollection is not a function","stack":"TypeError: multiModel.autonomousDataCollection is not a function\n    at NexusContextActivator._executeDevFullNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:281:39)\n    at NexusContextActivator.executeWithNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:260:35)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:78:43)\n    at process.processTick..."}}
2025-11-02 23:06:06 [ERROR] Step-by-step workflow failed {"metadata":{"error":"multiModel.autonomousDataCollection is not a function","sessionId":"session_1762117566058_sa1hj8bc6","stack":"TypeError: multiModel.autonomousDataCollection is not a function\n    at NexusContextActivator._executeDevFullNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:281:39)\n    at NexusContextActivator.executeWithNexus (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/nexus-context-activator.js:260:35)\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:78:43)\n    at process.processTick..."}}
2025-11-02 23:06:55 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:07:22 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:12:22 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 23:12:47 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:13:19 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:13:39 [ERROR] [DEV-ANALYSIS] Self-analysis failed: selfImprovementEngine.applyImprovement is not a function {"metadata":{"category":"system","component":"dev-analysis","error":"selfImprovementEngine.applyImprovement is not a function"}}
2025-11-02 23:15:10 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:19:53 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:20:43 [ERROR] [DEV-MODE] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{}}
2025-11-02 23:21:53 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:23:59 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:28:59 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 23:32:39 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:36:35 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:37:46 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:42:47 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:47:22 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:49:08 [ERROR] mcp-server {"metadata":{}}
2025-11-02 23:54:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-02 23:59:14 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:04:14 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 00:06:18 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:11:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 00:16:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 00:21:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 00:26:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 00:26:42 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:28:28 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:33:01 [ERROR] [DEV-MODE] Self-analysis failed: this._ensureConfig is not a function {"metadata":{}}
2025-11-03 00:33:28 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 00:34:05 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:38:11 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:42:28 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:47:28 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 00:50:41 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:51:33 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:56:32 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 00:57:28 [ERROR] mcp-server {"metadata":{}}
2025-11-03 00:58:22 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:00:03 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:04:48 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:09:21 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:14:21 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 01:14:35 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:16:34 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 01:16:34 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 01:16:42 [ERROR] [MCP-TODO] LLM API request failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"category":"mcp-todo","component":"mcp-todo","code":"undefined","stack":"Error: Item 1.1 has forward/circular dependency 1.9\n    at MCPTodoManager._validateTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2398:17)\n    at MCPTodoManager.createTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:481:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AtlasTodoPlanningProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workf"}}
2025-11-03 01:16:42 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 01:16:42 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 01:16:42 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1146:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 01:16:42 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","sessionId":"session_1762125331304_wagqryql5","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1146:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 01:19:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 01:20:18 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:24:16 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:29:16 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 01:30:30 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 01:30:30 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 01:30:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:31:11 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 01:31:11 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 01:31:14 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:31:14 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:31:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:31:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:31:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:31:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:31:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:31:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:07 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:07 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:32:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:12 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:53 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:33:53 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:03 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:11 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:11 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:16 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 01:34:18 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:18 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:34:53 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:03 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:03 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:35:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:36:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:11 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:11 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:37:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:03 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:03 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:38:48 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:39:05 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:42:52 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:46:11 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 01:46:11 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 01:46:33 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:47:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:47:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:47:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:47:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:47:39 [ERROR] [STAGE-2.0-MCP] ❌ Fallback JSON parse also failed: Unterminated string in JSON at position 239 (line 4 column 9) {"metadata":{"category":"server-selection","component":"server-selection","rawResponse":"{\n  \"selected_servers\": [\"filesystem\"],\n  \"reasoning\": \"The task requires checking if all necessary extensions are installed for reading files, which can be done by reading a configuration file or a list of installed extensions.\",\n  \"conf"}}
2025-11-03 01:47:52 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 01:48:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:48:51 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:48:57 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 01:48:57 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 01:49:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:49:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:49:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:49:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:49:11 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 924 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"strategy\": \"replan_and_continue\",\n  \"reasoning\": \"Не вдалося перевірити встановлені розширення через помилку MCP. Потрібно перевірити параметри інструментів та переконатися, що необхідні дані/файли існують перед їх використанням.\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити параметри інструментів для читання файлів\",\n      \"success_criteria\": \"Параметри інструментів коректні та відповідають вимогам\",\n      \"fallback_options\": [\"Використати альтернативні "}}
2025-11-03 01:49:12 [ERROR] [STAGE-2.0-MCP] ❌ Fallback JSON parse also failed: Unterminated string in JSON at position 239 (line 4 column 9) {"metadata":{"category":"server-selection","component":"server-selection","rawResponse":"{\n  \"selected_servers\": [\"filesystem\"],\n  \"reasoning\": \"The task requires checking if all necessary extensions are installed for reading files, which can be done by reading a configuration file or a list of installed extensions.\",\n  \"conf"}}
2025-11-03 01:49:23 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:49:37 [ERROR] [ETERNITY-API] Status error: {"metadata":{}}
2025-11-03 01:50:04 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:50:33 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:51:24 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:52:05 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 01:52:05 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 01:52:25 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:52:30 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R 1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762127550012.png"
rect (1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Файл"}}
2025-11-03 01:52:30 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 01:53:32 [ERROR] [PORT-4000] Timeout - port 4000 too slow {"metadata":{"category":"vision-analysis","note":"OpenRouter fallback disabled - vision parsing not working"}}
2025-11-03 01:53:32 [ERROR] [VISION] API call failed: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled. {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"Error: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled.\n    at VisionAnalysisService._callPort4000VisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:852:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:549:9)\n    at process.processTimers (node:internal/timers:523:7)\n    at async VisionAnalysisService._callVisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orch..."}}
2025-11-03 01:55:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:55:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:55:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:55:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:55:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:55:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:55:53 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:11 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 01:56:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:30 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 954 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"reasoning\": \"Поточний інструмент для перевірки наявності файлу не працює. Змінюю підхід: спочатку перевірю наявність файлу за допомогою іншого інструменту, а потім прочитаю його вміст.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити наявність файлу orchestrator/test-nexus-bug.js за допомогою іншого інструменту\",\n      \"success_criteria\": \"Файл знайдено і його вміст доступний для читання\",\n      \"fallback_options\": [\"Вико"}}
2025-11-03 01:56:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:56:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:57:03 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 01:57:03 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 01:57:08 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 01:57:08 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 01:57:16 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:57:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:57:34 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 01:57:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:57:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:57:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:58:03 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:58:03 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 01:58:21 [ERROR] mcp-server {"metadata":{}}
2025-11-03 01:58:41 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:01:03 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:05:58 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:10:57 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 02:11:44 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:16:44 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 02:19:47 [ERROR] [ETERNITY-API] Error: {"metadata":{}}
2025-11-03 02:19:47 [ERROR] [CASCADE-API] Self-analysis error: {"metadata":{}}
2025-11-03 02:21:44 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 02:21:58 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:26:58 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 02:27:34 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:32:37 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:36:25 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:41:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 02:43:37 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:48:37 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 02:53:03 [ERROR] mcp-server {"metadata":{}}
2025-11-03 02:58:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 03:09:49 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:11:19 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:15:11 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:19:44 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:23:11 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:24:32 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"566","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Помилка збереження в MCP Memory відбувається кожні 5 хвилин\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"tempera...","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":566,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 566\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 01:24:31 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"566","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":566,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 01:24:31 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 03:24:33 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"542","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Помилка mcp-server відбувається кожні 5 хвилин\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"temperature\":0.1,\"ma...","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":542,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 542\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 01:24:33 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"542","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":542,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 01:24:33 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 03:28:11 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 03:31:09 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:32:02 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"241","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a code analysis assistant.\"},{\"role\":\"user\",\"content\":\"Analyze this code:\\n\\nfunction calculateSum(a, b) {\\n    return a + b;\\n}\\n\"}],\"temperature\":0.1,\"max_tokens\":2500}","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":241,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 241\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 01:32:02 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":false,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"241","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":241,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 01:32:02 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 03:36:09 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 03:37:43 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:39:05 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:43:37 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:48:15 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:53:15 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 03:55:22 [ERROR] mcp-server {"metadata":{}}
2025-11-03 03:56:39 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"551","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Помилка в MCP сервері без додаткової інформації\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"temperature\":0.1,\"m...","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":551,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 551\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 01:56:39 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"551","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":551,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 01:56:39 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 03:56:41 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"551","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Помилка в MCP сервері без додаткової інформації\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"temperature\":0.1,\"m...","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":551,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 551\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 01:56:41 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"551","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":551,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 01:56:41 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 03:56:43 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"551","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Помилка в MCP сервері без додаткової інформації\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"temperature\":0.1,\"m...","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":551,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 551\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 01:56:43 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"551","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":551,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 01:56:43 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 03:56:45 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"551","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Помилка в MCP сервері без додаткової інформації\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"temperature\":0.1,\"m...","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":551,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 551\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 01:56:45 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"551","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":551,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 01:56:45 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 03:56:47 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"516","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Не вдалося зберегти в MCP Memory\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"temperature\":0.1,\"max_tokens\":2500}","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":516,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 516\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 01:56:47 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"516","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":516,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 01:56:47 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 04:00:21 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 04:02:01 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:05:07 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:06:14 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:10:01 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:12:35 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:13:44 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"516","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Помилка без деталей у логах\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"temperature\":0.1,\"max_tokens\":2500}","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":516,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 516\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 02:13:44 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"516","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":516,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 02:13:44 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 04:13:46 [ERROR] [NEXUS] Task execution failed: Request failed with status code 401 {"metadata":{"name":"AxiosError","code":"ERR_BAD_REQUEST","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":["[Function transformRequest]"],"transformResponse":["[Function transformResponse]"],"timeout":120000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{"FormData":"[Function FormData]","Blob":"[Function Blob]"},"validateStatus":"[Function validateStatus]","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"516","Accept-Encoding":"gzip, compress, deflate, br"},"method":"post","url":"http://localhost:4000/v1/chat/completions","data":"{\"model\":\"gpt-5-codex\",\"messages\":[{\"role\":\"system\",\"content\":\"You are a helpful AI assistant specialized in code analysis and system optimization.\"},{\"role\":\"user\",\"content\":\"Fix the following issue in code:\\n                    \\n                    Problem: Помилка без деталей у логах\\n                    File: unknown\\n                    Context: N/A\\n                    \\n                    Provide exact code changes needed to fix this issue.\"}],\"temperature\":0.1,\"max_tokens\":2500}","allowAbsoluteUrls":true},"request":{"_events":{"abort":"[Function anonymous]","aborted":"[Function anonymous]","connect":"[Function anonymous]","error":"[Function anonymous]","socket":"[Function anonymous]","timeout":"[Function anonymous]","finish":"[Function requestOnFinish]"},"_eventsCount":7,"_maxListeners":"undefined","outputData":[],"outputSize":0,"writable":true,"destroyed":true,"_last":false,"chunkedEncoding":false,"shouldKeepAlive":true,"maxRequestsOnConnectionReached":false,"_defaultKeepAlive":true,"useChunkedEncodingByDefault":true,"sendDate":false,"_removedConnection":false,"_removedContLen":false,"_removedTE":false,"strictContentLength":false,"_contentLength":516,"_hasBody":true,"_trailer":"","finished":true,"_headerSent":true,"_closed":true,"_header":"POST /v1/chat/completions HTTP/1.1\r\nAccept: application/json, text/plain, */*\r\nContent-Type: application/json\r\nUser-Agent: axios/1.12.2\r\nContent-Length: 516\r\nAccept-Encoding: gzip, compress, deflate, br\r\nHost: localhost:4000\r\nConnection: keep-alive\r\n\r\n","_keepAliveTimeout":0,"_onPendingData":"[Function nop]","agent":{"_events":{"free":"[Function anonymous]","newListener":"[Function maybeEnableKeylog]"},"_eventsCount":2,"_maxListeners":"undefined","defaultPort":80,"protocol":"http:","options":{"keepAlive":true,"scheduling":"lifo","timeout":5000,"noDelay":true,"path":null},"requests":{},"sockets":{},"freeSockets":{"localhost:4000:":[{"connecting":false,"_hadError":false,"_parent":null,"_host":"localhost","_closeAfterHandlingError":false,"_events":"[Object depth limit exceeded]","_readableState":"[Object depth limit exceeded]","_writableState":"[Object depth limit exceeded]","allowHalfOpen":false,"_maxListeners":"undefined","_eventsCount":6,"_sockname":null,"_pendingData":null,"_pendingEncoding":"","server":null,"_server":null,"timeout":4000,"parser":null,"_httpMessage":null,"autoSelectFamilyAttemptedAddresses":"[Array depth limit exceeded]"}]},"keepAliveMsecs":1000,"keepAlive":true,"maxSockets":null,"maxFreeSockets":256,"scheduling":"lifo","maxTotalSockets":null,"totalSocketCount":1},"socketPath":"undefined","method":"POST","maxHeaderSize":"undefined","insecureHTTPParser":"undefined","joinDuplicateHeaders":"undefined","path":"/v1/chat/completions","_ended":true,"res":{"_events":{"close":"undefined","error":"[Function handleStreamError]","data":"[Function handleStreamData]","end":["[Function responseOnEnd]","[Function handleStreamEnd]"],"readable":"undefined","finish":"undefined","aborted":"[Function handlerStreamAborted]"},"_readableState":{"highWaterMark":65536,"buffer":[],"bufferIndex":0,"length":0,"pipes":[],"awaitDrainWriters":null},"_maxListeners":"undefined","socket":null,"httpVersionMajor":1,"httpVersionMinor":1,"httpVersion":"1.1","complete":true,"rawHeaders":["X-Powered-By","Express","Access-Control-Allow-Origin","*","X-Upstream-Active","0","X-Upstream-Queue","0","Content-Type","application/json; charset=utf-8","Content-Length","241","ETag","W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","Date","Mon, 03 Nov 2025 02:13:46 GMT","Connection","keep-alive","Keep-Alive","timeout=5"],"rawTrailers":[],"joinDuplicateHeaders":"undefined","aborted":false,"upgrade":false,"url":"","method":null,"statusCode":401,"statusMessage":"Unauthorized","client":"[Circular]","_consuming":false,"_dumped":false,"req":"[Circular]","_eventsCount":4,"responseUrl":"http://localhost:4000/v1/chat/completions","redirects":[]},"aborted":false,"timeoutCb":null,"upgradeOrConnect":false,"parser":null,"maxHeadersCount":null,"reusedSocket":true,"host":"localhost","protocol":"http:","_redirectable":{"_events":{"close":"undefined","error":"[Function handleRequestError]","prefinish":"undefined","finish":"undefined","drain":"undefined","response":"[Function handleResponse]","socket":["[Function handleRequestSocket]","[Function destroyOnTimeout]"],"timeout":"undefined","abort":"undefined"},"_writableState":{"highWaterMark":65536,"length":0,"corked":0,"onwrite":"[Function bound onwrite]","writelen":0,"bufferedIndex":0,"pendingcb":0},"_maxListeners":"undefined","_options":{"maxRedirects":21,"maxBodyLength":null,"protocol":"http:","path":"/v1/chat/completions","method":"POST","headers":{"Accept":"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":"axios/1.12.2","Content-Length":"516","Accept-Encoding":"gzip, compress, deflate, br"},"agents":{"http":"undefined","https":"undefined"},"auth":"undefined","family":"undefined","beforeRedirect":"[Function dispatchBeforeRedirect]","beforeRedirects":{"proxy":"[Function beforeRedirect]"},"hostname":"localhost","port":"4000","agent":"undefined","nativeProtocols":{"http:":{"_connectionListener":"[Function connectionListener]","METHODS":"[Array depth limit exceeded]","STATUS_CODES":"[Object depth limit exceeded]","Agent":"[Function Agent]","ClientRequest":"[Function ClientRequest]","IncomingMessage":"[Function IncomingMessage]","OutgoingMessage":"[Function OutgoingMessage]","Server":"[Function Server]","ServerResponse":"[Function ServerResponse]","createServer":"[Function createServer]","validateHeaderName":"[Function validateHeaderName]","validateHeaderValue":"[Function validateHeaderValue]","get":"[Function get]","request":"[Function request]","setMaxIdleHTTPParsers":"[Function setMaxIdleHTTPParsers]","maxHeaderSize":16384,"globalAgent":"[Circular]","WebSocket":"[Function WebSocket]","CloseEvent":"[Function CloseEvent]","MessageEvent":"[Function MessageEvent]"},"https:":{"Agent":"[Function Agent]","globalAgent":"[Object depth limit exceeded]","Server":"[Function Server]","createServer":"[Function createServer]","get":"[Function get]","request":"[Function request]"}},"pathname":"/v1/chat/completions"},"_ended":true,"_ending":true,"_redirectCount":0,"_redirects":[],"_requestBodyLength":516,"_requestBodyBuffers":[],"_eventsCount":3,"_onNativeResponse":"[Function anonymous]","_currentRequest":"[Circular]","_currentUrl":"http://localhost:4000/v1/chat/completions","_timeout":null}},"response":{"status":401,"statusText":"Unauthorized","headers":{"x-powered-by":"Express","access-control-allow-origin":"*","x-upstream-active":"0","x-upstream-queue":"0","content-type":"application/json; charset=utf-8","content-length":"241","etag":"W/\"f1-P02pHtVO2B8vcLF9NUHXgqSiVU0\"","date":"Mon, 03 Nov 2025 02:13:46 GMT","connection":"keep-alive","keep-alive":"timeout=5"},"config":"[Circular]","request":"[Circular]","data":{"error":{"message":"401 Incorrect API key provided: gho_MoKC****************************hW4H. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}}},"status":401}}
2025-11-03 04:17:34 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 04:20:16 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:23:27 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:25:06 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:27:35 [ERROR] [CASCADE] ❌ Windsurf Cascade API error: {"metadata":{}}
2025-11-03 04:27:35 [ERROR] [CASCADE-DEBUG] 🔴 Error details: Error: getaddrinfo ENOTFOUND api.windsurf.ai
    at AxiosError.from (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/AxiosError.js:96:14)
    at RedirectableRequest.handleRequestError (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:638:25)
    at RedirectableRequest.emit (node:events:531:35)
    at eventHandlers.<computed> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:49:24)
    at ClientRequest.emit (node:events:519:28)
    at emitErrorEvent (node:_http_client:105:11)
    at TLSSocket.socketErrorListener (node:_http_client:518:5)
    at TLSSocket.emit (node:events:519:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Object.analyze (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/cascade-controller.js:141:38)
    at async CascadeController.analyzeCodeWithCodestral (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/cascade-controller.js:378:24)
    at async MultiModelOrchestrator._callViaCascadeInternal (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/multi-model-orchestrator.js:347:24)
    at async MultiModelOrchestrator._callWindsurfCascadeAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/multi-model-orchestrator.js:315:32)
    at async MultiModelOrchestrator._callLLMAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/multi-model-orchestrator.js:268:20)
    at async MultiModelOrchestrator.executeTask (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/multi-model-orchestrator.js:84:28)
    at async SelfImprovementEngine._applyBugFix (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/self-improvement-engine.js:353:35)
    at async SelfImprovementEngine.applyImprovement (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/self-improvement-engine.js:169:28) {"metadata":{}}
2025-11-03 04:27:35 [ERROR] [CASCADE-DEBUG] 🔴 Error code: ENOTFOUND {"metadata":{}}
2025-11-03 04:27:35 [ERROR] [CASCADE-DEBUG] 🔴 Response status: undefined {"metadata":{}}
2025-11-03 04:27:35 [ERROR] [CASCADE-DEBUG] 🔴 Response data: undefined {"metadata":{}}
2025-11-03 04:27:40 [ERROR] [CASCADE] ❌ Windsurf Cascade API error: {"metadata":{}}
2025-11-03 04:27:40 [ERROR] [CASCADE-DEBUG] 🔴 Error details: Error: getaddrinfo ENOTFOUND api.windsurf.ai
    at AxiosError.from (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/AxiosError.js:96:14)
    at RedirectableRequest.handleRequestError (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:638:25)
    at RedirectableRequest.emit (node:events:531:35)
    at eventHandlers.<computed> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:49:24)
    at ClientRequest.emit (node:events:519:28)
    at emitErrorEvent (node:_http_client:105:11)
    at TLSSocket.socketErrorListener (node:_http_client:518:5)
    at TLSSocket.emit (node:events:519:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async Object.analyze (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/cascade-controller.js:141:38)
    at async CascadeController.analyzeCodeWithCodestral (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/cascade-controller.js:378:24)
    at async MultiModelOrchestrator._callViaCascadeInternal (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/multi-model-orchestrator.js:347:24)
    at async MultiModelOrchestrator._callWindsurfCascadeAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/multi-model-orchestrator.js:315:32)
    at async MultiModelOrchestrator._callLLMAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/multi-model-orchestrator.js:268:20)
    at async MultiModelOrchestrator.executeTask (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/multi-model-orchestrator.js:84:28)
    at async SelfImprovementEngine._applyBugFix (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/self-improvement-engine.js:353:35)
    at async SelfImprovementEngine.applyImprovement (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/eternity/self-improvement-engine.js:169:28) {"metadata":{}}
2025-11-03 04:27:40 [ERROR] [CASCADE-DEBUG] 🔴 Error code: ENOTFOUND {"metadata":{}}
2025-11-03 04:27:40 [ERROR] [CASCADE-DEBUG] 🔴 Response status: undefined {"metadata":{}}
2025-11-03 04:27:40 [ERROR] [CASCADE-DEBUG] 🔴 Response data: undefined {"metadata":{}}
2025-11-03 04:30:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 04:35:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 04:39:45 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:44:44 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 04:47:20 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:47:44 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:50:14 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:52:01 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:52:47 [ERROR] mcp-server {"metadata":{}}
2025-11-03 04:57:38 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 04:57:38 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 04:57:47 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 04:57:48 [ERROR] [MCP-TODO] LLM API request failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"category":"mcp-todo","component":"mcp-todo","code":"undefined","stack":"Error: Item 1.1 has forward/circular dependency 1.9\n    at MCPTodoManager._validateTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2398:17)\n    at MCPTodoManager.createTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:481:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AtlasTodoPlanningProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workf"}}
2025-11-03 04:57:48 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 04:57:48 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 04:57:48 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 04:57:48 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","sessionId":"session_1762138392357_clb63vs2d","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 04:58:13 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 04:58:13 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 04:58:23 [ERROR] [MCP-TODO] LLM API request failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"category":"mcp-todo","component":"mcp-todo","code":"undefined","stack":"Error: Item 1.1 has forward/circular dependency 1.9\n    at MCPTodoManager._validateTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2398:17)\n    at MCPTodoManager.createTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:481:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AtlasTodoPlanningProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workf"}}
2025-11-03 04:58:23 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 04:58:23 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 04:58:23 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 04:58:23 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","sessionId":"session_1762138392357_clb63vs2d","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 05:01:58 [ERROR] mcp-server {"metadata":{}}
2025-11-03 05:03:26 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 05:03:26 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 05:03:33 [ERROR] [MCP-TODO] LLM API request failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"category":"mcp-todo","component":"mcp-todo","code":"undefined","stack":"Error: Item 1.1 has forward/circular dependency 1.9\n    at MCPTodoManager._validateTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2398:17)\n    at MCPTodoManager.createTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:481:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AtlasTodoPlanningProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workf"}}
2025-11-03 05:03:33 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 05:03:33 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 05:03:33 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 05:03:33 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","sessionId":"session_1762138955061_1jwzpwhf6","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 05:04:34 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 05:04:34 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 05:05:38 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 9999 (line 1 column 10000). Sanitized error: Expected ',' or ']' after array element in JSON at position 9999 (line 1 column 10000) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\":[{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\" to activate\\n\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"delay 0.5\\n\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Safari\\\"\\n        set frontmost to true\\n    end tell\\nend tell\\n\"}},{\"server\":\"applescript\",\"tool\":\"applescript__exec","originalError":"Expected ',' or ']' after array element in JSON at position 9999 (line 1 column 10000)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 9999 (line 1 column 10000)"}}
2025-11-03 05:05:38 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\n"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"delay 0.5\n"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Safari\"\n        set frontmost to true\n    end tell\nend tell\n"}},{"server":"applescript","tool":"applescript__exec... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 9999 (line 1 column 10000)"}}
2025-11-03 05:05:38 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 9999 (line 1 column 10000) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 9999 (line 1 column 10000)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers..."}}
2025-11-03 05:06:58 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:07:14 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083). Sanitized error: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\":[{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\" to activate\\ndelay 0.5\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Safari\\\"\\n        set frontmost to true\\n    end tell\\nend tell\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\"\\n    activate\\nend tell\"}},{\"","originalError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)"}}
2025-11-03 05:07:14 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Safari\"\n        set frontmost to true\n    end tell\nend tell"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\"\n    activate\nend tell"}},{"... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)"}}
2025-11-03 05:07:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timer..."}}
2025-11-03 05:07:48 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083). Sanitized error: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\":[{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\" to activate\\ndelay 0.5\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Safari\\\"\\n        set frontmost to true\\n    end tell\\nend tell\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\"\\n    activate\\nend tell\"}},{\"","originalError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)"}}
2025-11-03 05:07:48 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Safari\"\n        set frontmost to true\n    end tell\nend tell"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\"\n    activate\nend tell"}},{"... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)"}}
2025-11-03 05:07:48 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timer..."}}
2025-11-03 05:07:48 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 05:07:48 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1476:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 05:08:18 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083). Sanitized error: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\":[{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\" to activate\\ndelay 0.5\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Safari\\\"\\n        set frontmost to true\\n    end tell\\nend tell\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\"\\n    activate\\nend tell\"}},{\"","originalError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)"}}
2025-11-03 05:08:18 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Safari\"\n        set frontmost to true\n    end tell\nend tell"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\"\n    activate\nend tell"}},{"... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)"}}
2025-11-03 05:08:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10082 (line 1 column 10083)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-tod..."}}
2025-11-03 05:09:23 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 10254 (line 1 column 10255). Sanitized error: Expected ',' or ']' after array element in JSON at position 10254 (line 1 column 10255) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\":[{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\" to activate\\ndelay 0.5\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Safari\\\"\\n        set frontmost to true\\n    end tell\\nend tell\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Sa","originalError":"Expected ',' or ']' after array element in JSON at position 10254 (line 1 column 10255)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 10254 (line 1 column 10255)"}}
2025-11-03 05:09:23 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Safari\"\n        set frontmost to true\n    end tell\nend tell"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Sa... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 10254 (line 1 column 10255)"}}
2025-11-03 05:09:23 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10254 (line 1 column 10255) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10254 (line 1 column 10255)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2532:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timer..."}}
2025-11-03 05:10:06 [ERROR] mcp-server {"metadata":{}}
2025-11-03 05:15:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:15:48 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 05:15:48 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 05:15:54 [ERROR] [MCP-TODO] LLM API request failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"category":"mcp-todo","component":"mcp-todo","code":"undefined","stack":"Error: Item 1.1 has forward/circular dependency 1.9\n    at MCPTodoManager._validateTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2398:17)\n    at MCPTodoManager.createTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:481:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AtlasTodoPlanningProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workf"}}
2025-11-03 05:15:54 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 05:15:54 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 05:15:54 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 05:15:54 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","sessionId":"session_1762139449918_706dape36","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 05:20:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:25:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:30:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:35:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:40:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:45:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:50:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 05:55:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:00:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:05:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:10:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:15:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:20:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:25:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:30:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:35:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:40:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:45:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:50:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 06:55:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:00:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:05:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:10:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:15:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:20:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:25:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:30:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:35:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:40:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:45:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:50:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 07:55:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 08:00:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 08:05:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 08:10:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 08:15:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 08:20:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 08:25:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 08:41:00 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 08:58:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 09:16:29 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 09:25:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 09:43:11 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 10:00:14 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 10:18:20 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 10:26:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 10:42:42 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 11:00:33 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 11:18:20 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 11:27:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 11:47:25 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 12:06:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 12:24:12 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 12:29:12 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 12:44:59 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 12:53:16 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 13:10:25 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 13:27:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 13:46:08 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 13:51:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 13:56:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 14:01:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 14:06:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 14:07:27 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:10:30 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 14:10:30 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 14:10:37 [ERROR] [MCP-TODO] LLM API request failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"category":"mcp-todo","component":"mcp-todo","code":"undefined","stack":"Error: Item 1.1 has forward/circular dependency 1.9\n    at MCPTodoManager._validateTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2398:17)\n    at MCPTodoManager.createTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:481:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AtlasTodoPlanningProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workf"}}
2025-11-03 14:10:37 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 14:10:37 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 14:10:37 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 14:10:37 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","sessionId":"session_1762171701644_uf4gkp9iu","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 14:12:27 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 14:14:00 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 14:14:00 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 14:14:07 [ERROR] [MCP-TODO] LLM API request failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"category":"mcp-todo","component":"mcp-todo","code":"undefined","stack":"Error: Item 1.1 has forward/circular dependency 1.9\n    at MCPTodoManager._validateTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2398:17)\n    at MCPTodoManager.createTodo (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:481:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async AtlasTodoPlanningProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workf"}}
2025-11-03 14:14:07 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 14:14:07 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-03 14:14:07 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 14:14:07 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9","sessionId":"session_1762172038390_rvfxdm","stack":"Error: TODO planning failed: TODO creation failed: Item 1.1 has forward/circular dependency 1.9\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1154:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-03 14:16:44 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:17:55 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:22:55 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 14:26:04 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:31:04 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 14:34:44 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:35:01 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-03 14:35:01 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 14:35:01 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-03 14:35:01 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-03 14:37:18 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:38:38 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:43:01 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:45:45 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:50:30 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:53:23 [ERROR] mcp-server {"metadata":{}}
2025-11-03 14:58:23 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 14:58:54 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:02:14 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:02:14 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:02:25 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"reasoning":"відкриваю браузер Safari","tts_phrase":"відкриваю браузер Safari","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 15:02:25 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProce..."}}
2025-11-03 15:03:02 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"reasoning":"відкриваю браузер Safari","tts_phrase":"відкриваю браузер Safari","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 15:03:02 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-03 15:03:08 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"reasoning":"відкриваю браузер Safari","tts_phrase":"відкриваю браузер Safari","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 15:03:08 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-03 15:03:08 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 15:03:08 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1488:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 15:03:13 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"reasoning":"відкриваю браузер Safari","tts_phrase":"відкриваю браузер Safari","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 15:03:13 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-03 15:03:41 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:04:39 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:04:39 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:05:56 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"reasoning":"відкриваю браузер Safari","tts_phrase":"відкриваю браузер Safari","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 15:05:56 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProce..."}}
2025-11-03 15:07:32 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 10175 (line 1 column 10176). Sanitized error: Expected ',' or ']' after array element in JSON at position 10175 (line 1 column 10176) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\":[{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\" to activate\\ndelay 0.5\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Safari\\\"\\n        -- Wait for Safari to open\\n    end tell\\nend tell\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Safari\\\"\\n    activate\\nend tell\"","originalError":"Expected ',' or ']' after array element in JSON at position 10175 (line 1 column 10176)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 10175 (line 1 column 10176)"}}
2025-11-03 15:07:32 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Safari\"\n        -- Wait for Safari to open\n    end tell\nend tell"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\"\n    activate\nend tell"... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 10175 (line 1 column 10176)"}}
2025-11-03 15:07:32 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10175 (line 1 column 10176) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10175 (line 1 column 10176)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timer..."}}
2025-11-03 15:07:38 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5"}},{"reasoning":"відкриваю браузер Safari","tts_phrase":"відкриваю браузер Safari","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 15:07:38 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-03 15:07:38 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 15:07:38 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1488:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 15:08:19 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:08:50 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:09:26 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:14:26 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 15:16:28 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:17:21 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:17:21 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:17:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:17:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:17:43 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:17:43 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:17:49 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762175868755.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:17:49 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:18:09 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:18:09 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:18:12 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:18:12 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:18:17 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:18:17 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:18:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:18:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:18:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:18:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:18:56 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:18:56 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:19:02 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:19:02 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:19:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:19:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:19:23 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:19:23 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:19:30 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:19:30 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:19:47 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:19:47 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:19:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:20:01 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:20:01 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:20:08 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 15:20:08 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:20:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:20:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:20:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:20:51 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:21:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:21:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:21:28 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 15:21:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:21:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:21:46 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:22:18 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-03 15:22:18 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 15:22:18 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-03 15:22:18 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-03 15:22:59 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-03 15:22:59 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 15:22:59 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-03 15:22:59 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-03 15:25:04 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:25:21 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-03 15:25:21 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 15:25:21 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-03 15:25:21 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-03 15:26:08 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-03 15:26:08 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 15:26:08 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-03 15:26:08 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-03 15:30:04 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 15:32:03 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:32:40 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:32:40 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:32:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:32:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:32:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:33:00 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762176780402.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:33:00 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:33:08 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762176787540.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:33:08 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:33:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:33:38 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:33:38 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:33:38 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:33:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:33:41 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:33:41 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:33:49 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:33:49 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:34:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:34:06 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:34:06 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:34:06 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:34:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:48 [ERROR] llm-client {"metadata":{}}
2025-11-03 15:35:48 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:35:48 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:35:55 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:35:55 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:36:03 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:36:03 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:36:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:36:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:36:23 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:36:23 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:36:32 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:36:32 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:36:50 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 15:36:50 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 15:36:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:36:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:36:55 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 1109 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Спроба відкрити калькулятор через системний інтерфейс не вдалася, оскільки система відкрила кодовий редактор замість калькулятора. Це може бути пов'язано з тим, що системний інтерфейс не вдалося виконати через помилку в параметрах інструменту. Для вирішення цієї проблеми, ми повинні перевірити, чи встановлений калькулятор на системі, і якщо так, спробувати відкрити його через інший інструмент.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n  "}}
2025-11-03 15:37:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 15:37:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:37:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:37:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:37:09 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:37:09 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:37:18 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:37:18 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:37:34 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 15:37:34 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 15:37:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:37:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:37:39 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:37:39 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:37:48 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:37:48 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:38:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:38:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:38:15 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:38:20 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:38:20 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:38:28 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:38:28 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:38:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:38:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:38:53 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:38:53 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:39:01 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:39:01 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:39:20 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 15:39:20 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 15:39:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:39:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:39:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:39:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:39:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:39:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:39:41 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:39:41 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:39:48 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:39:48 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:40:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:40:06 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:40:06 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:40:06 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:40:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:40:08 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:40:08 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:40:19 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:40:19 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:40:33 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:40:33 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:40:33 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:40:33 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:40:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:41:21 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:41:21 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:41:21 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:41:26 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:41:26 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:41:34 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:41:34 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:41:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:41:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:41:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:41:59 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1.1.1.1.1.1_verify_attempt2_active_window_1762177319016.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:41:59 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1.1.1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:42:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 15:42:16 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:42:16 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:42:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:42:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:42:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:42:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:42:43 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:44:30 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:44:30 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:45:45 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:46:48 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:46:48 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:47:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:47:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:47:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:47:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:47:40 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762177660104.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:47:40 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:47:48 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:47:48 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:48:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:48:05 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:48:05 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:48:05 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:48:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:48:08 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:48:08 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:48:31 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762177710564.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:48:31 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:48:48 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:48:48 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:48:48 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:48:48 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:48:48 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:48:58 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:48:58 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:49:04 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1.1_verify_attempt1_active_window_1762177744230.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:49:04 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:49:13 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1.1_verify_attempt2_active_window_1762177752664.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:49:13 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:49:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:49:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:49:33 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:49:33 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:49:41 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:49:41 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:49:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:49:55 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:49:55 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:49:55 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:49:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:50:34 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:51:05 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:51:05 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 15:51:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:51:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:51:18 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:51:24 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762177884156.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:51:24 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:51:32 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:51:32 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:51:47 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:51:47 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:51:47 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:51:47 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:51:47 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:51:51 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:51:51 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:51:58 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:51:58 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:52:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:52:19 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:52:19 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:52:19 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:52:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:52:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:52:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:52:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:52:35 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:52:35 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:52:42 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:52:42 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:52:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:52:57 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:52:57 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:52:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:52:58 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:53:00 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:53:00 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 15:53:09 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 15:53:09 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 15:53:24 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 15:53:24 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:53:24 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 15:53:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:53:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:53:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:53:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:53:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 15:53:47 [ERROR] mcp-server {"metadata":{}}
2025-11-03 15:58:47 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 16:01:46 [ERROR] mcp-server {"metadata":{}}
2025-11-03 16:06:46 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 16:11:46 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 16:16:39 [ERROR] mcp-server {"metadata":{}}
2025-11-03 16:21:39 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 16:26:26 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:15:14 [ERROR] [LLM Client] Failed to verify endpoint after 3 attempts {"metadata":{"category":"llm-client","component":"llm-client"}}
2025-11-03 18:15:15 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:19:14 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:19:39 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:21:02 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 18:21:02 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 18:21:48 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:21:48 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:21:48 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:21:54 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 18:21:54 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 18:23:20 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 18:23:20 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 18:23:20 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 18:23:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:23:21 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:23:24 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762187004460.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 18:23:24 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 18:23:34 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 18:23:34 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 18:23:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:23:50 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 18:23:50 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 18:23:50 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 18:23:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:14 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:24:14 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:24:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:22 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:24:22 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:24:25 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:25 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:27 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 673 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"strategy\": \"replan_and_continue\",\n  \"reasoning\": \"Помилка виконання інструменту свідчить про проблеми з параметрами інструменту. Необхідно перевірити наявність всіх необхідних даних та файлів перед використанням інструментів.\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити наявність всіх необхідних даних та файлів перед використанням інструментів\",\n      \"success_criteria\": \"Всі необхідні дані та файли існують та доступні для використання\",\n      \"fallback_"}}
2025-11-03 18:24:38 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 18:24:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:38 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 18:24:38 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 18:24:38 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 18:24:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:47 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:24:47 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:24:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:24:58 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:24:58 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:25:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:12 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:12 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:20 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:25:20 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:25:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:29 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:25:29 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:25:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:50 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:25:50 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:25:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:25:59 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:25:59 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:26:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:05 [ERROR] [STAGE-2.0-MCP] ❌ Fallback JSON parse also failed: Unterminated string in JSON at position 231 (line 4 column 9) {"metadata":{"category":"server-selection","component":"server-selection","rawResponse":"{\n  \"selected_servers\": [\"filesystem\", \"shell\"],\n  \"reasoning\": \"The task involves checking parameters of a tool for the presence of necessary data and files, which requires file system access and command-line execution.\",\n  \"conf"}}
2025-11-03 18:26:13 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:21 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:26:21 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:26:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:30 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:26:30 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:26:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:33 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:34 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 1000 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"strategy\": \"replan_and_continue\",\n  \"reasoning\": \"Перевірка параметрів інструменту для перевірки наявності необхідних даних та файлів не вдалася. Змінюю підхід: спочатку перевіряю наявність всіх необхідних даних та файлів перед їх використанням, а потім перевіряю параметри інструменту.\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити наявність всіх необхідних даних та файлів перед їх використанням\",\n      \"success_criteria\": \"Всі необхідні дані та файли існу"}}
2025-11-03 18:26:35 [ERROR] [STAGE-2.0-MCP] ❌ Fallback JSON parse also failed: Unterminated string in JSON at position 231 (line 4 column 9) {"metadata":{"category":"server-selection","component":"server-selection","rawResponse":"{\n  \"selected_servers\": [\"filesystem\", \"shell\"],\n  \"reasoning\": \"The task involves checking parameters of a tool for the presence of necessary data and files, which requires file system access and command-line execution.\",\n  \"conf"}}
2025-11-03 18:26:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:52 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:26:52 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:26:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:26:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:03 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:28:03 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:28:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:18 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:18 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:26 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:28:26 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:28:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:29 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:35 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:28:35 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:28:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:39 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 1055 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"reasoning\": \"Перевірка наявності необхідних даних та файлів не вдалася через помилку виконання інструменту. Необхідно перевірити параметри інструменту та переконатися, що всі необхідні дані та файли існують перед їх використанням.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити параметри інструменту для перевірки наявності необхідних даних та файлів\",\n      \"success_criteria\": \"Параметри інструменту перевірені та оновлен"}}
2025-11-03 18:28:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:56 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:28:56 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:28:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:28:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:06 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:29:06 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:29:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:09 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 638 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"strategy\": \"replan_and_continue\",\n  \"reasoning\": \"Перевірка наявності необхідних даних та файлів не вдалася через помилку виконання інструменту. Змінюю підхід: перевірю наявність необхідних даних та файлів безпосередньо перед їх використанням.\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити наявність необхідних даних та файлів перед їх використанням\",\n      \"success_criteria\": \"Всі необхідні дані та файли існують\",\n      \"fallback_options\": [\"Використати ст"}}
2025-11-03 18:29:10 [ERROR] [STAGE-2.0-MCP] ❌ Fallback JSON parse also failed: Unterminated fractional number in JSON at position 216 (line 4 column 19) {"metadata":{"category":"server-selection","component":"server-selection","rawResponse":"{\n  \"selected_servers\": [\"filesystem\"],\n  \"reasoning\": \"The task requires checking the presence of all necessary data and files before their usage, which can be done using file system operations.\",\n  \"confidence\": 0."}}
2025-11-03 18:29:18 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:27 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:29:27 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:29:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:30 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:38 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 18:29:38 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:29:38 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:29:41 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:41 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:29:53 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:00 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:30:00 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:30:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:08 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:30:08 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:30:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:12 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 1086 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"reasoning\": \"Параметри інструменту для перевірки наявності необхідних даних та файлів не були перевірені. Це призвело до невдачі виконання дії. Для вирішення цієї проблеми необхідно перевірити параметри інструменту та переконатися, що всі необхідні дані та файли існують перед їх використанням.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити параметри інструменту для перевірки наявності необхідних даних та файлів\",\n      "}}
2025-11-03 18:30:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:29 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:30:29 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:30:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:40 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:30:40 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:30:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:30:44 [ERROR] [STAGE-2.0-MCP] ❌ Fallback JSON parse also failed: Unexpected token '}', ..."nfidence":}" is not valid JSON {"metadata":{"category":"server-selection","component":"server-selection","rawResponse":"{\n  \"selected_servers\": [\"filesystem\", \"shell\"],\n  \"reasoning\": \"The task involves checking parameters and verifying the presence of necessary data and files, which requires file system access and command-line operations.\",\n  \"confidence\":"}}
2025-11-03 18:30:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:10 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:31:10 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:31:13 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:13 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:24 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:31:24 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:31:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:28 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 1060 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"reasoning\": \"Параметри інструменту для перевірки наявності необхідних даних та файлів не були перевірені. Це призвело до невдачі виконання дії. Для продовження необхідно перевірити параметри інструменту та переконатися, що всі необхідні дані та файли існують перед їх використанням.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити параметри інструменту для перевірки наявності необхідних даних та файлів\",\n      \"success_cri"}}
2025-11-03 18:31:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:46 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:31:46 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:31:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:54 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:31:54 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:31:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:31:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:32:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:32:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:32:21 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:32:21 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:32:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:32:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:32:32 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:32:32 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:32:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:32:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:32:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:04 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:33:04 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:33:07 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:07 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:16 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:33:16 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 18:33:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:46 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:46 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:33:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:34:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:34:27 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:35:32 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 18:35:32 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 18:35:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:35:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:35:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:35:55 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762187754881.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 18:35:55 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 18:36:05 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762187764881.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 18:36:05 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 18:36:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:36:20 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 18:36:20 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 18:36:20 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 18:36:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:36:24 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 18:36:24 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 18:36:32 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-11-03 18:36:32 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 18:36:42 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:37:47 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-03 18:37:47 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 18:37:47 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-03 18:37:47 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-03 18:38:15 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:38:43 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-03 18:38:43 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 18:38:43 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-03 18:38:43 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-03 18:43:15 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 18:43:15 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 18:43:26 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:44:16 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-03 18:44:16 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 18:44:16 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-03 18:44:16 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-03 18:47:45 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:50:07 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:50:51 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:51:13 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 18:51:13 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 18:52:29 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:52:53 [ERROR] mcp-server {"metadata":{}}
2025-11-03 18:53:17 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 18:53:17 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 18:53:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:53:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:54:11 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:54:29 [ERROR] llm-client {"metadata":{}}
2025-11-03 18:54:29 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 18:54:29 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:54:29 [ERROR] llm-client {"metadata":{}}
2025-11-03 18:54:29 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 18:54:29 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:54:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:54:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:54:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:54:53 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:55:04 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 18:56:10 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 10150 (line 1 column 10151). Sanitized error: Expected ',' or ']' after array element in JSON at position 10150 (line 1 column 10151) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\":[{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Calculator\\\" to activate\\ndelay 0.5\\ntell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke \\\"6\\\"\\n        keystroke \\\"4\\\"\\n    end tell\\nend tell\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke return\\n    end tell\\nend tel","originalError":"Expected ',' or ']' after array element in JSON at position 10150 (line 1 column 10151)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 10150 (line 1 column 10151)"}}
2025-11-03 18:56:10 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Calculator\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"6\"\n        keystroke \"4\"\n    end tell\nend tell"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke return\n    end tell\nend tel... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 10150 (line 1 column 10151)"}}
2025-11-03 18:56:10 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2.1.1: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10150 (line 1 column 10151) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.2.1.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 10150 (line 1 column 10151)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timer..."}}
2025-11-03 18:57:25 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:57:25 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:57:26 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:57:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:57:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:57:49 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 18:57:53 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 18:57:53 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 18:58:02 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:00:15 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:00:15 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:00:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:00:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:00:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:40 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:01:40 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:01:40 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:01:40 [ERROR] llm-client {"metadata":{}}
2025-11-03 19:01:40 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:01:40 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:23 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:02:47 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 19:03:02 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 19:03:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 19:03:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:15 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:15 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:26 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:27 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:03:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:04:04 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 19:04:06 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 957 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"strategy\": \"replan_and_continue\",\n  \"reasoning\": \"Метод перевірки існування папки test-project через інший метод не вдався. Змінюю підхід: спочатку перевіряю існування робочого столу, потім перевіряю існування папки test-project через інший інструмент.\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити існування робочого столу\",\n      \"success_criteria\": \"Підтверджено існування робочого столу\",\n      \"fallback_options\": [\"Використати стандартний шлях до робочо"}}
2025-11-03 19:04:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:04:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:04:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:04:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:04:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:04:42 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:05:01 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:05:01 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:05:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:29 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:29 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:05:29 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:06:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:06:10 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:07:10 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:07:10 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1762189594920: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1762189594920","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:07:48 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:07:48 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1762189594920: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1762189594920","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:08:25 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:08:25 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.1_1762189594920: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.1_1762189594920","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:08:25 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 19:08:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3795:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:737:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:225:49)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1228:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1674:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 19:09:09 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:09:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:09:41 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 19:09:41 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 19:09:46 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:09:46 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:10:24 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:10:24 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:10:24 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 19:10:24 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1488:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 19:11:02 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:11:02 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:11:25 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:12:54 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:13:12 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:13:12 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:13:54 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:13:54 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:14:32 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:14:32 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:15:09 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:15:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:15:09 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 19:15:09 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1488:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 19:15:49 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:19:23 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:19:52 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:19:52 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:20:30 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:20:30 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:21:07 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:21:07 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:21:45 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:21:45 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:21:45 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 19:21:45 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 19:22:29 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:22:29 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:23:06 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 19:23:06 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 19:24:22 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:24:41 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:24:41 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:26:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:26:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:26:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:26:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:26:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:26:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:26:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:27:40 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:27:41 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:27:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:27:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:27:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:28:13 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:28:13 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:28:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:28:31 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:28:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:28:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:29:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:29:00 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:29:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:29:22 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 19:29:22 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 19:29:32 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:30:16 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:30:16 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:31:25 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 9961 (line 1 column 9962). Sanitized error: Expected ',' or ']' after array element in JSON at position 9961 (line 1 column 9962) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\"tool_calls\":[{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"Calculator\\\" to activate\\ndelay 0.5\"}},{\"server\":\"applescript\",\"tool\":\"applescript__execute\",\"parameters\":{\"code_snippet\":\"tell application \\\"System Events\\\"\\n    tell process \\\"Calculator\\\"\\n        keystroke \\\"3\\\"\\n        keystroke \\\"3\\\"\\n        keystroke \\\"3\\\"\\n        keystroke \\\"*\\\"\\n        keystroke \\\"2\\\"\\n        keystroke return\\n    end tell\\nend tell\"}},{\"server\":\"ap","originalError":"Expected ',' or ']' after array element in JSON at position 9961 (line 1 column 9962)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 9961 (line 1 column 9962)"}}
2025-11-03 19:31:25 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Calculator\" to activate\ndelay 0.5"}},{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"System Events\"\n    tell process \"Calculator\"\n        keystroke \"3\"\n        keystroke \"3\"\n        keystroke \"3\"\n        keystroke \"*\"\n        keystroke \"2\"\n        keystroke return\n    end tell\nend tell"}},{"server":"ap... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 9961 (line 1 column 9962)"}}
2025-11-03 19:31:25 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 9961 (line 1 column 9962) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 9961 (line 1 column 9962)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:..."}}
2025-11-03 19:31:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:31:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:31:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:31:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:31:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:31:43 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:31:50 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762191109886.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Додаток"}}
2025-11-03 19:31:50 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 19:31:59 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762191118515.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Додаток"}}
2025-11-03 19:31:59 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 19:32:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:32:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:32:31 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Додаток"}}
2025-11-03 19:32:31 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 19:32:38 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Додаток"}}
2025-11-03 19:32:38 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 19:33:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:33:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:33:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:33:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:33:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:33:21 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:33:30 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Додаток"}}
2025-11-03 19:33:30 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 19:33:37 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Додаток"}}
2025-11-03 19:33:37 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 19:34:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:34:02 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:34:02 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 19:34:02 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 19:34:02 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:34:17 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:39:16 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 19:39:16 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 19:44:16 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 19:44:16 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 19:49:16 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 19:49:16 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 19:54:16 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 19:54:16 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 19:54:29 [ERROR] mcp-server {"metadata":{}}
2025-11-03 19:55:36 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:55:36 [ERROR] context-enrichment {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:55:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 19:55:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:56:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:56:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:56:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:56:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:56:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:56:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:56:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:56:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:57:06 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 19:57:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:57:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:57:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:57:55 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:58:09 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:58:22 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 19:58:23 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 662 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"reasoning\": \"Спроба використати альтернативний метод введення числа 3 через клавіатурні комбінації не вдалася. Це може бути пов'язано з проблемами з виконанням інструментів. Змінимо підхід, використовуючи безпосереднє введення числа через клавіатуру.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Ввести число 3 через клавіатуру\",\n      \"success_criteria\": \"Число 3 відображається на екрані калькулятора\",\n      \"fallback_options\": ["}}
2025-11-03 19:58:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:58:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:58:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:58:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:58:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:58:38 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:58:53 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:59:06 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 19:59:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:59:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:59:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:59:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:59:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:59:29 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 19:59:29 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 19:59:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 19:59:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:07 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 585 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"strategy\": \"replan_and_continue\",\n  \"reasoning\": \"Помилка виконання AppleScript призвела до того, що число 3 не введено в калькулятор. Змінимо підхід, використовуючи клавіатурні комбінації для введення числа 3.\",\n  \"new_items\": [\n    {\n      \"action\": \"Ввести число 3 через клавіатурні комбінації\",\n      \"success_criteria\": \"Число 3 відображається на екрані калькулятора\",\n      \"fallback_options\": [\"Використати альтернативний метод введення через системний діалог"}}
2025-11-03 20:00:21 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:21 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:39 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:00:59 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:01:07 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 638 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"```json\n{\n  \"replanned\": true,\n  \"reasoning\": \"Введення числа 3 через AppleScript не вдалося через помилку виконання інструменту. Змінимо підхід, використовуючи клавіатурні комбінації для введення числа 3.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Ввести число 3 через клавіатурні комбінації\",\n      \"success_criteria\": \"Число 3 відображається на екрані калькулятора\",\n      \"fallback_options\": [\"Використати альтернативний метод введення через AppleScript з інши"}}
2025-11-03 20:01:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:01:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:01:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:01:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:01:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:01:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:01:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:02:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:02:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:02:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:02:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:02:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:02:37 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:02:48 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:05:04 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:06:15 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:06:15 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:06:15 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:06:15 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:06:22 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762193182186.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Додаток"}}
2025-11-03 20:06:22 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 20:06:29 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762193189258.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Додаток"}}
2025-11-03 20:06:29 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 20:07:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:07:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:08:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:08:22 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 20:08:22 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 20:08:22 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 20:08:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:09:13 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:09:13 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:09:13 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:09:14 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:09:14 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:09:14 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:09:14 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:10:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:10:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:10:03 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:10:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 20:10:33 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:10:33 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:11:38 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: timeout of 60000ms exceeded {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: timeout of 60000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:519:28)\n    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)\n    at Axios.request..."}}
2025-11-03 20:11:38 [ERROR] [MCP-TODO] No valid tools found in availableTools {"metadata":{"category":"mcp-todo","component":"mcp-todo","totalItems":100}}
2025-11-03 20:11:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:11:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:11:52 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:12:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:12:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:12:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:12:54 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:12:55 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 770 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Спроба відкрити додаток Calculator через Terminal призвела до відкриття сторінки входу для Windsurf. Це свідчить про те, що команда для відкриття Calculator була неправильною. Замість цього варто спробувати відкрити Calculator через Spotlight, оскільки це більш надійний спосіб відкриття додатків на macOS.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Відкрити додаток Calculator через Spotlight\",\n      \"success_criteria\": \"До"}}
2025-11-03 20:14:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:14:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:14:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:14:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:14:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:14:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:14:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:14:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:14:50 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:16:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:16:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:16:40 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:16:40 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 20:16:46 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:16:46 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 20:17:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:17:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:17:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:17:19 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:17:19 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 20:17:25 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:17:25 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 20:17:46 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:17:46 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:17:46 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:05 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:19 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:18:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:19:12 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:19:12 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:19:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:19:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:19:50 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:19:50 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 20:19:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:19:50 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:19:51 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:08 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:22 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:42 [ERROR] llm-client {"metadata":{}}
2025-11-03 20:20:42 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 20:20:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:42 [ERROR] llm-client {"metadata":{}}
2025-11-03 20:20:42 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 20:20:42 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:20:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:21:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:21:01 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:21:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:21:17 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:21:35 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:21:36 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:22:17 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:23:20 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762194200438.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:23:20 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 20:24:22 [ERROR] [PORT-4000] Timeout - port 4000 too slow {"metadata":{"category":"vision-analysis","note":"OpenRouter fallback disabled - vision parsing not working"}}
2025-11-03 20:24:22 [ERROR] [VISION] API call failed: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled. {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"Error: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled.\n    at VisionAnalysisService._callPort4000VisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:852:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async VisionAnalysisService._callVisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:701:1..."}}
2025-11-03 20:24:30 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:24:30 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 20:25:05 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Safari\"\n        keystroke \"f\" using {control down, command down}\n    end tell\nend tell"}},{"reasoning":"Expanding Safari to full screen","tts_phrase":"Expanding Safari to full screen","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 20:25:05 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.2,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-03 20:25:15 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Safari\"\n        keystroke \"f\" using {control down, command down}\n    end tell\nend tell"}},{"reasoning":"Expanding Safari to full screen","tts_phrase":"Expanding Safari to full screen","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 20:25:15 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.2,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-03 20:25:25 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Safari\"\n        keystroke \"f\" using {control down, command down}\n    end tell\nend tell"}},{"reasoning":"Expanding Safari to full screen","tts_phrase":"Expanding Safari to full screen","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 20:25:25 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.2,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-03 20:25:25 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 20:25:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 20:25:34 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Safari\"\n        keystroke \"f\" using {control down, command down}\n    end tell\nend tell"}},{"reasoning":"Expanding Safari to full screen","tts_phrase":"Expanding Safari to full screen","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 20:25:34 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.2,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file://..."}}
2025-11-03 20:25:44 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Safari\"\n        keystroke \"f\" using {control down, command down}\n    end tell\nend tell"}},{"reasoning":"Expanding Safari to full screen","tts_phrase":"Expanding Safari to full screen","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 20:25:44 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.2,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProce..."}}
2025-11-03 20:25:53 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {"tool_calls":[{"server":"applescript","tool":"applescript__execute","parameters":{"code_snippet":"tell application \"Safari\" to activate\ndelay 0.5\ntell application \"System Events\"\n    tell process \"Safari\"\n        keystroke \"f\" using {control down, command down}\n    end tell\nend tell"}},{"reasoning":"Expanding Safari to full screen","tts_phrase":"Expanding Safari to full screen","needs_split":false}]} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Tool call missing server or tool"}}
2025-11-03 20:25:53 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.2,"errorName":"Error","stack":"Error: Failed to parse tool plan: Tool call missing server or tool\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2539:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1395:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProce..."}}
2025-11-03 20:25:53 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 20:25:53 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Tool call missing server or tool
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 20:25:56 [ERROR] Item 2.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.1}}
2025-11-03 20:25:59 [ERROR] Item 2.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.2}}
2025-11-03 20:26:02 [ERROR] Item 2.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.3}}
2025-11-03 20:26:05 [ERROR] Item 2.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.4}}
2025-11-03 20:26:08 [ERROR] Item 2.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.5}}
2025-11-03 20:26:11 [ERROR] Item 2.6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.6}}
2025-11-03 20:26:14 [ERROR] Item 2.7 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.7}}
2025-11-03 20:26:18 [ERROR] Item 2.8 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.8}}
2025-11-03 20:26:21 [ERROR] Item 2.9 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.9}}
2025-11-03 20:26:24 [ERROR] Item 2.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.1}}
2025-11-03 20:26:27 [ERROR] Item 3.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.1}}
2025-11-03 20:26:30 [ERROR] Item 3.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.2}}
2025-11-03 20:26:33 [ERROR] Item 3.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.3}}
2025-11-03 20:26:36 [ERROR] Item 3.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.4}}
2025-11-03 20:27:17 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:27:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 20:32:17 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:32:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 20:35:08 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:36:21 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:37:41 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:37:41 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 20:37:47 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Chromium"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Chromium". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:37:47 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 20:39:34 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 20:40:24 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:40:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:40:24 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:40:38 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 20:41:21 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:41:21 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 20:42:57 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 20:44:24 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:46:09 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt1_active_window_1762195568838.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:46:09 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 20:46:15 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_active_window_1762195574963.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:46:15 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 20:47:49 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 20:47:49 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 20:47:49 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 20:49:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:49:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 20:49:34 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:49:34 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:49:34 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:49:49 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 20:54:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:54:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 20:54:59 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:54:59 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_2.8_verify_attempt1","mode":"active_window"}}
2025-11-03 20:55:06 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 20:55:06 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_2.8_verify_attempt2","mode":"active_window"}}
2025-11-03 20:59:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:59:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 20:59:44 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:59:44 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:59:44 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:59:45 [ERROR] mcp-server {"metadata":{}}
2025-11-03 20:59:45 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 20:59:45 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 20:59:50 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":null}}
2025-11-03 20:59:50 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_2.11_verify_attempt1","mode":"active_window"}}
2025-11-03 20:59:57 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Electron"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
140:148: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Electron". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":null}}
2025-11-03 20:59:57 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_2.11_verify_attempt2","mode":"active_window"}}
2025-11-03 21:02:58 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:02:58 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.3","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:03:36 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:03:36 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.3","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:04:14 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:04:14 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.3","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:04:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:04:14 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:04:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 21:04:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 21:04:58 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:04:58 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.3","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:05:35 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:05:35 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.3","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:06:13 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:06:13 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.3","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:06:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:06:13 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:07:01 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:07:01 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.4: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.4","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:07:38 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:07:38 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.4: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.4","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:08:17 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:08:17 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.4: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.4","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:08:17 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:08:17 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:09:00 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:09:00 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.4: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.4","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:09:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 21:09:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 21:09:37 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:09:37 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.4: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.4","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:10:21 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1312:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tet..."}}
2025-11-03 21:10:21 [ERROR] [MCP-TODO] Failed to plan tools for item 2.11.4: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.11.4","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1378:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:991:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/Gi..."}}
2025-11-03 21:10:21 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:10:21 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1012:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:10:30 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:11:42 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1441:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-03 21:11:42 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1507:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-03 21:12:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1441:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-03 21:12:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1507:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-03 21:12:58 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1441:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-03 21:12:58 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1507:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-03 21:12:58 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:12:58 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:13:42 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1441:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-03 21:13:42 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1507:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-03 21:14:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1441:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-03 21:14:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1507:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-03 21:14:57 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1441:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-03 21:14:57 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1507:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-03 21:14:57 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:14:57 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:15:00 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-03 21:15:03 [ERROR] Item 2.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.1}}
2025-11-03 21:15:06 [ERROR] Item 2.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.2}}
2025-11-03 21:15:09 [ERROR] Item 2.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.3}}
2025-11-03 21:15:12 [ERROR] Item 2.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.4}}
2025-11-03 21:15:15 [ERROR] Item 2.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.5}}
2025-11-03 21:15:18 [ERROR] Item 2.6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.6}}
2025-11-03 21:15:21 [ERROR] Item 2.7 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.7}}
2025-11-03 21:15:24 [ERROR] Item 2.8 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.8}}
2025-11-03 21:15:27 [ERROR] Item 2.9 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.9}}
2025-11-03 21:15:30 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 21:15:30 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 21:20:16 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:21:36 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:26:27 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:27:14 [ERROR] [LLM Client] Failed to verify endpoint after 3 attempts {"metadata":{"category":"llm-client","component":"llm-client"}}
2025-11-03 21:27:14 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:28:38 [ERROR] [STAGE-0-MCP] Mode selection failed: Error {"metadata":{}}
2025-11-03 21:28:38 [ERROR] [STAGE-0-MCP] Error stack: AggregateError: Error
    at AxiosError.from (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/AxiosError.js:96:14)
    at RedirectableRequest.handleRequestError (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:638:25)
    at RedirectableRequest.emit (node:events:531:35)
    at eventHandlers.<computed> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:49:24)
    at ClientRequest.emit (node:events:519:28)
    at emitErrorEvent (node:_http_client:105:11)
    at Socket.socketErrorListener (node:_http_client:518:5)
    at Socket.emit (node:events:519:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 21:28:38 [ERROR] [STAGE-0-MCP] Error name: AggregateError {"metadata":{}}
2025-11-03 21:28:38 [ERROR] [STAGE-0-MCP] No response received from API {"metadata":{}}
2025-11-03 21:28:38 [ERROR] executor {"metadata":{}}
2025-11-03 21:28:38 [ERROR] MCP workflow failed: Error {"metadata":{"sessionId":"default","error":"Error","stack":"AggregateError: Error\n    at AxiosError.from (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/AxiosError.js:96:14)\n    at RedirectableRequest.handleRequestError (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:638:25)\n    at RedirectableRequest.emit (node:events:531:35)\n    at eventHandlers.<computed> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequ..."}}
2025-11-03 21:28:38 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Error","sessionId":"session_1762198118163_36b9cwavd","stack":"AggregateError: Error\n    at AxiosError.from (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/AxiosError.js:96:14)\n    at RedirectableRequest.handleRequestError (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:638:25)\n    at RedirectableRequest.emit (node:events:531:35)\n    at eventHandlers.<computed> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequ..."}}
2025-11-03 21:28:58 [ERROR] [LLM Client] Failed to verify endpoint after 3 attempts {"metadata":{"category":"llm-client","component":"llm-client"}}
2025-11-03 21:28:58 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:29:13 [ERROR] [STAGE-0-MCP] Mode selection failed: Error {"metadata":{}}
2025-11-03 21:29:13 [ERROR] [STAGE-0-MCP] Error stack: AggregateError: Error
    at AxiosError.from (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/AxiosError.js:96:14)
    at RedirectableRequest.handleRequestError (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:638:25)
    at RedirectableRequest.emit (node:events:531:35)
    at eventHandlers.<computed> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:49:24)
    at ClientRequest.emit (node:events:519:28)
    at emitErrorEvent (node:_http_client:105:11)
    at Socket.socketErrorListener (node:_http_client:518:5)
    at Socket.emit (node:events:519:28)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-03 21:29:13 [ERROR] [STAGE-0-MCP] Error name: AggregateError {"metadata":{}}
2025-11-03 21:29:13 [ERROR] [STAGE-0-MCP] No response received from API {"metadata":{}}
2025-11-03 21:29:13 [ERROR] executor {"metadata":{}}
2025-11-03 21:29:13 [ERROR] MCP workflow failed: Error {"metadata":{"sessionId":"default","error":"Error","stack":"AggregateError: Error\n    at AxiosError.from (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/AxiosError.js:96:14)\n    at RedirectableRequest.handleRequestError (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:638:25)\n    at RedirectableRequest.emit (node:events:531:35)\n    at eventHandlers.<computed> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequ..."}}
2025-11-03 21:29:13 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Error","sessionId":"session_1762198153497_5v0lhjvkl","stack":"AggregateError: Error\n    at AxiosError.from (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/AxiosError.js:96:14)\n    at RedirectableRequest.handleRequestError (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:638:25)\n    at RedirectableRequest.emit (node:events:531:35)\n    at eventHandlers.<computed> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequ..."}}
2025-11-03 21:34:02 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:34:48 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:36:22 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/work..."}}
2025-11-03 21:36:22 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrat..."}}
2025-11-03 21:36:24 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:36:24 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:36:26 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:36:26 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:36:26 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:36:26 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:36:27 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:36:27 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:36:29 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:36:29 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:36:31 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:36:31 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:36:31 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:36:31 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1502:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:36:34 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-03 21:36:37 [ERROR] Item 1.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.3}}
2025-11-03 21:36:40 [ERROR] Item 1.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.4}}
2025-11-03 21:36:43 [ERROR] Item 1.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.5}}
2025-11-03 21:36:46 [ERROR] Item 1.6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.6}}
2025-11-03 21:36:49 [ERROR] Item 2.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.1}}
2025-11-03 21:36:52 [ERROR] Item 2.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.2}}
2025-11-03 21:36:55 [ERROR] Item 2.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.3}}
2025-11-03 21:36:58 [ERROR] Item 2.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.4}}
2025-11-03 21:37:01 [ERROR] Item 2.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.5}}
2025-11-03 21:37:04 [ERROR] Item 2.6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.6}}
2025-11-03 21:37:07 [ERROR] Item 3.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.1}}
2025-11-03 21:37:10 [ERROR] Item 3.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.2}}
2025-11-03 21:37:13 [ERROR] Item 3.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.3}}
2025-11-03 21:37:16 [ERROR] Item 3.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.4}}
2025-11-03 21:37:19 [ERROR] Item 3.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.5}}
2025-11-03 21:38:53 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:43:10 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:45:18 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/work..."}}
2025-11-03 21:45:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrat..."}}
2025-11-03 21:45:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:22 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:22 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:22 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:22 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:23 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWorkflow (f..."}}
2025-11-03 21:45:23 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWork..."}}
2025-11-03 21:45:25 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:25 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:27 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:27 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:27 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:27 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:30 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-03 21:45:33 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:33 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:35 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:35 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:37 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWorkflow (f..."}}
2025-11-03 21:45:37 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWork..."}}
2025-11-03 21:45:37 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:37 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:38 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWorkflow (f..."}}
2025-11-03 21:45:38 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWork..."}}
2025-11-03 21:45:40 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:42 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:42 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:42 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:42 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:45 [ERROR] Item 1.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.4}}
2025-11-03 21:45:48 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWorkflow (f..."}}
2025-11-03 21:45:48 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWork..."}}
2025-11-03 21:45:50 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:50 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:52 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:52 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:52 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:52 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:53 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:53 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:55 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:55 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:57 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:45:57 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:45:57 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:45:57 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:00 [ERROR] Item 1.6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.6}}
2025-11-03 21:46:03 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:03 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:05 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:05 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:07 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:07 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:07 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:07 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:08 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:08 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:10 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWorkflow (f..."}}
2025-11-03 21:46:10 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWork..."}}
2025-11-03 21:46:12 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:12 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.1,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:12 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:12 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:15 [ERROR] Item 2.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2.2}}
2025-11-03 21:46:18 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:18 [ERROR] [MCP-TODO] Failed to plan tools for item 2.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:20 [ERROR] [MCP-TODO] Failed to plan tools for item 2.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:22 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:22 [ERROR] [MCP-TODO] Failed to plan tools for item 2.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:22 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:22 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:23 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:23 [ERROR] [MCP-TODO] Failed to plan tools for item 2.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:25 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:25 [ERROR] [MCP-TODO] Failed to plan tools for item 2.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:27 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:27 [ERROR] [MCP-TODO] Failed to plan tools for item 2.3: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":2.3,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:27 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:27 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:30 [ERROR] Item 3.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3.1}}
2025-11-03 21:46:33 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:33 [ERROR] [MCP-TODO] Failed to plan tools for item 3.2: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":3.2,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:35 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:35 [ERROR] [MCP-TODO] Failed to plan tools for item 3.2: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":3.2,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:37 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:37 [ERROR] [MCP-TODO] Failed to plan tools for item 3.2: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":3.2,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:37 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:37 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:38 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:38 [ERROR] [MCP-TODO] Failed to plan tools for item 3.2: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":3.2,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:40 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWorkflow (f..."}}
2025-11-03 21:46:40 [ERROR] [MCP-TODO] Failed to plan tools for item 3.2: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":3.2,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWork..."}}
2025-11-03 21:46:42 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"ReferenceError","code":"undefined","stack":"ReferenceError: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1407:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Docum..."}}
2025-11-03 21:46:42 [ERROR] [MCP-TODO] Failed to plan tools for item 3.2: LLM API error: toolSchema is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":3.2,"errorName":"Error","stack":"Error: LLM API error: toolSchema is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1535:17)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1120:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/de..."}}
2025-11-03 21:46:42 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:46:42 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: LLM API error: toolSchema is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:48:10 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 21:48:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 21:49:19 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:50:18 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:51:37 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set frontmost to true\n        keystroke \\\"f\\\" using {command down, control down}\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкриваю Safari на весь екран\",\n  \"tts_phrase\": \"відкриваю Safari на весь екран\",\n  \"needs_split\"","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:51:37 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set frontmost to true
        keystroke \"f\" using {command down, control down}
    end tell
end tell"
      }
    }
  ],
  "reasoning": "Відкриваю Safari на весь екран",
  "tts_phrase": "відкриваю Safari на весь екран",
  "needs_split"... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:51:37 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:51:46 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set value of attribute \\\"AXFullScreen\\\" of window 1 to true\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"THOUGHT: This item asks to open Safari browser. ANALYSIS: The AppleScript command to open Safari is 'tell application \\","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:51:46 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set value of attribute \"AXFullScreen\" of window 1 to true
    end tell
end tell"
      }
    }
  ],
  "reasoning": "THOUGHT: This item asks to open Safari browser. ANALYSIS: The AppleScript command to open Safari is 'tell application \... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:51:46 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:51:55 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set frontmost to true\n        keystroke \\\"f\\\" using {command down, control down}\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкриваю Safari на весь екран\",\n  \"tts_phrase\": \"відкриваю Safari на весь екран\",\n  \"needs_split\"","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:51:55 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set frontmost to true
        keystroke \"f\" using {command down, control down}
    end tell
end tell"
      }
    }
  ],
  "reasoning": "Відкриваю Safari на весь екран",
  "tts_phrase": "відкриваю Safari на весь екран",
  "needs_split"... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:51:55 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:51:55 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:51:55 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:52:03 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set frontmost to true\n        keystroke \\\"f\\\" using {command down, control down}\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкриваю Safari та перевожу на повноекранний режим\",\n  \"tts_phrase\": \"відкриваю Safari та перевож","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:52:03 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set frontmost to true
        keystroke \"f\" using {command down, control down}
    end tell
end tell"
      }
    }
  ],
  "reasoning": "Відкриваю Safari та перевожу на повноекранний режим",
  "tts_phrase": "відкриваю Safari та перевож... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:52:03 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:52:12 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set frontmost to true\n        keystroke \\\"f\\\" using {command down, control down}\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкриваю Safari та перевожу на повноекранний режим\",\n  \"tts_phrase\": \"відкриваю Safari та перевож","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:52:12 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set frontmost to true
        keystroke \"f\" using {command down, control down}
    end tell
end tell"
      }
    }
  ],
  "reasoning": "Відкриваю Safari та перевожу на повноекранний режим",
  "tts_phrase": "відкриваю Safari та перевож... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:52:12 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:52:21 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set frontmost to true\n        keystroke \\\"f\\\" using {command down, control down}\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкриваю Safari та перевожу на повноекранний режим\",\n  \"tts_phrase\": \"відкриваю Safari та перевож","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:52:21 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set frontmost to true
        keystroke \"f\" using {command down, control down}
    end tell
end tell"
      }
    }
  ],
  "reasoning": "Відкриваю Safari та перевожу на повноекранний режим",
  "tts_phrase": "відкриваю Safari та перевож... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:52:21 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:52:21 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:52:21 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:52:24 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-03 21:53:32 [ERROR] mcp-server {"metadata":{}}
2025-11-03 21:53:32 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 21:53:32 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 21:53:46 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 21:54:02 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern fantasy movies\\\" & tab\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"THOUGHT: This item asks to enter a search query directly on the search service page. ANALYSIS: The single AppleScript command needed is to type the search query ","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:02 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern fantasy movies\" & tab
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "THOUGHT: This item asks to enter a search query directly on the search service page. ANALYSIS: The single AppleScript command needed is to type the search query ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:02 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:54:11 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern fantasy movies\\\" & tab\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"THOUGHT: This item asks to enter a search query directly on the search service page. ANALYSIS: The single AppleScript command needed is to type the search query ","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:11 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern fantasy movies\" & tab
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "THOUGHT: This item asks to enter a search query directly on the search service page. ANALYSIS: The single AppleScript command needed is to type the search query ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:11 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:54:20 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\" & tab\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"вводжу пошуковий запит безпосередньо на сторінці пошукового сервісу\",\n  \"tts_phrase\": \"вводжу пошуковий запит безпосередньо на сторінці пошукового сервіс","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:20 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern science fiction movies\" & tab
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "вводжу пошуковий запит безпосередньо на сторінці пошукового сервісу",
  "tts_phrase": "вводжу пошуковий запит безпосередньо на сторінці пошукового сервіс... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-man..."}}
2025-11-03 21:54:20 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:54:20 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:54:29 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\" & tab\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкриваю Safari, ввожу пошуковий запит \\\"modern science fiction movies\\\" та натискаю Enter.\",\n  \"tts_phrase\": \"Ввожу пошуковий запит \\\"modern science fi","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:29 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern science fiction movies\" & tab
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "Відкриваю Safari, ввожу пошуковий запит \"modern science fiction movies\" та натискаю Enter.",
  "tts_phrase": "Ввожу пошуковий запит \"modern science fi... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:29 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:54:38 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\" & return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"вводжу пошуковий запит безпосередньо на сторінці пошукового сервісу\",\n  \"tts_phrase\": \"вводжу пошуковий запит безпосередньо на сторінці пошукового сервісу\",\n  \"needs_split","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:38 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern science fiction movies\" & return
end tell"
      }
    }
  ],
  "reasoning": "вводжу пошуковий запит безпосередньо на сторінці пошукового сервісу",
  "tts_phrase": "вводжу пошуковий запит безпосередньо на сторінці пошукового сервісу",
  "needs_split... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:38 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:54:48 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\" & tab\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"вводжу пошуковий запит безпосередньо на сторінці пошукового сервісу\",\n  \"tts_phrase\": \"вводжу пошуковий запит безпосередньо на сторінці пошукового сервіс","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:48 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern science fiction movies\" & tab
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "вводжу пошуковий запит безпосередньо на сторінці пошукового сервісу",
  "tts_phrase": "вводжу пошуковий запит безпосередньо на сторінці пошукового сервіс... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 21:54:48 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 21:54:48 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:54:48 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 21:54:51 [ERROR] Item 1.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.4}}
2025-11-03 21:55:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 21:55:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 21:55:51 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 21:55:51 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 21:55:51 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 21:57:21 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 21:57:21 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 21:57:21 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 21:58:46 [ERROR] mcp-server {"metadata":{}}
2025-11-03 22:00:48 [ERROR] mcp-server {"metadata":{}}
2025-11-03 22:01:14 [ERROR] mcp-server {"metadata":{}}
2025-11-03 22:03:28 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set value of attribute \\\"AXFullScreen\\\" of window 1 to true\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"This item asks to open Safari browser. The single AppleScript command needed is to activate Safari. I am staying within","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:03:28 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set value of attribute \"AXFullScreen\" of window 1 to true
    end tell
end tell"
      }
    }
  ],
  "reasoning": "This item asks to open Safari browser. The single AppleScript command needed is to activate Safari. I am staying within... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:03:28 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-man..."}}
2025-11-03 22:03:38 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set value of attribute \\\"AXFullScreen\\\" of window 1 to true\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"THOUGHT: This item asks to open Safari browser. ANALYSIS: The single AppleScript command needed is to activate Safari. ","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:03:38 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set value of attribute \"AXFullScreen\" of window 1 to true
    end tell
end tell"
      }
    }
  ],
  "reasoning": "THOUGHT: This item asks to open Safari browser. ANALYSIS: The single AppleScript command needed is to activate Safari. ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:03:38 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 22:03:47 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set frontmost to true\n        keystroke \\\"f\\\" using {command down, control down}\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"THOUGHT: This item asks to open Safari browser. ANALYSIS: The single AppleScript command needed is","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:03:47 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set frontmost to true
        keystroke \"f\" using {command down, control down}
    end tell
end tell"
      }
    }
  ],
  "reasoning": "THOUGHT: This item asks to open Safari browser. ANALYSIS: The single AppleScript command needed is... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:03:47 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-man..."}}
2025-11-03 22:03:47 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 22:03:47 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 22:03:56 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set value of attribute \\\"AXFullScreen\\\" of window 1 to true\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"THOUGHT: This item asks to open Safari browser. ANALYSIS: The AppleScript command to open Safari is 'tell application \\","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:03:56 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set value of attribute \"AXFullScreen\" of window 1 to true
    end tell
end tell"
      }
    }
  ],
  "reasoning": "THOUGHT: This item asks to open Safari browser. ANALYSIS: The AppleScript command to open Safari is 'tell application \... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:03:56 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 22:04:05 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set frontmost to true\n        keystroke \\\"f\\\" using {command down, control down}\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкриваю Safari та перевожу на повний екран\",\n  \"tts_phrase\": \"відкриваю Safari та перевожу на по","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:04:05 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set frontmost to true
        keystroke \"f\" using {command down, control down}
    end tell
end tell"
      }
    }
  ],
  "reasoning": "Відкриваю Safari та перевожу на повний екран",
  "tts_phrase": "відкриваю Safari та перевожу на по... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:04:05 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-man..."}}
2025-11-03 22:04:14 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        set frontmost to true\n        keystroke \\\"f\\\" using {command down, control down}\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"THOUGHT: This item asks to open Safari browser. ANALYSIS: The single AppleScript command needed is","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:04:14 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        set frontmost to true
        keystroke \"f\" using {command down, control down}
    end tell
end tell"
      }
    }
  ],
  "reasoning": "THOUGHT: This item asks to open Safari browser. ANALYSIS: The single AppleScript command needed is... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:04:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 22:04:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 22:04:14 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 22:04:17 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-03 22:05:21 [ERROR] mcp-server {"metadata":{}}
2025-11-03 22:05:21 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:05:21 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 22:05:33 [ERROR] mcp-server {"metadata":{}}
2025-11-03 22:05:33 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:05:33 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 22:05:49 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 176 (line 7 column 60). Sanitized error: Bad control character in string literal in JSON at position 176 (line 7 column 60) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\"\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкриваю Safari, ввожу пошуковий запит з іншим формулюванням\",\n  \"tts_phrase\": \"Ввожу пошуковий запит з іншим формулюванням\",\n  \"needs_split\": false\n}","originalError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)","sanitizedError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)"}}
2025-11-03 22:05:49 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"System Events\"
    keystroke \"modern science fiction movies\"
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "Відкриваю Safari, ввожу пошуковий запит з іншим формулюванням",
  "tts_phrase": "Ввожу пошуковий запит з іншим формулюванням",
  "needs_split": false
} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)"}}
2025-11-03 22:05:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 176 (line 7 column 60) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 176 (line 7 column 60)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 22:05:58 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\"\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"вводжу пошуковий запит з іншим формулюванням\",\n  \"tts_phrase\": \"вводжу пошуковий запит з іншим формулюванням\",\n  \"needs_split\": false\n}","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:05:58 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern science fiction movies\"
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "вводжу пошуковий запит з іншим формулюванням",
  "tts_phrase": "вводжу пошуковий запит з іншим формулюванням",
  "needs_split": false
} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:05:58 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 22:06:07 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\"  -- NEW search query\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкрито Safari, ввів новий пошуковий запит\",\n  \"tts_phrase\": \"Ввів новий пошуковий запит\",\n  \"needs_split\": false\n}","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:06:07 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern science fiction movies\"  -- NEW search query
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "Відкрито Safari, ввів новий пошуковий запит",
  "tts_phrase": "Ввів новий пошуковий запит",
  "needs_split": false
} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:06:07 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 22:06:07 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 22:06:07 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 22:06:13 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:06:13 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:06:16 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 176 (line 7 column 60). Sanitized error: Bad control character in string literal in JSON at position 176 (line 7 column 60) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\" & return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкрито Safari на весь екран, знайдено онлайн-сервіс для перегляду фільмів, знайдено фільм у жанрі сучасна фантастика. Ввожу пошуковий запит з іншим формулюванням.\",\n  \"tts_phrase\": \"Ввожу пошуковий запит з іншим формулю","originalError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)","sanitizedError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)"}}
2025-11-03 22:06:16 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"System Events\"
    keystroke \"modern science fiction movies\" & return
end tell"
      }
    }
  ],
  "reasoning": "Відкрито Safari на весь екран, знайдено онлайн-сервіс для перегляду фільмів, знайдено фільм у жанрі сучасна фантастика. Ввожу пошуковий запит з іншим формулюванням.",
  "tts_phrase": "Ввожу пошуковий запит з іншим формулю... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)"}}
2025-11-03 22:06:16 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 176 (line 7 column 60) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 176 (line 7 column 60)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 22:06:25 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 176 (line 7 column 60). Sanitized error: Bad control character in string literal in JSON at position 176 (line 7 column 60) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\"\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкрито Safari, ввів пошуковий запит з іншим формулюванням\",\n  \"tts_phrase\": \"ввів пошуковий запит з іншим формулюванням\",\n  \"needs_split\": false\n}","originalError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)","sanitizedError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)"}}
2025-11-03 22:06:25 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"System Events\"
    keystroke \"modern science fiction movies\"
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "Відкрито Safari, ввів пошуковий запит з іншим формулюванням",
  "tts_phrase": "ввів пошуковий запит з іншим формулюванням",
  "needs_split": false
} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 176 (line 7 column 60)"}}
2025-11-03 22:06:25 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 176 (line 7 column 60) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 176 (line 7 column 60)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520..."}}
2025-11-03 22:06:34 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"modern science fiction movies\\\"  -- NEW search query\n    keystroke return\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"Відкрито Safari, ввів новий пошуковий запит\",\n  \"tts_phrase\": \"Ввів новий пошуковий запит\",\n  \"needs_split\": false\n}","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:06:34 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"modern science fiction movies\"  -- NEW search query
    keystroke return
end tell"
      }
    }
  ],
  "reasoning": "Відкрито Safari, ввів новий пошуковий запит",
  "tts_phrase": "Ввів новий пошуковий запит",
  "needs_split": false
} {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)"}}
2025-11-03 22:06:34 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3.1: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.3.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2739:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1569:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-man..."}}
2025-11-03 22:06:34 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 22:06:34 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Bad control character in string literal in JSON at position 181 (line 7 column 65)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1141:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-03 22:06:37 [ERROR] Item 1.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.4}}
2025-11-03 22:08:08 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 22:08:08 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 22:08:08 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 22:10:45 [ERROR] mcp-server {"metadata":{}}
2025-11-03 22:11:18 [ERROR] mcp-server {"metadata":{}}
2025-11-03 22:15:28 [ERROR] mcp-server {"metadata":{}}
2025-11-03 22:15:28 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:15:28 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 22:15:41 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 22:16:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:16:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:21:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:21:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:26:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:26:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:31:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:31:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:36:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:36:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:41:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:41:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:46:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:46:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:51:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:51:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 22:56:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 22:56:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:01:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:01:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:01:35 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:06:35 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:06:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:11:35 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:11:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:16:35 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:16:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:21:35 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:21:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:26:35 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:26:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:31:08 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:31:28 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:33:38 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:35:59 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 23:35:59 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-03 23:35:59 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"Error: Screenshot capture failed for mode: active_window\n    at VisualCaptureService.captureScreenshot (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/visual-capture-service.js:175:23)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyItemProcessor._executeVisualVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:403:30)\n    at async GrishaVerifyItemProce..."}}
2025-11-03 23:36:00 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 23:36:00 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-03 23:37:57 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:37:57 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:37:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-03 23:38:11 [ERROR] repetition-inspector {"metadata":{}}
2025-11-03 23:38:38 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:38:38 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:41:29 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-03 23:41:29 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 23:41:29 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-03 23:42:50 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Playwright"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
142:150: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Playwright". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 23:42:50 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.6_verify_attempt1","mode":"active_window"}}
2025-11-03 23:42:57 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Playwright"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
142:150: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Playwright". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Браузер"}}
2025-11-03 23:42:57 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.6_verify_attempt2","mode":"active_window"}}
2025-11-03 23:43:38 [ERROR] mcp-manager {"metadata":{}}
2025-11-03 23:43:38 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-03 23:47:47 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:52:43 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:55:15 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:56:38 [ERROR] mcp-server {"metadata":{}}
2025-11-03 23:59:28 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-03 23:59:28 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-04 00:01:37 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 00:01:37 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 00:06:27 [ERROR] llm-client {"metadata":{}}
2025-11-04 00:06:27 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-04 00:06:37 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 00:06:37 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 00:08:08 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-04 00:08:08 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-04 00:08:25 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 00:10:53 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:12:11 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:13:12 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:13:12 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 00:13:20 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:13:20 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 00:13:59 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:14:01 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:14:01 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.2_verify_attempt1","mode":"active_window"}}
2025-11-04 00:14:08 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:14:08 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.2_verify_attempt2","mode":"active_window"}}
2025-11-04 00:15:33 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:16:52 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:18:34 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:18:36 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:18:36 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 00:18:44 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:18:44 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 00:19:23 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:19:25 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:19:25 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.2_verify_attempt1","mode":"active_window"}}
2025-11-04 00:19:32 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:19:32 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.2_verify_attempt2","mode":"active_window"}}
2025-11-04 00:20:00 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:20:02 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:20:02 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.3_verify_attempt1","mode":"active_window"}}
2025-11-04 00:20:12 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:20:12 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.3_verify_attempt2","mode":"active_window"}}
2025-11-04 00:21:20 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:21:22 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:21:22 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.4_verify_attempt1","mode":"active_window"}}
2025-11-04 00:21:32 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:21:32 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.4_verify_attempt2","mode":"active_window"}}
2025-11-04 00:21:52 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 00:21:52 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 00:23:13 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:23:15 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:23:15 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.5_verify_attempt1","mode":"active_window"}}
2025-11-04 00:24:41 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:24:43 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:24:43 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.6_verify_attempt1","mode":"active_window"}}
2025-11-04 00:24:53 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:24:53 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.6_verify_attempt2","mode":"active_window"}}
2025-11-04 00:26:29 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:26:31 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:26:31 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.7_verify_attempt1","mode":"active_window"}}
2025-11-04 00:26:42 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:26:42 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.7_verify_attempt2","mode":"active_window"}}
2025-11-04 00:26:52 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 00:26:52 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 00:27:17 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:27:19 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:27:19 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.8_verify_attempt1","mode":"active_window"}}
2025-11-04 00:28:47 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 00:28:49 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:28:49 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.9_verify_attempt1","mode":"active_window"}}
2025-11-04 00:29:00 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 00:29:00 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.9_verify_attempt2","mode":"active_window"}}
2025-11-04 00:29:43 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:30:19 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:30:19 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:30:19 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:30:19 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:34:38 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:34:55 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:34:55 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:34:55 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:34:55 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:37:20 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:37:55 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:37:55 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:37:55 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:37:55 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:38:32 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:38:32 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:38:32 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:38:32 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:38:58 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:39:32 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:39:32 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:39:32 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:39:32 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:39:50 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:39:50 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:39:50 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:39:50 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:40:12 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:40:12 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:40:12 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:40:12 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:40:38 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:40:55 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:40:55 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:40:55 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:40:55 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:41:19 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:41:19 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:41:19 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:41:19 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:44:15 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:48:24 [ERROR] mcp-server {"metadata":{}}
2025-11-04 00:49:08 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:49:08 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:49:08 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:49:08 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:50:18 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:50:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:50:59 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:50:59 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:51:55 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:51:55 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:51:55 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:51:55 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:52:18 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 00:52:18 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 00:52:18 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 00:52:18 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 00:52:40 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:52:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:53:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 00:53:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 00:53:41 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:53:41 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:53:51 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:53:51 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:54:41 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:54:41 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:54:41 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:54:41 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:54:44 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-04 00:55:19 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:55:19 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:56:19 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:56:19 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:56:19 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:56:19 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:56:19 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:56:19 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:57:40 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:57:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:57:41 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:57:41 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:58:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 00:58:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 00:58:42 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:58:42 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:59:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:59:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:59:20 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:59:20 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:59:43 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 00:59:43 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 00:59:43 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:59:43 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 00:59:46 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-04 00:59:49 [ERROR] Item 1.3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.3}}
2025-11-04 00:59:52 [ERROR] Item 1.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.4}}
2025-11-04 00:59:55 [ERROR] Item 1.5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.5}}
2025-11-04 00:59:58 [ERROR] Item 1.6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.6}}
2025-11-04 01:00:01 [ERROR] Item 1.7 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.7}}
2025-11-04 01:00:04 [ERROR] Item 1.8 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.8}}
2025-11-04 01:00:07 [ERROR] Item 1.9 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.9}}
2025-11-04 01:00:10 [ERROR] Item 1.1 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.1}}
2025-11-04 01:00:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 01:00:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 01:00:50 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:01:54 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:02:47 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:03:10 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Unterminated string in JSON at position 280 (line 7 column 164) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    keystroke \\\"netflix.com\\\" using {command down}","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Unterminated string in JSON at position 280 (line 7 column 164)"}}
2025-11-04 01:03:10 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    keystroke \"netflix.com\" using {command down}
    keystroke return
    delay 2.0
    keystroke \"The Creator\" & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab &... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unterminated string in JSON at position 280 (line 7 column 164)"}}
2025-11-04 01:03:10 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Unterminated string in JSON at position 280 (line 7 column 164) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unterminated string in JSON at position 280 (line 7 column 164)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MC..."}}
2025-11-04 01:03:29 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:04:23 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:04:51 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:04:53 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:05:18 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:05:32 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:05:48 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:05:50 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:05:50 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 01:06:34 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:07:06 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:07:56 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Unterminated string in JSON at position 315 (line 7 column 199) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        keystroke \\\"n\\\" using {command down, shift down}","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Unterminated string in JSON at position 315 (line 7 column 199)"}}
2025-11-04 01:07:56 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        keystroke \"n\" using {command down, shift down}
        delay 0.5
        keystroke \"https://www.netflix.com/search?q=The%20Creator%202023\"
        keystroke return
        delay 5
        keystroke \"The Creator\" & tab & tab & tab &... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unterminated string in JSON at position 315 (line 7 column 199)"}}
2025-11-04 01:07:56 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7: Failed to parse tool plan: Unterminated string in JSON at position 315 (line 7 column 199) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.7,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unterminated string in JSON at position 315 (line 7 column 199)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n  ..."}}
2025-11-04 01:08:06 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Unterminated string in JSON at position 315 (line 7 column 199) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        keystroke \\\"n\\\" using {command down, shift down}","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Unterminated string in JSON at position 315 (line 7 column 199)"}}
2025-11-04 01:08:06 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        keystroke \"n\" using {command down, shift down}
        delay 0.5
        keystroke \"https://www.netflix.com/search?q=The%20Creator%202023\"
        keystroke return
        delay 5
        keystroke \"The Creator\" & tab & tab & tab &... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unterminated string in JSON at position 315 (line 7 column 199)"}}
2025-11-04 01:08:06 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7: Failed to parse tool plan: Unterminated string in JSON at position 315 (line 7 column 199) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.7,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unterminated string in JSON at position 315 (line 7 column 199)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MC..."}}
2025-11-04 01:08:17 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 181 (line 7 column 65). Sanitized error: Unterminated string in JSON at position 315 (line 7 column 199) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\ndelay 0.5\ntell application \\\"System Events\\\"\n    tell process \\\"Safari\\\"\n        keystroke \\\"n\\\" using {command down, shift down}","originalError":"Bad control character in string literal in JSON at position 181 (line 7 column 65)","sanitizedError":"Unterminated string in JSON at position 315 (line 7 column 199)"}}
2025-11-04 01:08:17 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate
delay 0.5
tell application \"System Events\"
    tell process \"Safari\"
        keystroke \"n\" using {command down, shift down}
        delay 0.5
        keystroke \"https://www.netflix.com/search?q=The%20Creator%202023\"
        keystroke return
        delay 5
        keystroke \"The Creator\" & tab & tab & tab &... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unterminated string in JSON at position 315 (line 7 column 199)"}}
2025-11-04 01:08:17 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7: Failed to parse tool plan: Unterminated string in JSON at position 315 (line 7 column 199) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.7,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unterminated string in JSON at position 315 (line 7 column 199)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MC..."}}
2025-11-04 01:08:17 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unterminated string in JSON at position 315 (line 7 column 199) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:08:17 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unterminated string in JSON at position 315 (line 7 column 199)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:08:37 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:09:25 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:09:52 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:09:54 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:10:18 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:10:28 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:10:58 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:12:09 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesyste","originalError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:09 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "parameters": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "too... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:12:18 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesyste","originalError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:18 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "parameters": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "too... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:12:28 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesyste","originalError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:28 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "parameters": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "too... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:28 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:12:28 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:12:28 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:12:35 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesyste","originalError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:35 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "parameters": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "too... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:35 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:12:44 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesyste","originalError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:44 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "parameters": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "too... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:44 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manag..."}}
2025-11-04 01:12:52 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesyste","originalError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:52 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "parameters": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "too... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)"}}
2025-11-04 01:12:52 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:12:52 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:12:52 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 130 (line 6 column 6)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:12:55 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-04 01:13:05 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4). Sanitized error: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n    \"tool\": \"filesystem_create_directory\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_write_file\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n      \"content\": \"Atlas4 працює!\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_check_file_exists\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_read_file\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atl","originalError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)","sanitizedError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)"}}
2025-11-04 01:13:05 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
  {
    "tool": "filesystem_create_directory",
    "parameters": {
      "path": "/Users/dev/Desktop/"
    }
  },
  {
    "tool": "filesystem_write_file",
    "parameters": {
      "path": "/Users/dev/Desktop/test_atlas.txt",
      "content": "Atlas4 працює!"
    }
  },
  {
    "tool": "filesystem_check_file_exists",
    "parameters": {
      "path": "/Users/dev/Desktop/test_atlas.txt"
    }
  },
  {
    "tool": "filesystem_read_file",
    "parameters": {
      "path": "/Users/dev/Desk... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)"}}
2025-11-04 01:13:05 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:13:14 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4). Sanitized error: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n    \"tool\": \"filesystem_create_directory\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_write_file\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n      \"content\": \"Atlas4 працює!\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_check_file_exists\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_read_file\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atl","originalError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)","sanitizedError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)"}}
2025-11-04 01:13:14 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
  {
    "tool": "filesystem_create_directory",
    "parameters": {
      "path": "/Users/dev/Desktop/"
    }
  },
  {
    "tool": "filesystem_write_file",
    "parameters": {
      "path": "/Users/dev/Desktop/test_atlas.txt",
      "content": "Atlas4 працює!"
    }
  },
  {
    "tool": "filesystem_check_file_exists",
    "parameters": {
      "path": "/Users/dev/Desktop/test_atlas.txt"
    }
  },
  {
    "tool": "filesystem_read_file",
    "parameters": {
      "path": "/Users/dev/Desk... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)"}}
2025-11-04 01:13:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:13:23 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file","originalError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)"}}
2025-11-04 01:13:23 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "params": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "params": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "params": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "tool": "filesys... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)"}}
2025-11-04 01:13:23 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:13:23 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:13:23 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:13:31 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file","originalError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)"}}
2025-11-04 01:13:31 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "params": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "params": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "params": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "tool": "filesys... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)"}}
2025-11-04 01:13:31 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:13:40 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4). Sanitized error: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n    \"tool\": \"filesystem_create_directory\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_write_file\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n      \"content\": \"Atlas4 працює!\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_check_file_exists\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n    }\n  },\n  {\n    \"tool\": \"filesystem_read_file\",\n    \"parameters\": {\n      \"path\": \"/Users/dev/Desktop/test_atl","originalError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)","sanitizedError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)"}}
2025-11-04 01:13:40 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
  {
    "tool": "filesystem_create_directory",
    "parameters": {
      "path": "/Users/dev/Desktop/"
    }
  },
  {
    "tool": "filesystem_write_file",
    "parameters": {
      "path": "/Users/dev/Desktop/test_atlas.txt",
      "content": "Atlas4 працює!"
    }
  },
  {
    "tool": "filesystem_check_file_exists",
    "parameters": {
      "path": "/Users/dev/Desktop/test_atlas.txt"
    }
  },
  {
    "tool": "filesystem_read_file",
    "parameters": {
      "path": "/Users/dev/Desk... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)"}}
2025-11-04 01:13:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 110 (line 6 column 4)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:13:49 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool\": \"filesystem_create_directory\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_write_file\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file_exists\",\n        \"params\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool\": \"filesystem_check_file","originalError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)"}}
2025-11-04 01:13:49 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool": "filesystem_create_directory",
        "params": {
            "path": "/Users/dev/Desktop/"
        }
    },
    {
        "tool": "filesystem_write_file",
        "params": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool": "filesystem_check_file_exists",
        "params": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "tool": "filesys... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)"}}
2025-11-04 01:13:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:13:49 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:13:49 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 126 (line 6 column 6)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:13:52 [ERROR] Item 1.4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.4}}
2025-11-04 01:14:06 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:14:06 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:14:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 01:14:06 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:14:06 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:14:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 01:14:06 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:14:06 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:14:06 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 01:14:09 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:14:11 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:14:11 [ERROR] [UNIFIED-MCP] Workflow failed: Request failed with status code 500 {"metadata":{"category":"mcp-todo","error":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:14:12 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:14:14 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:14:14 [ERROR] [UNIFIED-MCP] Workflow failed: Request failed with status code 500 {"metadata":{"category":"mcp-todo","error":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:14:26 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:14:32 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool_name\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool_name\": \"filesystem_read_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool_name\": \"filesystem_check_file_content\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"expected_con","originalError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)"}}
2025-11-04 01:14:32 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool_name": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool_name": "filesystem_read_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "tool_name": "filesystem_check_file_content",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
           ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)"}}
2025-11-04 01:14:32 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:14:40 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool_name\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool_name\": \"filesystem_read_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool_name\": \"filesystem_check_file_content\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"expected_con","originalError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)"}}
2025-11-04 01:14:40 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool_name": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool_name": "filesystem_read_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "tool_name": "filesystem_check_file_content",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
           ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)"}}
2025-11-04 01:14:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:14:49 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6). Sanitized error: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n        \"tool_name\": \"filesystem_write_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"content\": \"Atlas4 працює!\"\n        }\n    },\n    {\n        \"tool_name\": \"filesystem_read_file\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\"\n        }\n    },\n    {\n        \"tool_name\": \"filesystem_check_file_content\",\n        \"parameters\": {\n            \"path\": \"/Users/dev/Desktop/test_atlas.txt\",\n            \"expected_con","originalError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)","sanitizedError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)"}}
2025-11-04 01:14:49 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
[
    {
        "tool_name": "filesystem_write_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
            "content": "Atlas4 працює!"
        }
    },
    {
        "tool_name": "filesystem_read_file",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt"
        }
    },
    {
        "tool_name": "filesystem_check_file_content",
        "parameters": {
            "path": "/Users/dev/Desktop/test_atlas.txt",
           ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)"}}
2025-11-04 01:14:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.1: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2747:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9..."}}
2025-11-04 01:14:49 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:14:49 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Unexpected non-whitespace character after JSON at position 184 (line 7 column 6)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:15:04 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:20:03 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:20:03 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 01:21:20 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:22:38 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:23:27 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:24:40 [ERROR] [PORT-4000] Timeout - port 4000 too slow {"metadata":{"category":"vision-analysis","note":"OpenRouter fallback disabled - vision parsing not working"}}
2025-11-04 01:24:40 [ERROR] [VISION] API call failed: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled. {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"Error: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled.\n    at VisionAnalysisService._callPort4000VisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:852:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:549:9)\n    at process.processTimers (node:internal/timers:523:7)\n    at async VisionAnalysisService._callVisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orch..."}}
2025-11-04 01:25:15 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:25:48 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-04 01:25:48 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:25:48 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:26:13 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:26:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:26:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 01:27:11 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:27:59 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:28:46 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:29:13 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:29:15 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:30:02 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:30:14 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:30:31 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:31:02 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:31:10 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 546 (line 7 column 418). Sanitized error: Expected ',' or '}' after property value in JSON at position 322 (line 7 column 194) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\\n    activate\\n    open location \\\"https://www.netflix.com\\\"\\n    tell window 1\\n        set current tab to (make new tab with properties {URL:\\\"https://www.netflix.com/search?q=The%20Creator%202023\\\"})\\n        delay 5\\n        tell current tab\\n            execute front window's document 1's execute JavaScript \\\"do","originalError":"Expected ',' or '}' after property value in JSON at position 546 (line 7 column 418)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 322 (line 7 column 194)"}}
2025-11-04 01:31:10 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"\n    activate\n    open location \"https://www.netflix.com\"\n    tell window 1\n        set current tab to (make new tab with properties {URL:\"https://www.netflix.com/search?q=The%20Creator%202023\"})\n        delay 5\n        tell current tab\n            execute front window's document 1's execute JavaScr... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 322 (line 7 column 194)"}}
2025-11-04 01:31:10 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 322 (line 7 column 194) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 322 (line 7 column 194)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-m..."}}
2025-11-04 01:31:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:31:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 01:31:20 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 524 (line 7 column 396). Sanitized error: Expected ',' or '}' after property value in JSON at position 335 (line 7 column 207) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\\n    activate\\n    open location \\\"https://www.netflix.com\\\"\\n    delay 5\\n    tell window 1\\n        set current tab to (make new tab with properties {URL:\\\"https://www.netflix.com/search?q=The%20Creator\\\"})\\n        delay 5\\n        tell document 1\\n            do JavaScript \\\"document.querySelector('a[href*=\\\\\\\\\\\\","originalError":"Expected ',' or '}' after property value in JSON at position 524 (line 7 column 396)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 335 (line 7 column 207)"}}
2025-11-04 01:31:20 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"\n    activate\n    open location \"https://www.netflix.com\"\n    delay 5\n    tell window 1\n        set current tab to (make new tab with properties {URL:\"https://www.netflix.com/search?q=The%20Creator\"})\n        delay 5\n        tell document 1\n            do JavaScript \"document.querySelector('a[href... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 335 (line 7 column 207)"}}
2025-11-04 01:31:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 335 (line 7 column 207) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 335 (line 7 column 207)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:5..."}}
2025-11-04 01:31:37 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:32:04 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-04 01:32:04 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:32:04 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:32:04 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:32:04 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:32:04 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 01:32:06 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:32:16 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:32:19 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:32:22 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:32:22 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.7.2_verify_attempt2_full_screen_1762212734293.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:32:22 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:32:31 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:32:41 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:33:13 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 418 (line 7 column 290). Sanitized error: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\\n    activate\\n    tell window 1\\n        set current tab to (make new tab with properties {URL:\\\"https://www.netflix.com\\\"})\\n        delay 5\\n        set theData to do JavaScript \\\"document.querySelector('input[name=\\\\\\\"searchQuery\\\\\"]').value = 'The Creator (2023)'\\\" in current tab\\n        delay 2\\n        do Jav","originalError":"Expected ',' or '}' after property value in JSON at position 418 (line 7 column 290)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:33:13 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"\n    activate\n    tell window 1\n        set current tab to (make new tab with properties {URL:\"https://www.netflix.com\"})\n        delay 5\n        set theData to do JavaScript \"document.querySelector('input[name=\\\"searchQuery\\"]').value = 'The Creator (2023)'\" in current tab\n        delay 2\n      ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:33:13 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2.1: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:5..."}}
2025-11-04 01:33:23 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 452 (line 7 column 324). Sanitized error: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\\n    activate\\n    tell window 1\\n        set current tab to (make new tab with properties {URL:\\\"https://www.netflix.com\\\"})\\n        delay 5\\n        execute front window's document 1's execute JavaScript \\\"document.querySelector('input[name=\\\\\\\\\\\\\\\"searchQuery\\\\\\\\\\\\\"]').value = 'The Creator'\\\"\\n        execute fro","originalError":"Expected ',' or '}' after property value in JSON at position 452 (line 7 column 324)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:33:23 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"\n    activate\n    tell window 1\n        set current tab to (make new tab with properties {URL:\"https://www.netflix.com\"})\n        delay 5\n        execute front window's document 1's execute JavaScript \"document.querySelector('input[name=\\\\\\\"searchQuery\\\\\\"]').value = 'The Creator'\"\n        exe... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:33:23 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2.1: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-m..."}}
2025-11-04 01:33:50 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:34:02 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:34:05 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:34:08 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:34:08 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.7.2.1_verify_attempt2_full_screen_1762212840639.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:34:08 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:34:14 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:34:16 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:35:18 [ERROR] [PORT-4000] Timeout - port 4000 too slow {"metadata":{"category":"vision-analysis","note":"OpenRouter fallback disabled - vision parsing not working"}}
2025-11-04 01:35:18 [ERROR] [VISION] API call failed: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled. {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"Error: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled.\n    at VisionAnalysisService._callPort4000VisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:852:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:549:9)\n    at process.processTimers (node:internal/timers:523:7)\n    at async VisionAnalysisService._callVisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orch..."}}
2025-11-04 01:35:27 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:35:29 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:35:33 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:35:33 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.7.2.1_verify_attempt2_full_screen_1762212925022.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:35:33 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:35:41 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-04 01:35:41 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:35:41 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:35:41 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:35:41 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:35:41 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 01:35:47 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 569 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Комбінація клавіш не спрацювала для входу в повноекранний режим. Спробуємо альтернативний підхід через інтерфейс користувача.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Натиснути на кнопку повноекранного режиму в інтерфейсі відеоплеєра\",\n      \"success_criteria\": \"Відеоплеєр перейшов у повноекранний режим\",\n      \"fallback_options\": [\"Спробувати іншу комбінацію клавіш\", \"Використати контекстне меню\"],\n      \"max_attempts\""}}
2025-11-04 01:35:48 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:35:56 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 438 (line 7 column 310). Sanitized error: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\\n    activate\\n    tell window 1\\n        set current tab to (make new tab with properties {URL:\\\"https://www.netflix.com\\\"})\\n        delay 2\\n        tell current tab\\n            execute JavaScript \\\"document.querySelector('input[name=\\\\\\\"searchQuery\\\\\"]').value = 'The Creator (2023)'\\\"\\n            execute JavaSc","originalError":"Expected ',' or '}' after property value in JSON at position 438 (line 7 column 310)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:35:56 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"\n    activate\n    tell window 1\n        set current tab to (make new tab with properties {URL:\"https://www.netflix.com\"})\n        delay 2\n        tell current tab\n            execute JavaScript \"document.querySelector('input[name=\\\"searchQuery\\"]').value = 'The Creator (2023)'\"\n            execut... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:35:56 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2.1: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:5..."}}
2025-11-04 01:36:07 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 452 (line 7 column 324). Sanitized error: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\\n    activate\\n    tell window 1\\n        set current tab to (make new tab with properties {URL:\\\"https://www.netflix.com\\\"})\\n        delay 5\\n        execute front window's document 1's execute JavaScript \\\"document.querySelector('input[name=\\\\\\\\\\\\\\\"searchQuery\\\\\\\\\\\\\"]').value = 'The Creator'\\\"\\n        delay 2\\n  ","originalError":"Expected ',' or '}' after property value in JSON at position 452 (line 7 column 324)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:36:07 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"\n    activate\n    tell window 1\n        set current tab to (make new tab with properties {URL:\"https://www.netflix.com\"})\n        delay 5\n        execute front window's document 1's execute JavaScript \"document.querySelector('input[name=\\\\\\\"searchQuery\\\\\\"]').value = 'The Creator'\"\n        del... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:36:07 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2.1: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-m..."}}
2025-11-04 01:36:16 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69). Sanitized error: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\\n\" +\n                        \"tell application \\\"System Events\\\"\\n\" +\n                        \"    keystroke \\\"f\\\" using {command down}\\n\" +\n                        \"end tell\",\n        \"timeout\": 10\n      }\n    }\n  ],\n  \"reasoning\": \"The goal is to enter full-screen mode in Safari. The analysis shows that","originalError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)"}}
2025-11-04 01:36:16 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate\n" +
                        "tell application \"System Events\"\n" +
                        "    keystroke \"f\" using {command down}\n" +
                        "end tell",
        "timeout": 10
      }
    }
  ],
  "reasoning": "The goal is to enter full-screen mode in Safari. The analysis sh... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)"}}
2025-11-04 01:36:16 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2.1: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-04 01:36:16 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:36:16 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:36:19 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:36:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:36:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 01:36:33 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:36:43 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:36:45 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:36:49 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:36:49 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.7.2.1_verify_attempt2_full_screen_1762213001150.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:36:49 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:36:57 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-04 01:36:57 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:36:57 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:36:57 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:36:57 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:36:57 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 01:36:59 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:37:41 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:37:44 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:37:47 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:37:47 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.7.2.1_verify_attempt2_full_screen_1762213046686.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:37:47 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:37:56 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:37:56 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:37:56 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 01:38:02 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 632 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Комбінація клавіш не спрацювала для входу в повноекранний режим. Спробуємо альтернативний підхід: використати кнопку повноекранного режиму в інтерфейсі відеоплеєра.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Знайти та натиснути кнопку повноекранного режиму в інтерфейсі відеоплеєра Netflix\",\n      \"success_criteria\": \"Відеоплеєр переходить у повноекранний режим\",\n      \"fallback_options\": [\"Спробувати іншу комбінацію клаві"}}
2025-11-04 01:38:05 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:38:19 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:38:31 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:38:42 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:38:46 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:38:46 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.7.2.1_verify_attempt2_full_screen_1762213108191.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:38:46 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:38:55 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-04 01:38:55 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:38:55 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 01:38:55 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 01:38:56 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:39:22 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:39:24 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:39:42 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:39:42 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.7.2.1_verify_attempt2_full_screen_1762213149109.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:39:43 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:39:51 [ERROR] mcp-server {"metadata":{}}
2025-11-04 01:39:51 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:39:51 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 01:39:57 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 572 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Комбінація клавіш не спрацювала для входу в повноекранний режим. Спробуємо альтернативний підхід через інтерфейс користувача.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Натиснути кнопку повноекранного режиму на панелі відеоплеєра\",\n      \"success_criteria\": \"Відеоплеєр переходить у повноекранний режим\",\n      \"fallback_options\": [\"Використати контекстне меню плеєра\", \"Спробувати іншу комбінацію клавіш\"],\n      \"max_attemp"}}
2025-11-04 01:40:00 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:40:07 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69). Sanitized error: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\\n\" +\n                        \"tell application \\\"System Events\\\"\\n\" +\n                        \"    keystroke \\\"f\\\" using {command down}\\n\" +\n                        \"end tell\",\n        \"timeout\": 10\n      }\n    }\n  ],\n  \"reasoning\": \"The goal is to enter full-screen mode in Safari. The analysis shows that","originalError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)"}}
2025-11-04 01:40:07 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate\n" +
                        "tell application \"System Events\"\n" +
                        "    keystroke \"f\" using {command down}\n" +
                        "end tell",
        "timeout": 10
      }
    }
  ],
  "reasoning": "The goal is to enter full-screen mode in Safari. The analysis sh... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)"}}
2025-11-04 01:40:07 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2.1: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-04 01:40:17 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 452 (line 7 column 324). Sanitized error: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\\n    activate\\n    tell window 1\\n        set current tab to (make new tab with properties {URL:\\\"https://www.netflix.com\\\"})\\n        delay 5\\n        execute front window's document 1's execute JavaScript \\\"document.querySelector('input[name=\\\\\\\\\\\\\\\"searchQuery\\\\\\\\\\\\\"]').value = 'The Creator'\\\"\\n        delay 2\\n  ","originalError":"Expected ',' or '}' after property value in JSON at position 452 (line 7 column 324)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:40:17 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"\n    activate\n    tell window 1\n        set current tab to (make new tab with properties {URL:\"https://www.netflix.com\"})\n        delay 5\n        execute front window's document 1's execute JavaScript \"document.querySelector('input[name=\\\\\\\"searchQuery\\\\\\"]').value = 'The Creator'\"\n        del... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)"}}
2025-11-04 01:40:17 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2.1: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 275 (line 7 column 147)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-m..."}}
2025-11-04 01:40:26 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69). Sanitized error: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\" to activate\\n\" +\n                        \"tell application \\\"System Events\\\"\\n\" +\n                        \"    keystroke \\\"f\\\" using {command down}\\n\" +\n                        \"end tell\",\n        \"timeout\": 10\n      }\n    }\n  ],\n  \"reasoning\": \"The goal is to enter full-screen mode in Safari. The analysis shows that","originalError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)"}}
2025-11-04 01:40:26 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\" to activate\n" +
                        "tell application \"System Events\"\n" +
                        "    keystroke \"f\" using {command down}\n" +
                        "end tell",
        "timeout": 10
      }
    }
  ],
  "reasoning": "The goal is to enter full-screen mode in Safari. The analysis sh... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)"}}
2025-11-04 01:40:26 [ERROR] [MCP-TODO] Failed to plan tools for item 1.7.2.1: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.7.2.1","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:52..."}}
2025-11-04 01:40:26 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69) {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:40:26 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 197 (line 7 column 69)
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 01:40:29 [ERROR] Item 1.8 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.8}}
2025-11-04 01:40:54 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 01:41:08 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:41:11 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:41:14 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:41:14 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.9_verify_attempt2_full_screen_1762213264485.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:41:14 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 01:41:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:41:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 01:46:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:46:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 01:51:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:51:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 01:56:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 01:56:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:01:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:01:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:06:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:06:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:11:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:11:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:16:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:16:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:21:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:21:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:26:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:26:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:31:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:31:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:36:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:36:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:41:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:41:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:46:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:46:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:51:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:51:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 02:56:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 02:56:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:01:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:01:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:06:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:06:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:11:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:11:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:16:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:16:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:21:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:21:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:26:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:26:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:31:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:31:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:36:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:36:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:41:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:41:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:46:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:46:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:51:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:51:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 03:56:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 03:56:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:01:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:01:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:06:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:06:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:11:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:11:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:16:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:16:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:21:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:21:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:26:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:26:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:31:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:31:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:36:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:36:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:41:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:41:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:46:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:46:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:51:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:51:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 04:56:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 04:56:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 05:01:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 05:01:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 05:06:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 05:06:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 05:11:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 05:11:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 05:16:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 05:16:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 05:21:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 05:21:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 05:29:05 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 05:29:05 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 05:47:28 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 05:47:28 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 06:05:14 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 06:05:14 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 06:23:24 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 06:23:24 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 06:30:06 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 06:30:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 06:47:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 06:47:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 06:52:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 06:52:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 06:57:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 06:57:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 07:15:32 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 07:15:32 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 07:31:07 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 07:31:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 07:48:38 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 07:48:38 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 08:07:40 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 08:07:40 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 08:25:22 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 08:25:22 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 08:32:07 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 08:32:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 08:51:06 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 08:51:06 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 09:08:39 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 09:08:39 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 09:25:46 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 09:25:46 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 09:33:07 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 09:33:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 09:52:04 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 09:52:04 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 10:09:58 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 10:09:58 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 10:27:08 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 10:27:08 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 10:34:07 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 10:34:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 10:39:07 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 10:39:07 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 10:55:43 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 10:55:43 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 11:12:42 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 11:12:42 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 11:29:40 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 11:29:40 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 11:34:40 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 11:34:40 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 11:52:22 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 11:52:22 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 12:09:10 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 12:09:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 12:27:10 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 12:27:10 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 12:44:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 12:44:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 13:01:42 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 13:01:42 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 13:18:43 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 13:18:43 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 13:29:18 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 13:29:18 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 13:49:05 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 13:49:05 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 14:06:11 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 14:06:11 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 14:24:02 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 14:24:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 14:35:55 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 14:35:55 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 14:45:49 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 14:45:49 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 14:46:47 [ERROR] mcp-server {"metadata":{}}
2025-11-04 14:47:52 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:48:07 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:48:09 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:48:13 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:48:13 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_full_screen_1762260483340.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:48:13 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:48:42 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:49:06 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:49:09 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:49:13 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:49:13 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.2_verify_attempt2_full_screen_1762260532555.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:49:13 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:49:40 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:49:55 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:50:08 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:50:11 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:50:11 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.3_verify_attempt2_full_screen_1762260591170.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:50:11 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:50:45 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:51:00 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:51:02 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:51:07 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:51:07 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.4_verify_attempt2_full_screen_1762260656433.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:51:07 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:51:16 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-04 14:51:16 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 14:51:16 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 14:51:28 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"System Events\"
    keystroke \"The Creator\" & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab & tab... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"No JSON object or array found in response"}}
2025-11-04 14:51:28 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: Failed to parse tool plan: No JSON object or array found in response {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: Failed to parse tool plan: No JSON object or array found in response\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlan..."}}
2025-11-04 14:51:47 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 14:51:47 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 14:51:47 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:52:01 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:03 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:07 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:07 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.5_verify_attempt2_full_screen_1762260717239.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:07 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:35 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:52:50 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:53 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:57 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:57 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.6_verify_attempt2_full_screen_1762260766938.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:52:57 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:53:26 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:53:40 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:53:43 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:53:46 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:53:46 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.7_verify_attempt2_full_screen_1762260816571.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:53:46 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:53:55 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 14:53:57 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:54:39 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:54:55 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:54:58 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:55:02 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:55:02 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.8_verify_attempt2_full_screen_1762260891704.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:55:02 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:55:19 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 14:55:21 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:55:39 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:55:55 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:56:22 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:56:25 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:56:28 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:56:28 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.8.1_verify_attempt2_full_screen_1762260980440.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:56:28 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:56:46 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 14:56:46 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 14:56:48 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:56:57 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad escaped character in JSON at position 368 (line 7 column 240). Sanitized error: Bad escaped character in JSON at position 368 (line 7 column 240) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__applescript_execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\\n    activate\\n    set bounds of front window to {0, 0, 1440, 900}\\n    open location \\\"https://www.netflix.com\\\"\\n    delay 5\\n    do JavaScript \\\"document.querySelector('input[name=\\\\\\'searchQuery\\\\\\\\]').value = 'The Creator (2023)'\\\" in document 1\\n    delay 2\\n    do JavaScript \\\"document.querySelector('button.se","originalError":"Bad escaped character in JSON at position 368 (line 7 column 240)","sanitizedError":"Bad escaped character in JSON at position 368 (line 7 column 240)"}}
2025-11-04 14:56:57 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: ```json
{
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__applescript_execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"\n    activate\n    set bounds of front window to {0, 0, 1440, 900}\n    open location \"https://www.netflix.com\"\n    delay 5\n    do JavaScript \"document.querySelector('input[name=\\\'searchQuery\\\\]').value = 'The Creator (2023)'\" in document 1\n    delay 2\n    do JavaScript \"document.querySelector('b... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Bad escaped character in JSON at position 368 (line 7 column 240)"}}
2025-11-04 14:56:57 [ERROR] [MCP-TODO] Failed to plan tools for item 1.8.2: Failed to parse tool plan: Bad escaped character in JSON at position 368 (line 7 column 240) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.8.2","errorName":"Error","stack":"Error: Failed to parse tool plan: Bad escaped character in JSON at position 368 (line 7 column 240)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2772:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1577:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async ..."}}
2025-11-04 14:57:35 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:57:49 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:57:52 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:57:56 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:57:56 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.8.2_verify_attempt2_full_screen_1762261065794.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:57:56 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:58:29 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 14:58:47 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:58:50 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:58:54 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:58:54 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.9_verify_attempt2_full_screen_1762261123068.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:58:54 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 14:59:04 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 14:59:12 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:00:22 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:00:22 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:00:22 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:00:30 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:00:38 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:00:47 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:00:47 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:00:47 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:00:50 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-04 15:01:00 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:01:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:01:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:01:18 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:01:18 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:01:26 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:01:35 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:01:46 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1602:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:01:46 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:01:46 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:01:46 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 15:01:46 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 15:01:57 [ERROR] mcp-server {"metadata":{}}
2025-11-04 15:02:30 [ERROR] Failed to get correction from LLM {"metadata":{"error":"this.llmClient.generateResponse is not a function"}}
2025-11-04 15:02:30 [ERROR] Failed to get correction from LLM {"metadata":{"attempt":1,"error":"this.llmClient.generateResponse is not a function"}}
2025-11-04 15:02:41 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-04 15:04:14 [ERROR] mcp-server {"metadata":{}}
2025-11-04 15:06:13 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 15:06:27 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:06:30 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:06:34 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:06:34 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.1_verify_attempt2_full_screen_1762261583524.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:06:34 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:07:03 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 15:07:19 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:07:27 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:07:31 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:07:31 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.2_verify_attempt2_full_screen_1762261632952.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:07:31 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:08:00 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 15:08:14 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:08:17 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:08:25 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:08:25 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.3_verify_attempt2_full_screen_1762261689993.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:08:25 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:08:55 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at process.processTicksAndRejections (node:internal/pr..."}}
2025-11-04 15:09:09 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:09:12 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:09:14 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 15:09:14 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 15:09:16 [ERROR] [VISION] API call failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:09:16 [ERROR] [VISION] Analysis failed: Request failed with status code 500 {"metadata":{"category":"vision-analysis","component":"vision-analysis","screenshotPath":"/tmp/atlas_visual/screenshot_item_1.4_verify_attempt2_full_screen_1762261744896.png","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:09:16 [ERROR] [VISUAL-GRISHA] ❌ Visual verification failed: Request failed with status code 500 {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-11-04 15:09:57 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 15:09:57 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762261756424: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762261756424","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 15:10:38 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 15:10:38 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762261756424: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762261756424","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 15:11:19 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 15:11:19 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.4_1762261756424: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.4_1762261756424","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 15:11:19 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:11:19 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:4066:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:776:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:49)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1621:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:12:03 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 15:12:03 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 15:12:44 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 15:12:44 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 15:13:25 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 15:13:25 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 15:13:25 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:13:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1149:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:14:05 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 15:14:05 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 15:14:14 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 15:14:14 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 15:14:46 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1481:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 15:14:46 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.5,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1560:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1128:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 15:15:20 [ERROR] mcp-server {"metadata":{}}
2025-11-04 15:18:12 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 15:18:12 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 15:18:12 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 15:18:12 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 15:18:16 [ERROR] [MCP-TODO] LLM API error: 500 Internal Server Error {"metadata":{"category":"mcp-todo","component":"mcp-todo","status":500,"data":"{\"error\":{\"message\":\"Rate limit exceeded, token rotated\",\"type\":\"provider_error\",\"provider\":\"atlas\",\"code\":\"RATE_LIMIT\"}}","url":"http://localhost:4000/v1/chat/completions","method":"post"}}
2025-11-04 15:18:16 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-04 15:18:16 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-04 15:18:16 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Request failed with status code 500","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1166:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-04 15:18:16 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Request failed with status code 500","sessionId":"session_1762262290148_hr91vw50d","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1166:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-04 15:19:20 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 15:19:20 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 15:19:20 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 15:19:20 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 15:19:24 [ERROR] [MCP-TODO] LLM API error: 500 Internal Server Error {"metadata":{"category":"mcp-todo","component":"mcp-todo","status":500,"data":"{\"error\":{\"message\":\"Rate limit exceeded, token rotated\",\"type\":\"provider_error\",\"provider\":\"atlas\",\"code\":\"RATE_LIMIT\"}}","url":"http://localhost:4000/v1/chat/completions","method":"post"}}
2025-11-04 15:19:24 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-04 15:19:24 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-04 15:19:24 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Request failed with status code 500","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1166:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-04 15:19:24 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Request failed with status code 500","sessionId":"session_1762262357726_ol7s2dcjh","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1166:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-04 15:20:30 [ERROR] mcp-server {"metadata":{}}
2025-11-04 15:20:50 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-11-04 15:20:50 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:241:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{}}
2025-11-04 15:20:50 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-11-04 15:20:50 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error","provider":"atlas","code":"RATE_LIMIT"}} {"metadata":{}}
2025-11-04 15:20:54 [ERROR] [MCP-TODO] LLM API error: 500 Internal Server Error {"metadata":{"category":"mcp-todo","component":"mcp-todo","status":500,"data":"{\"error\":{\"message\":\"Rate limit exceeded, token rotated\",\"type\":\"provider_error\",\"provider\":\"atlas\",\"code\":\"RATE_LIMIT\"}}","url":"http://localhost:4000/v1/chat/completions","method":"post"}}
2025-11-04 15:20:54 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-04 15:20:54 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-04 15:20:54 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Request failed with status code 500","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1166:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-04 15:20:54 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Request failed with status code 500","sessionId":"session_1762262448654_668dq2tdv","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1166:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-04 15:25:30 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 15:25:30 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 15:25:30 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:26:04 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:26:16 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:26:29 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:26:34 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 575 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Попередній крок не вдався через помилку виконання інструменту. Потрібно уточнити назву фільму та рік випуску вручну, щоб продовжити пошук.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Уточнити назву фільму та рік випуску вручну\",\n      \"success_criteria\": \"Назва фільму та рік випуску уточнені\",\n      \"fallback_options\": [\"Використати альтернативні назви фільму\", \"Знайти інформацію про фільм на іншому сайті\"],\n      \"max_att"}}
2025-11-04 15:26:43 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:26:58 [ERROR] llm-tool-validator {"metadata":{}}
2025-11-04 15:26:58 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 15:26:58 [ERROR] tetyana-tool-system {"metadata":{}}
2025-11-04 15:27:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.2","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:27:30 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.2","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:27:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.2","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWorkf..."}}
2025-11-04 15:27:40 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:27:40 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1153:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:27:50 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.2","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:28:00 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.2","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:28:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1.5.2: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.5.2","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 15:28:09 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:28:09 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1153:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1518:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 15:28:12 [ERROR] Item 1.6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.6}}
2025-11-04 15:30:15 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:30:30 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 15:30:30 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 15:30:38 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:31:45 [ERROR] mcp-server {"metadata":{}}
2025-11-04 15:33:00 [ERROR] mcp-server {"metadata":{}}
2025-11-04 15:35:37 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 15:35:37 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 15:35:46 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 15:35:46 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 15:36:54 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Bad control character in string literal in JSON at position 169 (line 7 column 53). Sanitized error: Expected ',' or '}' after property value in JSON at position 263 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [\n    {\n      \"server\": \"applescript\",\n      \"tool\": \"applescript__execute\",\n      \"parameters\": {\n        \"code_snippet\": \"tell application \\\"Safari\\\"\n    activate\n    tell window 1\n        set current tab to (make new tab with properties {URL:\\\"https://www.google.com\\\"})\n        set current tab's index to 1\n        delay 2\n    end tell\nend tell\"\n      }\n    }\n  ],\n  \"reasoning\": \"відкриваю Safari та завантажую сторінку google.com\",\n  \"tts_phrase\": \"відкриваю Safari та заванта","originalError":"Bad control character in string literal in JSON at position 169 (line 7 column 53)","sanitizedError":"Expected ',' or '}' after property value in JSON at position 263 (line 7 column 147)"}}
2025-11-04 15:36:54 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [
    {
      "server": "applescript",
      "tool": "applescript__execute",
      "parameters": {
        "code_snippet": "tell application \"Safari\"
    activate
    tell window 1
        set current tab to (make new tab with properties {URL:\"https://www.google.com\"})
        set current tab's index to 1
        delay 2
    end tell
end tell"
      }
    }
  ],
  "reasoning": "відкриваю Safari та завантажую сторінку google.com",
  "tts_phrase": "відкриваю Safari та заванта... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or '}' after property value in JSON at position 263 (line 7 column 147)"}}
2025-11-04 15:36:54 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 263 (line 7 column 147) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or '}' after property value in JSON at position 263 (line 7 column 147)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2827:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1581:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:5..."}}
2025-11-04 15:38:00 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 15:38:00 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 15:39:14 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:39:24 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:40:45 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 15:42:45 [ERROR] mcp-server {"metadata":{}}
2025-11-04 15:47:45 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 15:47:45 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 15:52:36 [ERROR] mcp-server {"metadata":{}}
2025-11-04 15:57:35 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 15:57:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:02:35 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:02:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:06:13 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at runNextTicks (node:internal/process/task_queues:65:..."}}
2025-11-04 16:07:35 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:07:35 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:08:25 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 16:08:51 [ERROR] repetition-inspector {"metadata":{}}
2025-11-04 16:09:00 [ERROR] mcp-server {"metadata":{}}
2025-11-04 16:14:00 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:14:00 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:18:17 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.6_1762265888983: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.6_1762265888983","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async MCPTodoManag..."}}
2025-11-04 16:18:25 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.6_1762265888983: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.6_1762265888983","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 16:18:35 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.6_1762265888983: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.6_1762265888983","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1606:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev..."}}
2025-11-04 16:18:35 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 16:18:35 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: No tool calls generated - plan is empty
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1153:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:4154:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:777:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:275:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1628:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 16:19:00 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:19:00 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:19:40 [ERROR] mcp-server {"metadata":{}}
2025-11-04 16:20:17 [ERROR] mcp-server {"metadata":{}}
2025-11-04 16:21:53 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 16:21:53 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 16:22:03 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 16:22:03 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 16:25:17 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:25:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:27:20 [ERROR] mcp-server {"metadata":{}}
2025-11-04 16:27:20 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:27:20 [ERROR] tool-dispatcher {"metadata":{}}
2025-11-04 16:28:50 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.9_1762266521719: Cannot plan tools: This task requires verifying the presence of a video player on a webpage, which is outside the scope of AppleScript capabilities. AppleScript is not suitable for direct webpage DOM inspection or video player detection. A browser automation tool like Playwright or Selenium would be more appropriate for this task. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.9_1762266521719","errorName":"Error","stack":"Error: Cannot plan tools: This task requires verifying the presence of a video player on a webpage, which is outside the scope of AppleScript capabilities. AppleScript is not suitable for direct webpage DOM inspection or video player detection. A browser automation tool like Playwright or Selenium would be more appropriate for this task.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1598:17)\n    at runNextTicks (no..."}}
2025-11-04 16:28:59 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.9_1762266521719: Cannot plan tools: This task requires verifying the presence of a video player on a webpage. AppleScript alone cannot directly interact with webpage elements to verify a video player. A specialized tool like Playwright or Selenium would be better suited for this task. No AppleScript tool call is appropriate here. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.9_1762266521719","errorName":"Error","stack":"Error: Cannot plan tools: This task requires verifying the presence of a video player on a webpage. AppleScript alone cannot directly interact with webpage elements to verify a video player. A specialized tool like Playwright or Selenium would be better suited for this task. No AppleScript tool call is appropriate here.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1598:17)\n    at runNextTicks (node:internal/proces..."}}
2025-11-04 16:30:17 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:30:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:35:17 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:35:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:40:17 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:40:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:45:17 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:45:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:46:44 [ERROR] worker-pool {"metadata":{}}
2025-11-04 16:46:44 [ERROR] worker-pool {"metadata":{}}
2025-11-04 16:46:44 [ERROR] worker-pool {"metadata":{}}
2025-11-04 16:46:44 [ERROR] worker-pool {"metadata":{}}
2025-11-04 16:46:44 [ERROR] worker-pool {"metadata":{}}
2025-11-04 16:46:44 [ERROR] worker-pool {"metadata":{}}
2025-11-04 16:50:17 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:50:17 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:53:30 [ERROR] mcp-server {"metadata":{}}
2025-11-04 16:56:50 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: this._analyzeDataQuality is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: this._analyzeDataQuality is not a function\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:965:35)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:821:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyIt..."}}
2025-11-04 16:57:04 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: this._analyzeDataQuality is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: this._analyzeDataQuality is not a function\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:965:35)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:821:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyIt..."}}
2025-11-04 16:57:45 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: this._analyzeDataQuality is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: this._analyzeDataQuality is not a function\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:965:35)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:821:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async GrishaVerifyIt..."}}
2025-11-04 16:58:30 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 16:58:30 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 16:58:56 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:00:13 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1485:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:00:13 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1564:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:01:14 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1485:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:01:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1564:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:02:14 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1485:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:02:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1564:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:02:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 17:02:14 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1153:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1525:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 17:03:14 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1485:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:03:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1564:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:03:39 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:04:59 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:06:37 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:06:37 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:07:58 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:07:58 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:08:44 [ERROR] [MCP-TODO] LLM API error: 500 Internal Server Error {"metadata":{"category":"mcp-todo","component":"mcp-todo","status":500,"data":"{\"error\":{\"message\":\"Connection error.\",\"type\":\"provider_error\",\"provider\":\"atlas\",\"code\":\"API_ERROR\"}}","url":"http://localhost:4000/v1/chat/completions","method":"post"}}
2025-11-04 17:08:44 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-04 17:08:44 [ERROR] atlas-todo-planning {"metadata":{}}
2025-11-04 17:08:44 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Request failed with status code 500","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1166:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-04 17:08:44 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Request failed with status code 500","sessionId":"test-final-2","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1166:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13"}}
2025-11-04 17:09:18 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:09:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:09:18 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 17:09:18 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1157:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1525:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 17:09:59 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 17:09:59 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 17:10:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:10:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:11:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:11:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:12:21 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:12:21 [ERROR] [MCP-TODO] Failed to plan tools for item 1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.1,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:12:21 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 17:12:21 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1157:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1525:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 17:12:24 [ERROR] Item 1.2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":1.2}}
2025-11-04 17:13:20 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:13:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:14:21 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:14:21 [ERROR] [MCP-TODO] Failed to plan tools for item 1.3: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1.3,"errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:14:59 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 17:14:59 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 17:15:29 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:20:28 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 17:20:28 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 17:25:53 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:27:54 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:30:25 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:33:09 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:33:59 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:36:20 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 760 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними. Потрібно розбити їх на менші кроки та додати проміжні етапи верифікації.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari запущено\",\n      \"success_criteria\": \"Safari запущено\",\n      \"fallback_options\": [\"Спробувати відкрити Safari знову\", \"Використати альтернативний браузер\"],\n      \"max_attempts\": 2\n    },\n    {\n      \"action\": \"Перевірит"}}
2025-11-04 17:37:09 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 929 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними, оскільки MCP інструменти виконані, але результат не відповідає очікуванням. Потрібно додати проміжні кроки для перевірки стану Safari.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari відкрито за допомогою AppleScript\",\n      \"success_criteria\": \"AppleScript повертає підтвердження, що Safari відкрито\",\n      \"fallback_options\": [\"Перевірити "}}
2025-11-04 17:37:45 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 784 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є надто загальними. Потрібно розбити їх на конкретніші кроки, щоб забезпечити точну перевірку.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи вікно Safari відображається на екрані\",\n      \"success_criteria\": \"Вікно Safari видно на екрані\",\n      \"fallback_options\": [\"Спробувати відкрити Safari знову\", \"Перевірити через Dock\"],\n      \"max_attempts\": 2\n    },\n    {\n "}}
2025-11-04 17:38:32 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 675 (line 14 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними, оскільки MCP інструменти виконані, але результат не відповідає критеріям. Потрібно скорегувати критерії успіху та додати проміжні кроки для перевірки.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari відкрито за допомогою AppleScript\",\n      \"success_criteria\": \"AppleScript повертає підтвердження, що Safari відкрито\",\n      \"fallback_options"}}
2025-11-04 17:38:59 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 17:38:59 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 17:40:29 [ERROR] [GRISHA-ROUTING] ❌ Eligibility analysis failed: Cannot read properties of null (reading 'substring') {"metadata":{"category":"grisha-eligibility","component":"grisha-verification-eligibility","stack":"TypeError: Cannot read properties of null (reading 'substring')\n    at GrishaVerificationEligibilityProcessor._parseEligibilityResponse (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:309:36)\n    at GrishaVerificationEligibilityProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verification-eligibility-processor.js:95:35)\n    at runNextTicks (node:internal/process/task_queues:65:..."}}
2025-11-04 17:41:15 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 858 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними. Потрібно розбити цю перевірку на менші кроки та додати проміжні етапи для більш точної верифікації.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari відкрито за допомогою AppleScript\",\n      \"success_criteria\": \"AppleScript повертає підтвердження, що Safari запущено\",\n      \"fallback_options\": [\"Перевірити через Activity Monitor\", \"Спробуват"}}
2025-11-04 17:42:43 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 828 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними. Потрібно розбити перевірку на менші кроки та додати проміжні етапи для більш точної верифікації.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari запущено\",\n      \"success_criteria\": \"Safari запущено і відображається в списку активних програм\",\n      \"fallback_options\": [\"Перезапустити Safari\", \"Використати альтернативний браузер\"],\n      \"m"}}
2025-11-04 17:43:33 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 873 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними. Потрібно розбити перевірку на менші кроки та додати проміжні етапи для більш точної верифікації.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari відкрито за допомогою AppleScript\",\n      \"success_criteria\": \"Отримано підтвердження, що Safari запущено\",\n      \"fallback_options\": [\"Перевірити через список активних додатків\", \"Спробувати відкр"}}
2025-11-04 17:43:59 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 17:43:59 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 17:44:13 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 885 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними. Потрібно розбити перевірку на менші кроки та додати проміжні етапи верифікації.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari відкрито за допомогою AppleScript\",\n      \"success_criteria\": \"AppleScript повертає підтвердження, що Safari запущено\",\n      \"fallback_options\": [\"Перевірити через список активних додатків\", \"Спробувати відкрити S"}}
2025-11-04 17:45:35 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 778 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними. Потрібно розбити перевірку на менші кроки та додати проміжні етапи верифікації.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи вікно Safari відображається на екрані\",\n      \"success_criteria\": \"Вікно Safari видно на екрані\",\n      \"fallback_options\": [\"Використати інший браузер\", \"Перезапустити Safari\"],\n      \"max_attempts\": 2\n    },\n    {\n     "}}
2025-11-04 17:46:25 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:48:01 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:48:01 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 17:48:09 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:48:09 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 17:48:27 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:48:27 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 17:48:35 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:48:35 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 17:49:11 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:49:11 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 17:49:19 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:49:19 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 17:50:52 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 947 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерій успіху 'Вікно Safari видиме на екрані' є надто загальним і нереалістичним. Замість цього, ми розіб'ємо його на менші, більш конкретні кроки для перевірки видимості вікна Safari.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи вікно Safari є активним вікном на екрані\",\n      \"success_criteria\": \"Вікно Safari є активним вікном\",\n      \"fallback_options\": [\"Перевірити через список відкритих вікон\", \"Викори"}}
2025-11-04 17:51:02 [ERROR] mcp-server {"metadata":{}}
2025-11-04 17:52:06 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:52:06 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 17:52:16 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:52:16 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 17:52:32 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:52:32 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-11-04 17:52:41 [ERROR] [VISUAL] Active window capture failed: Command failed: osascript -e '
                tell application "System Events"
                    tell process "Safari"
                        set windowPosition to position of window 1
                        set windowSize to size of window 1
                        return (item 1 of windowPosition) & "," & (item 2 of windowPosition) & "," & (item 1 of windowSize) & "," & (item 2 of windowSize)
                    end tell
                end tell
            '
138:146: execution error: System Events отримав помилку: Не вдалося отримати window 1 of process "Safari". Неправильний індекс. (-1719)
 {"metadata":{"category":"visual-capture","targetApp":"Safari"}}
2025-11-04 17:52:41 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-11-04 17:53:56 [ERROR] [STAGE-3.5-MCP] ❌ Replan failed: timeout of 60000ms exceeded {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","stack":"AxiosError: timeout of 60000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:519:28)\n    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)\n    at Axios.request..."}}
2025-11-04 17:55:30 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 653 (line 9 column 3). Sanitized error: Expected ',' or ']' after array element in JSON at position 653 (line 9 column 3) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [{\n    \"server\": \"applescript\",\n    \"tool\": \"applescript__execute\",\n    \"parameters\": {\n      \"code_snippet\": \"tell application \\\"System Events\\\"\\n    set safariOpen to (count of (every process whose name is \\\"Safari\\\")) > 0\\n    if safariOpen then\\n        tell application \\\"Safari\\\"\\n            activate\\n            delay 0.5\\n        end tell\\n        tell application \\\"System Events\\\"\\n            tell process \\\"Safari\\\"\\n                set frontmost to true\\n            ","originalError":"Expected ',' or ']' after array element in JSON at position 653 (line 9 column 3)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 653 (line 9 column 3)"}}
2025-11-04 17:55:30 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [{
    "server": "applescript",
    "tool": "applescript__execute",
    "parameters": {
      "code_snippet": "tell application \"System Events\"\n    set safariOpen to (count of (every process whose name is \"Safari\")) > 0\n    if safariOpen then\n        tell application \"Safari\"\n            activate\n            delay 0.5\n        end tell\n        tell application \"System Events\"\n            tell process \"Safari\"\n                set frontmost to true\n            ... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 653 (line 9 column 3)"}}
2025-11-04 17:55:30 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.2.1_1762271724172: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 653 (line 9 column 3) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.2.1_1762271724172","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 653 (line 9 column 3)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2830:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1584:25)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:..."}}
2025-11-04 17:55:36 [ERROR] [MCP-TODO] ❌ JSON sanitization also failed. Original error: Expected ',' or ']' after array element in JSON at position 933 (line 9 column 3). Sanitized error: Expected ',' or ']' after array element in JSON at position 933 (line 9 column 3) {"metadata":{"category":"mcp-todo","component":"mcp-todo","originalResponse":"{\n  \"tool_calls\": [{\n    \"server\": \"applescript\",\n    \"tool\": \"applescript__execute\",\n    \"parameters\": {\n      \"code_snippet\": \"tell application \\\"System Events\\\"\\n    set safariOpen to (count of (every process whose name is \\\"Safari\\\")) > 0\\n    if safariOpen then\\n        tell application \\\"Safari\\\"\\n            activate\\n        end tell\\n        tell application \\\"System Events\\\"\\n            tell process \\\"Safari\\\"\\n                set frontmost to true\\n                set isFullScreen to","originalError":"Expected ',' or ']' after array element in JSON at position 933 (line 9 column 3)","sanitizedError":"Expected ',' or ']' after array element in JSON at position 933 (line 9 column 3)"}}
2025-11-04 17:55:36 [ERROR] [MCP-TODO] Failed to parse tool plan. Raw response: {
  "tool_calls": [{
    "server": "applescript",
    "tool": "applescript__execute",
    "parameters": {
      "code_snippet": "tell application \"System Events\"\n    set safariOpen to (count of (every process whose name is \"Safari\")) > 0\n    if safariOpen then\n        tell application \"Safari\"\n            activate\n        end tell\n        tell application \"System Events\"\n            tell process \"Safari\"\n                set frontmost to true\n                set isFullScreen to... [truncated] {"metadata":{"category":"mcp-todo","component":"mcp-todo","parseError":"Expected ',' or ']' after array element in JSON at position 933 (line 9 column 3)"}}
2025-11-04 17:55:36 [ERROR] [MCP-TODO] Failed to plan tools for item verify_1.2.1_1762271724172: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 933 (line 9 column 3) {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_1.2.1_1762271724172","errorName":"Error","stack":"Error: Failed to parse tool plan: Expected ',' or ']' after array element in JSON at position 933 (line 9 column 3)\n    at MCPTodoManager._parseToolPlan (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:2830:13)\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1584:25)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-mana..."}}
2025-11-04 17:56:02 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 17:56:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 17:56:42 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 888 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними. Потрібно розбити перевірку на менші кроки та додати проміжні етапи для більш точної верифікації.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari запущено в системі\",\n      \"success_criteria\": \"Safari запущено та відображається в списку активних програм\",\n      \"fallback_options\": [\"Перевірити через Activity Monitor\", \"Використати термінал д"}}
2025-11-04 17:57:23 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:57:23 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.2.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:58:04 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:58:04 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.2.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:59:00 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:59:00 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.2.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 17:59:00 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 17:59:00 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1157:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1525:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 17:59:55 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 17:59:55 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.2.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 18:00:36 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 18:00:36 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.2.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 18:01:02 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 18:01:02 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 18:01:17 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 18:01:17 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2.1.1: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.2.1.1","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 18:01:17 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 18:01:17 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Rate limit exceeded after 3 retries. Please wait and try again.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1157:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1525:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-11-04 18:02:13 [ERROR] [MCP-TODO] LLM API call failed after 3 attempts: RATE_LIMIT_EXCEEDED {"metadata":{"category":"mcp-todo","component":"mcp-todo","errorName":"Error","code":"undefined","stack":"Error: RATE_LIMIT_EXCEEDED\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1489:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/te..."}}
2025-11-04 18:02:13 [ERROR] [MCP-TODO] Failed to plan tools for item 1.2.1.2: Rate limit exceeded after 3 retries. Please wait and try again. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"1.2.1.2","errorName":"Error","stack":"Error: Rate limit exceeded after 3 retries. Please wait and try again.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1567:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1136:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/G..."}}
2025-11-04 18:03:09 [ERROR] mcp-server {"metadata":{}}
2025-11-04 18:08:19 [ERROR] mcp-server {"metadata":{}}
2025-11-04 18:12:23 [ERROR] [PORT-4000] Timeout - port 4000 too slow {"metadata":{"category":"vision-analysis","note":"OpenRouter fallback disabled - vision parsing not working"}}
2025-11-04 18:12:23 [ERROR] [VISION] API call failed: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled. {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"Error: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled.\n    at VisionAnalysisService._callPort4000VisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:852:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:549:9)\n    at process.processTimers (node:internal/timers:523:7)\n    at async VisionAnalysisService._callVisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orch..."}}
2025-11-04 18:13:19 [ERROR] mcp-manager {"metadata":{}}
2025-11-04 18:13:19 [ERROR] Failed to save to MCP Memory: {"metadata":{}}
2025-11-04 18:14:38 [ERROR] [STAGE-3.5-MCP] Failed to parse replan response: Expected ',' or '}' after property value in JSON at position 845 (line 20 column 31) {"metadata":{"category":"atlas-replan-todo","component":"atlas-replan-todo","response":"{\n  \"replanned\": true,\n  \"reasoning\": \"Критерії успіху для перевірки відкриття Safari є нереалістичними. Потрібно розбити перевірку на менші кроки та додати проміжні етапи для більш точного контролю.\",\n  \"strategy\": \"replan_and_continue\",\n  \"new_items\": [\n    {\n      \"action\": \"Перевірити, чи Safari запущено в системі\",\n      \"success_criteria\": \"Safari відображається в списку запущених програм\",\n      \"fallback_options\": [\"Використати альтернативний метод перевірки\", \"Перезапустити Safari\"],\n  "}}
