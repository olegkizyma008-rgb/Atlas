# ATLAS v5.0 - Orchestrator Workflow (–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å)

> **–í–µ—Ä—Å—ñ—è:** 5.0.0  
> **–î–∞—Ç–∞:** 19 –∂–æ–≤—Ç–Ω—è 2025  
> **–ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞:** –ê–Ω–∞–ª—ñ–∑ —Ä–µ–∞–ª—å–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ —Å–∏—Å—Ç–µ–º–∏

---

## üîÑ –ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è

### Stage 0: Mode Selection (–í–∏–±—ñ—Ä —Ä–µ–∂–∏–º—É)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –≤–∏–∑–Ω–∞—á–∞—î –π–æ–≥–æ —Ç–∏–ø - —Ü–µ –ø—Ä–æ—Å—Ç–∞ —Ä–æ–∑–º–æ–≤–∞ (chat) —á–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è (task).

**–ü—Ä–æ—Ü–µ—Å:**
1. –ê–Ω–∞–ª—ñ–∑ —Ç–µ–∫—Å—Ç—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
2. –ü–æ—à—É–∫ –º–∞—Ä–∫–µ—Ä—ñ–≤ –∑–∞–≤–¥–∞–Ω–Ω—è (–∫–æ–º–∞–Ω–¥–∏, –∑–∞–ø–∏—Ç–∏ –Ω–∞ –¥—ñ—ó)
3. –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è: CHAT –∞–±–æ TASK
4. –Ø–∫—â–æ CHAT ‚Üí –ø—Ä—è–º–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –±–µ–∑ TODO
5. –Ø–∫—â–æ TASK ‚Üí –ø–µ—Ä–µ–¥–∞—á–∞ –¥–æ Atlas –¥–ª—è –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è

**–ú–æ–¥–µ–ª—å:** `atlas-ministral-3b` (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.05)  
**–ß–æ–º—É —à–≤–∏–¥–∫–∞ –º–æ–¥–µ–ª—å:** –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—ñ, —Ç—ñ–ª—å–∫–∏ —Ç–æ—á–Ω—ñ—Å—Ç—å

**–ü—Ä–∏–∫–ª–∞–¥–∏:**
- "–ü—Ä–∏–≤—ñ—Ç, —è–∫ —Å–ø—Ä–∞–≤–∏?" ‚Üí CHAT (–≤—ñ–¥–ø–æ–≤—ñ–¥—å –±–µ–∑ TODO)
- "–°—Ç–≤–æ—Ä–∏ —Ñ–∞–π–ª README" ‚Üí TASK (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è TODO –ø–ª–∞–Ω—É)
- "–©–æ —Ç–∏ –≤–º—ñ—î—à?" ‚Üí CHAT
- "–ó–Ω–∞–π–¥–∏ —Ü—ñ–Ω–∏ –Ω–∞ Ford Mustang" ‚Üí TASK

---

## üìã Stage 1-MCP: Atlas TODO Planning (–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è)

**–•—Ç–æ:** Atlas (Coordinator Agent)  
**–ú–æ–¥–µ–ª—å:** `copilot-gpt-4o` (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.3)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
Atlas –∞–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ —Å—Ç–≤–æ—Ä—é—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –ø–ª–∞–Ω –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —É –≤–∏–≥–ª—è–¥—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ–≥–æ TODO —Å–ø–∏—Å–∫—É.

**–ü—Ä–æ—Ü–µ—Å:**

### 1. –û—Ü—ñ–Ω–∫–∞ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ (1-10)
- **1-3:** –¢—Ä–∏–≤—ñ–∞–ª—å–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è (–æ–¥–∏–Ω —Ñ–∞–π–ª, –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)
- **4-6:** –ü—Ä–æ—Å—Ç—ñ –∑–∞–≤–¥–∞–Ω–Ω—è (–¥–µ–∫—ñ–ª—å–∫–∞ –∫—Ä–æ–∫—ñ–≤)
- **7-8:** –°–∫–ª–∞–¥–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è (–±–∞–≥–∞—Ç–æ –µ—Ç–∞–ø—ñ–≤)
- **9-10:** –î—É–∂–µ —Å–∫–ª–∞–¥–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü—ñ—è –±–∞–≥–∞—Ç—å–æ—Ö —Å–∏—Å—Ç–µ–º)

### 2. –í–∏–±—ñ—Ä —Ä–µ–∂–∏–º—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- **Standard Mode (complexity 1-4):** 1-3 –ø—É–Ω–∫—Ç–∏, –ø—Ä–æ—Å—Ç—ñ –ª—ñ–Ω—ñ–π–Ω—ñ –¥—ñ—ó
- **Extended Mode (complexity 5-10):** 4-20+ –ø—É–Ω–∫—Ç—ñ–≤, –º–Ω–æ–∂–∏–Ω–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

**–í–ê–ñ–õ–ò–í–û:** –ù–µ–º–∞—î –∂–æ—Ä—Å—Ç–∫–æ–≥–æ –æ–±–º–µ–∂–µ–Ω–Ω—è –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—É–Ω–∫—Ç—ñ–≤. Atlas —Å—Ç–≤–æ—Ä—é—î —Å—Ç—ñ–ª—å–∫–∏ items, —Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è –∑–∞–≤–¥–∞–Ω–Ω—è.

### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è TODO items

–ö–æ–∂–µ–Ω –ø—É–Ω–∫—Ç –º—ñ—Å—Ç–∏—Ç—å:
```json
{
  "id": 1,
  "action": "–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –¥—ñ—è (–¥—ñ—î—Å–ª–æ–≤–æ + –æ–±'—î–∫—Ç)",
  "mcp_servers": ["filesystem", "playwright"],
  "parameters": {
    "path": "/Desktop/file.txt",
    "content": "Text content"
  },
  "success_criteria": "–ß—ñ—Ç–∫–∏–π –∫—Ä–∏—Ç–µ—Ä—ñ–π —É—Å–ø—ñ—Ö—É",
  "fallback_options": ["–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 1", "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ 2"],
  "dependencies": [1, 2],
  "tts": {
    "start": "–ö–æ—Ä–æ—Ç–∫–∏–π —Å—Ç–∞—Ç—É—Å",
    "success": "–£—Å–ø—ñ—Ö",
    "failure": "–ü–æ–º–∏–ª–∫–∞"
  }
}
```

**–ü—Ä–∏–Ω—Ü–∏–ø–∏ –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è:**
- ‚úÖ –û–¥–∏–Ω –ø—É–Ω–∫—Ç = –æ–¥–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –¥—ñ—è
- ‚úÖ Action –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ –¥—ñ—î—Å–ª–æ–≤–∞
- ‚úÖ Success criteria —á—ñ—Ç–∫—ñ —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–Ω—ñ
- ‚úÖ Dependencies —Ç—ñ–ª—å–∫–∏ backward (item 3 –º–æ–∂–µ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ 1-2, –∞–ª–µ –ù–ï –≤—ñ–¥ 4+)
- ‚úÖ –ú–∞–∫—Å–∏–º—É–º 2 MCP —Å–µ—Ä–≤–µ—Ä–∏ –Ω–∞ –æ–¥–∏–Ω item (—ñ–¥–µ–∞–ª—å–Ω–æ 1)
- ‚ùå Atlas –ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ tools (—Ü–µ —Ä–æ–±–æ—Ç–∞ Tetyana)

**–©–æ –ù–ï —Ä–æ–±–∏—Ç—å Atlas:**
- ‚ùå –ù–µ –æ–±–∏—Ä–∞—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ tools (read_file, write_file, etc.)
- ‚ùå –ù–µ –æ–±–º–µ–∂—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å items (—Å—Ç–≤–æ—Ä—é—î —Å—Ç—ñ–ª—å–∫–∏, —Å–∫—ñ–ª—å–∫–∏ —Ç—Ä–µ–±–∞)
- ‚ùå –ù–µ –∑–º—ñ—à—É—î —Ä—ñ–∑–Ω—ñ –¥—ñ—ó –≤ –æ–¥–Ω–æ–º—É –ø—É–Ω–∫—Ç—ñ

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏—Ö–æ–¥—É:**
```json
{
  "mode": "extended",
  "complexity": 7,
  "items": [
    {"id": 1, "action": "–í—ñ–¥–∫—Ä–∏—Ç–∏ —Å–∞–π—Ç auto.ria.com", ...},
    {"id": 2, "action": "–ó–Ω–∞–π—Ç–∏ Ford Mustang", ...},
    {"id": 3, "action": "–ó—ñ–±—Ä–∞—Ç–∏ —Ü—ñ–Ω–∏", ...},
    {"id": 4, "action": "–°—Ç–≤–æ—Ä–∏—Ç–∏ Excel —Ñ–∞–π–ª", ...}
  ]
}
```

---

## üîÅ Item-by-Item Execution Loop (–¶–∏–∫–ª –≤–∏–∫–æ–Ω–∞–Ω–Ω—è)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
–°–∏—Å—Ç–µ–º–∞ –±–µ—Ä–µ –∫–æ–∂–µ–Ω TODO item –ø–æ —á–µ—Ä–∑—ñ —Ç–∞ –≤–∏–∫–æ–Ω—É—î –π–æ–≥–æ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—É–ø–Ω—ñ –µ—Ç–∞–ø–∏. –¶–µ –ù–ï –ø–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è - items –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ.

**–õ–æ–≥—ñ–∫–∞:**
```
FOR EACH item IN todo_list:
  1. Server Selection (Stage 2.0)
  2. Plan Tools (Stage 2.1)
  3. Execute Tools (Stage 2.2)
  4. Verify Item (Stage 2.3)
  
  IF verified == false:
    5. Adjust TODO (Stage 3)
    IF still failing after 3 attempts:
      6. Replan TODO (Stage 3.5)
  
  IF verified == true OR skipped:
    CONTINUE to next item
```

**–ü–µ—Ä–µ–≤–∞–≥–∏ item-by-item:**
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —à–≤–∏–¥–∫–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- –ì—Ä–∞–Ω—É–ª—è—Ä–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- –õ–µ–≥—à–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—ñ—Å–ª—è –∑–±–æ—é
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

---

## üéØ Stage 2.0-MCP: Server Selection (–í–∏–±—ñ—Ä —Å–µ—Ä–≤–µ—Ä—ñ–≤)

**–•—Ç–æ:** MCPManager (System Service)  
**–ú–æ–¥–µ–ª—å:** –ë–µ–∑ LLM (rule-based)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
–ù–∞ –æ—Å–Ω–æ–≤—ñ `action` —Ç–∞ `mcp_servers` –∑ TODO item —Å–∏—Å—Ç–µ–º–∞ —Ñ—ñ–ª—å—Ç—Ä—É—î —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ MCP —Å–µ—Ä–≤–µ—Ä–∏ —Ç–∞ —ó—Ö tools.

**–ü—Ä–æ—Ü–µ—Å:**
1. –ß–∏—Ç–∞—î –ø–æ–ª–µ `mcp_servers` –∑ TODO item (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: ["filesystem", "playwright"])
2. –í–∏—Ç—è–≥—É—î —Ç—ñ–ª—å–∫–∏ —Ü—ñ —Å–µ—Ä–≤–µ—Ä–∏ –∑—ñ —Å–ø–∏—Å–∫—É –≤—Å—ñ—Ö 6 –¥–æ—Å—Ç—É–ø–Ω–∏—Ö
3. –§–æ—Ä–º—É—î —Å–ø–∏—Å–æ–∫ tools –¢–Ü–õ–¨–ö–ò –∑ –æ–±—Ä–∞–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤
4. –ü–µ—Ä–µ–¥–∞—î –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏–π —Å–ø–∏—Å–æ–∫ Tetyana

**–ù–∞–≤—ñ—â–æ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è:**
- –ó–∞–º—ñ—Å—Ç—å 92 tools ‚Üí –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è 15-30 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö
- –ú–µ–Ω—à–µ —Ç–æ–∫–µ–Ω—ñ–≤ —É –ø—Ä–æ–º–ø—Ç—ñ
- –®–≤–∏–¥—à–∞ –æ–±—Ä–æ–±–∫–∞ LLM
- –ú–µ–Ω—à–µ —à–∞–Ω—Å—ñ–≤ –Ω–∞ –ø–æ–º–∏–ª–∫—É (–æ–±—Ä–∞—Ç–∏ –Ω–µ—ñ—Å–Ω—É—é—á–∏–π tool)

**–ü—Ä–∏–∫–ª–∞–¥:**
```
TODO item: "–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª –Ω–∞ Desktop"
mcp_servers: ["filesystem"]

‚Üì –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è

Available tools (14 tools –∑ filesystem):
- read_file
- write_file
- create_directory
- list_directory
- ... (—Ç—ñ–ª—å–∫–∏ filesystem tools)
```

---

## üõ†Ô∏è Stage 2.1-MCP: Tetyana Plan Tools (–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è tools)

**–•—Ç–æ:** Tetyana (Executor Agent)  
**–ú–æ–¥–µ–ª—å:** `copilot-gpt-4o` (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.1)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
Tetyana –æ—Ç—Ä–∏–º—É—î TODO item —Ç–∞ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö tools –∑ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤. –á—ó –∑–∞–¥–∞—á–∞ - –æ–±—Ä–∞—Ç–∏ –ö–û–ù–ö–†–ï–¢–ù–Ü tools —Ç–∞ —ó—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.

**–ü—Ä–æ—Ü–µ—Å:**

### 1. –ê–Ω–∞–ª—ñ–∑ –∑–∞–≤–¥–∞–Ω–Ω—è
- –ß–∏—Ç–∞—î `action` —Ç–∞ `success_criteria` –∑ TODO item
- –†–æ–∑—É–º—ñ—î —â–æ —Å–∞–º–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑—Ä–æ–±–∏—Ç–∏
- –û—Ü—ñ–Ω—é—î —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å (2-5 tools –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)

### 2. –ü—ñ–¥–±—ñ—Ä tools
- –î–∏–≤–∏—Ç—å—Å—è –¢–Ü–õ–¨–ö–ò –Ω–∞ —Å–ø–∏—Å–æ–∫ {{AVAILABLE_TOOLS}} (–¥–∏–Ω–∞–º—ñ—á–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π)
- –û–±–∏—Ä–∞—î –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –Ω–∞–±—ñ—Ä tools –¥–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –º–µ—Ç–∏
- –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–≥–∞–¥—É—î tools, —è–∫–∏—Ö –Ω–µ–º–∞—î –≤ —Å–ø–∏—Å–∫—É

### 3. –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ
```json
{
  "tool_calls": [
    {
      "server": "filesystem",
      "tool": "write_file",
      "parameters": {
        "path": "~/Desktop/hello.txt",
        "content": "Hello World"
      },
      "reasoning": "–°—Ç–≤–æ—Ä—é—é —Ñ–∞–π–ª –∑ —Ç–µ–∫—Å—Ç–æ–º"
    }
  ],
  "reasoning": "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é write_file –¥–ª—è –ø—Ä—è–º–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ñ–∞–π–ª—É"
}
```

### 4. –í–∞–ª—ñ–¥–∞—Ü—ñ—è
MCPManager –ø–µ—Ä–µ–≤—ñ—Ä—è—î:
- ‚úÖ –ß–∏ —ñ—Å–Ω—É—î —Ç–∞–∫–∏–π server?
- ‚úÖ –ß–∏ —ñ—Å–Ω—É—î —Ç–∞–∫–∏–π tool –Ω–∞ —Ü—å–æ–º—É server?
- ‚úÖ –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏?

**–Ø–∫—â–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–µ –ø—Ä–æ–π—à–ª–∞:**
- Retry –¥–æ 3 —Ä–∞–∑—ñ–≤ –∑ feedback –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏
- –ü—Ä–∏–∫–ª–∞–¥ feedback: "Tool 'write_txt' –Ω–µ —ñ—Å–Ω—É—î, –¥–æ—Å—Ç—É–ø–Ω—ñ: write_file, read_file"

### 5. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ
–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ >5 tools:
```json
{
  "needs_split": true,
  "reasoning": "Item –∑–∞–Ω–∞–¥—Ç–æ —Å–∫–ª–∞–¥–Ω–∏–π, –ø–æ—Ç—Ä–µ–±—É—î >5 tools",
  "suggested_splits": [
    "–ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏—Ç–∏ —Å–∞–π—Ç",
    "–ö—Ä–æ–∫ 2: –ó—ñ–±—Ä–∞—Ç–∏ –¥–∞–Ω—ñ",
    "–ö—Ä–æ–∫ 3: –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç"
  ]
}
```

**–ö—Ä–∏—Ç–∏—á–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Tetyana:**
- ‚úÖ –¢–Ü–õ–¨–ö–ò tools –∑ {{AVAILABLE_TOOLS}} —Å–ø–∏—Å–∫—É
- ‚úÖ –ó–ê–í–ñ–î–ò –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —â–æ tool —ñ—Å–Ω—É—î –ø–µ—Ä–µ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º
- ‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (—Ä–µ–∞–ª—å–Ω—ñ paths, URLs, –Ω–µ –ø—Ä–∏–∫–ª–∞–¥–∏)
- ‚ùå –ù–ï –≤–∏–≥–∞–¥—É–≤–∞—Ç–∏ tools
- ‚ùå –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ tools –∑ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ —è–∫—â–æ —ó—Ö –Ω–µ–º–∞—î –≤ —Å–ø–∏—Å–∫—É
- ‚ùå –ù–ï –¥–æ–¥–∞–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ 5 tools (–∫—Ä–∞—â–µ —Ä–æ–∑–±–∏—Ç–∏ –Ω–∞ –∫—ñ–ª—å–∫–∞ items)

---

## ‚öôÔ∏è Stage 2.2-MCP: Tetyana Execute Tools (–í–∏–∫–æ–Ω–∞–Ω–Ω—è tools)

**–•—Ç–æ:** MCPManager + MCP Servers  
**–ü—Ä–æ—Ç–æ–∫–æ–ª:** JSON-RPC 2.0 —á–µ—Ä–µ–∑ stdio

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
–í–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–ª–∞–Ω–æ–≤–∞–Ω–∏—Ö tool_calls —á–µ—Ä–µ–∑ MCP protocol. –¶–µ –†–ï–ê–õ–¨–ù–ï –≤–∏–∫–æ–Ω–∞–Ω–Ω—è - —Ñ–∞–π–ª–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è, –±—Ä–∞—É–∑–µ—Ä –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è, –∫–æ–º–∞–Ω–¥–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è.

**–ü—Ä–æ—Ü–µ—Å:**

### 1. –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
```javascript
FOR EACH tool_call IN tool_calls:
  1. MCPManager —Å—Ç–≤–æ—Ä—é—î JSON-RPC –∑–∞–ø–∏—Ç
  2. –í—ñ–¥–ø—Ä–∞–≤–ª—è—î —á–µ—Ä–µ–∑ stdio –¥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞
  3. MCP —Å–µ—Ä–≤–µ—Ä –≤–∏–∫–æ–Ω—É—î –¥—ñ—é
  4. –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  5. –ó–±—ñ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
```

### 2. JSON-RPC –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è
```json
// Request
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "write_file",
    "arguments": {
      "path": "/Users/dev/Desktop/hello.txt",
      "content": "Hello World"
    }
  },
  "id": 123
}

// Response
{
  "jsonrpc": "2.0",
  "result": {
    "status": "success",
    "message": "File created successfully"
  },
  "id": 123
}
```

### 3. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
```
IF error.code == "invalid_params":
  ‚Üí Auto-correction (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤)
  ‚Üí Retry

IF error.code == "tool_not_found":
  ‚Üí Return error to Tetyana
  ‚Üí Replan tools

IF error.code == "timeout":
  ‚Üí Retry –∑ –∑–±—ñ–ª—å—à–µ–Ω–∏–º timeout
```

### 4. Parallel execution (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
–Ø–∫—â–æ —î –ù–ï–ó–ê–õ–ï–ñ–ù–Ü tools:
```
tool_call_1: read_file("file1.txt")
tool_call_2: read_file("file2.txt")  // –ú–æ–∂–Ω–∞ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ
tool_call_3: write_file("output.txt", content=result1+result2)  // –ü—ñ—Å–ª—è 1+2
```

–ú–∞–∫—Å–∏–º—É–º 3 –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –≤–∏–∫–ª–∏–∫–∏.

### 5. –ó–±—ñ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
```json
{
  "execution_results": [
    {
      "tool_call_id": 1,
      "status": "success",
      "output": "File created",
      "duration_ms": 120
    },
    {
      "tool_call_id": 2,
      "status": "success",
      "output": "Screenshot saved",
      "duration_ms": 850
    }
  ],
  "total_duration_ms": 970,
  "all_successful": true
}
```

---

## ‚úÖ Stage 2.3-MCP: Grisha Verify Item (–í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è)

**–•—Ç–æ:** Grisha (Verifier Agent)  
**–ú–æ–¥–µ–ª—å:** `copilot-gpt-4o-mini` (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.15)  
**Vision Model:** `copilot-gpt-4o` (~2s response)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
Grisha –ø–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –≤–∏–∫–æ–Ω–∞–≤—Å—è TODO item –∑–≥—ñ–¥–Ω–æ –∑ `success_criteria`. –¶–µ –ù–ï —Ñ–æ—Ä–º–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ - –≤—ñ–Ω —Ä–µ–∞–ª—å–Ω–æ –∞–Ω–∞–ª—ñ–∑—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏.

**–ü—Ä–æ—Ü–µ—Å:**

### 1. –ê–Ω–∞–ª—ñ–∑ —Ç–∏–ø—É –∑–∞–≤–¥–∞–Ω–Ω—è
```
IF action –º—ñ—Å—Ç–∏—Ç—å UI/browser/visual:
  ‚Üí –ü–æ—Ç—Ä—ñ–±–µ–Ω screenshot
ELSE:
  ‚Üí –¢—ñ–ª—å–∫–∏ –∞–Ω–∞–ª—ñ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ tools
```

### 2. Screenshot (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
```javascript
// –î–ª—è UI –∑–∞–≤–¥–∞–Ω—å
tool_calls: [
  {server: "playwright", tool: "playwright_screenshot", parameters: {path: "/tmp/verify.png"}}
]

// –ö–æ–º–ø—Ä–µ—Å—ñ—è –¥–ª—è API (max 500KB)
compress_image("/tmp/verify.png")
```

### 3. Vision analysis
```
Prompt –¥–æ GPT-4 Vision:
"–ß–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ –¥—ñ—é: '–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–Ω–æ–ø–∫—É Login'?
Success criteria: '–ù–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –≤–∏–¥–Ω–æ –∫–Ω–æ–ø–∫—É –∑ —Ç–µ–∫—Å—Ç–æ–º Login'

[IMAGE: screenshot.png]

–í—ñ–¥–ø–æ–≤—ñ–¥—å —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON:
{
  'verified': true/false,
  'evidence': '–©–æ —Å–∞–º–µ –±–∞—á–∏—à',
  'confidence': 0.95
}"
```

### 4. –ê–Ω–∞–ª—ñ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ tools
```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏—Ö–æ–¥—É tools
execution_results.forEach(result => {
  if (result.status === "error") {
    evidence.push(`Tool ${result.tool} failed: ${result.error}`);
    verified = false;
  }
});

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–∞–π–ª—ñ–≤
if (action.includes("—Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª")) {
  check_file_exists(parameters.path);
}
```

### 5. –§–æ—Ä–º—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É
```json
{
  "verified": true,
  "confidence": 0.95,
  "evidence": [
    "–§–∞–π–ª /Users/dev/Desktop/hello.txt —ñ—Å–Ω—É—î",
    "–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É: 11 –±–∞–π—Ç",
    "–ö–æ–Ω—Ç–µ–Ω—Ç –º—ñ—Å—Ç–∏—Ç—å 'Hello World'"
  ],
  "screenshot_analysis": {
    "used": false
  },
  "recommendation": "continue"
}
```

**–ú–æ–∂–ª–∏–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:**
- `verified: true` ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ item
- `verified: false` ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ Adjust TODO (Stage 3)

---

## üîß Stage 3-MCP: Atlas Adjust TODO (–ö–æ—Ä–µ–∫—Ü—ñ—è)

**–•—Ç–æ:** Atlas (Coordinator)  
**–ú–æ–¥–µ–ª—å:** `copilot-gpt-4o-mini` (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.2)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
Atlas –∞–Ω–∞–ª—ñ–∑—É—î –ß–û–ú–£ item –ø—Ä–æ–≤–∞–ª–∏–≤—Å—è —Ç–∞ –ø—Ä–∏–π–º–∞—î —Ä—ñ—à–µ–Ω–Ω—è —è–∫ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ —Å–∏—Ç—É–∞—Ü—ñ—é.

**–ü—Ä–æ—Ü–µ—Å:**

### 1. –ê–Ω–∞–ª—ñ–∑ –∑–≤—ñ—Ç—É Grisha
```json
{
  "failed_item": {"id": 3, "action": "–°—Ç–≤–æ—Ä–∏—Ç–∏ Excel —Ñ–∞–π–ª"},
  "verification_report": {
    "verified": false,
    "evidence": ["–§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ", "Tool write_excel –Ω–µ —ñ—Å–Ω—É—î"]
  }
}
```

### 2. –í–∏–±—ñ—Ä —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó
```
IF –ø–æ–º–∏–ª–∫–∞ –≤ parameters:
  ‚Üí Strategy: "fix_parameters"
  ‚Üí –í–∏–ø—Ä–∞–≤–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
  
IF tool –Ω–µ —ñ—Å–Ω—É—î:
  ‚Üí Strategy: "alternative_approach"
  ‚Üí –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —ñ–Ω—à—ñ tools
  
IF –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–∞–Ω–∏—Ö:
  ‚Üí Strategy: "add_prerequisite"
  ‚Üí –î–æ–¥–∞—Ç–∏ –ø—ñ–¥–≥–æ—Ç–æ–≤—á–∏–π –∫—Ä–æ–∫
  
IF –Ω–µ–º–æ–∂–ª–∏–≤–æ –≤–∏–∫–æ–Ω–∞—Ç–∏:
  ‚Üí Strategy: "skip"
  ‚Üí –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ item
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è adjustments
```json
{
  "strategy": "alternative_approach",
  "adjustments": {
    "action": "–°—Ç–≤–æ—Ä–∏—Ç–∏ CSV —Ñ–∞–π–ª (Excel –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è)",
    "mcp_servers": ["filesystem"],
    "parameters": {
      "path": "~/Desktop/mustang_prices.csv",
      "format": "csv"
    },
    "reasoning": "Excel –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é CSV —è–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É"
  }
}
```

### 4. Retry logic
```
Attempt 1: Original approach
  ‚Üì FAIL
Attempt 2: Adjusted approach (fix parameters)
  ‚Üì FAIL
Attempt 3: Alternative approach (different tools)
  ‚Üì FAIL
‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ Replan (Stage 3.5)
```

**–ú–∞–∫—Å–∏–º—É–º 3 —Å–ø—Ä–æ–±–∏ –Ω–∞ –æ–¥–∏–Ω item.**

---

## üîÑ Stage 3.5-MCP: Atlas Replan TODO (–ü–µ—Ä–µ–ø–ª–∞–Ω)

**–•—Ç–æ:** Atlas (Coordinator)  
**–ú–æ–¥–µ–ª—å:** `copilot-gpt-4o` (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.3)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
–ì–ª–∏–±–æ–∫–∏–π –∞–Ω–∞–ª—ñ–∑ –≤—Å—å–æ–≥–æ TODO —Å–ø–∏—Å–∫—É —Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –Ω–µ–≤–¥–∞—á. Atlas –ø—Ä–∏–π–º–∞—î —Å—Ç—Ä–∞—Ç–µ–≥—ñ—á–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è —â–æ —Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ.

**–ü—Ä–æ—Ü–µ—Å:**

### 1. –ê–Ω–∞–ª—ñ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
```javascript
{
  "original_request": "–ó–Ω–∞–π–¥–∏ —Ü—ñ–Ω–∏ –Ω–∞ Ford Mustang —Ç–∞ –∑–±–µ—Ä–µ–∂–∏ –≤ Excel",
  "current_todo": [...],
  "failed_items": [
    {"id": 4, "action": "–°—Ç–≤–æ—Ä–∏—Ç–∏ Excel", "attempts": 3}
  ],
  "successful_items": [1, 2, 3],
  "failure_patterns": ["Excel tools not available"]
}
```

### 2. –ü—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω–Ω—è
```
Decision Tree:

IF –±—ñ–ª—å—à—ñ—Å—Ç—å items –≤–∏–∫–æ–Ω–∞–Ω–æ (>70%):
  ‚Üí Decision: "complete_with_partial"
  ‚Üí –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑ —Ç–∏–º —â–æ —î
  
IF –±–ª–æ–∫–µ—Ä –Ω–∞ —Ä–∞–Ω–Ω—å–æ–º—É –µ—Ç–∞–ø—ñ:
  ‚Üí Decision: "replan_from_start"
  ‚Üí –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–ª–∞–Ω
  
IF –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –º–æ–∂–ª–∏–≤–∏–π:
  ‚Üí Decision: "replan_remaining"
  ‚Üí –ü–µ—Ä–µ–ø–∏—Å–∞—Ç–∏ —Ä–µ—à—Ç—É items
  
IF –∑–∞–≤–¥–∞–Ω–Ω—è –Ω–µ–º–æ–∂–ª–∏–≤–µ:
  ‚Üí Decision: "abort"
  ‚Üí –ü–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ø—Ä–æ –Ω–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω—É
```json
{
  "decision": "replan_remaining",
  "new_items": [
    {
      "id": 4,
      "action": "–°—Ç–≤–æ—Ä–∏—Ç–∏ CSV —Ñ–∞–π–ª –∑–∞–º—ñ—Å—Ç—å Excel",
      "mcp_servers": ["filesystem"],
      ...
    },
    {
      "id": 5,
      "action": "–ö–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ CSV –≤ Excel —á–µ—Ä–µ–∑ LibreOffice",
      "mcp_servers": ["shell"],
      ...
    }
  ],
  "reasoning": "Excel –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é CSV + –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—é"
}
```

### 4. –ú–æ–∂–ª–∏–≤—ñ outcomes
- **replan** ‚Üí –í—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤–∏—Ö items, –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è loop
- **skip** ‚Üí –ü–æ–∑–Ω–∞—á–∏—Ç–∏ item —è–∫ skipped, –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏
- **abort** ‚Üí –ó—É–ø–∏–Ω–∏—Ç–∏ –≤–µ—Å—å workflow, –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

**–¶–µ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –±–µ–∑–∫—ñ–Ω–µ—á–Ω–∏—Ö —Ü–∏–∫–ª—ñ–≤** - –ø—ñ—Å–ª—è –ø–µ–≤–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ replans —Å–∏—Å—Ç–µ–º–∞ –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è.

---

## ‚úÖ All Items Completed? (–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
–°–∏—Å—Ç–µ–º–∞ –ø—ñ–¥—Ä–∞—Ö–æ–≤—É—î —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ç–∞ –≤–∏—Ä—ñ—à—É—î —á–∏ –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ loop.

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```javascript
const total = todo.items.length;
const completed = items.filter(i => i.status === "completed").length;
const skipped = items.filter(i => i.status === "skipped").length;
const failed = items.filter(i => i.status === "failed").length;

if (completed + skipped === total) {
  ‚Üí –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ Final Summary (Stage 8)
} else if (failed > 0 && attempts >= 3) {
  ‚Üí –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ Replan (Stage 3.5)
} else {
  ‚Üí Continue Loop (–Ω–∞—Å—Ç—É–ø–Ω–∏–π item)
}
```

---

## üìä Stage 8-MCP: Final Summary (–ü—ñ–¥—Å—É–º–æ–∫)

**–•—Ç–æ:** Atlas (Coordinator)  
**–ú–æ–¥–µ–ª—å:** `atlas-ministral-3b` (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ 0.5)

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**
Atlas —Å—Ç–≤–æ—Ä—é—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –¶–µ –Ω–µ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π –ª–æ–≥ - —Ü–µ –ª—é–¥–∏–Ω–æ–∑—Ä–æ–∑—É–º—ñ–ª–µ —Ä–µ–∑—é–º–µ.

**–ü—Ä–æ—Ü–µ—Å:**

### 1. –ó–±—ñ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```javascript
{
  "total_items": 5,
  "completed": 4,
  "skipped": 1,
  "failed": 0,
  "total_duration_ms": 15420,
  "tools_executed": 18,
  "servers_used": ["filesystem", "playwright", "shell"]
}
```

### 2. –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è summary
```json
{
  "summary": "–ó–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ. –ó–Ω–∞–π–¥–µ–Ω–æ —Ü—ñ–Ω–∏ –Ω–∞ Ford Mustang –∑ auto.ria.com —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ CSV —Ñ–∞–π–ª –Ω–∞ Desktop.",
  "achievements": [
    "–í—ñ–¥–∫—Ä–∏—Ç–æ —Å–∞–π—Ç auto.ria.com",
    "–ó–Ω–∞–π–¥–µ–Ω–æ 8 –æ–≥–æ–ª–æ—à–µ–Ω—å Ford Mustang",
    "–ó—ñ–±—Ä–∞–Ω–æ —Ü—ñ–Ω–∏ (–≤—ñ–¥ $35,000 –¥–æ $58,000)",
    "–°—Ç–≤–æ—Ä–µ–Ω–æ —Ñ–∞–π–ª mustang_prices.csv –Ω–∞ Desktop"
  ],
  "skipped_items": [
    "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Excel —Ñ–∞–π–ª—É (–∑–∞–º—ñ–Ω–µ–Ω–æ –Ω–∞ CSV —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å Excel tools)"
  ],
  "user_message": "–ì–æ—Ç–æ–≤–æ! –§–∞–π–ª –∑ —Ü—ñ–Ω–∞–º–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –Ω–∞ Desktop —É —Ñ–æ—Ä–º–∞—Ç—ñ CSV."
}
```

### 3. –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
```
–ö–∞–Ω–∞–ª–∏:
- WebSocket ‚Üí chat update –≤ UI
- TTS ‚Üí –≥–æ–ª–æ—Å–æ–≤–µ –æ–∑–≤—É—á–µ–Ω–Ω—è (—è–∫—â–æ –≤–≤—ñ–º–∫–Ω–µ–Ω–æ)
- HTTP Response ‚Üí final JSON –¥–ª—è –∫–ª—ñ—î–Ω—Ç–∞
```

**–§–æ—Ä–º–∞—Ç –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**
```
‚úÖ –ó–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ

üìã –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ:
‚Ä¢ –í—ñ–¥–∫—Ä–∏—Ç–æ —Å–∞–π—Ç auto.ria.com
‚Ä¢ –ó–Ω–∞–π–¥–µ–Ω–æ 8 –æ–≥–æ–ª–æ—à–µ–Ω—å Ford Mustang
‚Ä¢ –ó—ñ–±—Ä–∞–Ω–æ —Ü—ñ–Ω–∏ (–≤—ñ–¥ $35,000 –¥–æ $58,000)
‚Ä¢ –°—Ç–≤–æ—Ä–µ–Ω–æ —Ñ–∞–π–ª mustang_prices.csv

‚ö†Ô∏è –ó–º—ñ–Ω–∏:
Excel —Ñ–∞–π–ª –∑–∞–º—ñ–Ω–µ–Ω–æ –Ω–∞ CSV (Excel tools –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ)

üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç: ~/Desktop/mustang_prices.csv
```

---

## üîë –ö–ª—é—á–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ —Å–∏—Å—Ç–µ–º–∏

### 1. Item-by-Item –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- –ù–ï –≤–µ—Å—å TODO –æ–¥—Ä–∞–∑—É
- –ö–æ–∂–µ–Ω item –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª: plan ‚Üí execute ‚Üí verify
- –®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫

### 2. Adaptive –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è
- Atlas —Å–∞–º –∫–æ—Ä–∏–≥—É—î –ø–ª–∞–Ω –ø—Ä–∏ –Ω–µ–≤–¥–∞—á–∞—Ö
- –ù–µ–º–∞—î –∂–æ—Ä—Å—Ç–∫–∏—Ö –æ–±–º–µ–∂–µ–Ω—å –Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å items
- –°–∏—Å—Ç–µ–º–∞ –≤—á–∏—Ç—å—Å—è –Ω–∞ –ø–æ–º–∏–ª–∫–∞—Ö

### 3. Evidence-based verification
- Grisha –ù–ï –¥–æ–≤—ñ—Ä—è—î –Ω–∞ —Å–ª–æ–≤–æ
- –†–µ–∞–ª—å–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (—Ñ–∞–π–ª–∏, screenshots)
- Vision analysis –¥–ª—è UI –∑–∞–≤–¥–∞–Ω—å

### 4. Separation of Concerns
- **Atlas:** –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è (–©–û —Ä–æ–±–∏—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ –ø—É–Ω–∫—Ç—ñ–≤)
- **Tetyana:** –í–∏–∫–æ–Ω–∞–Ω–Ω—è (–Ø–ö —Ä–æ–±–∏—Ç–∏, —è–∫—ñ tools)
- **Grisha:** –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è (–ß–ò –∑—Ä–æ–±–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

### 5. Tools —è–∫ Single Source of Truth
- {{AVAILABLE_TOOLS}} - –Ñ–î–ò–ù–ï –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏
- –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–≥–∞–¥—É–≤–∞—Ç–∏ tools
- –ó–ê–í–ñ–î–ò –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –ø–µ—Ä–µ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º

### 6. Retry & Recovery
- 3 —Å–ø—Ä–æ–±–∏ –Ω–∞ adjust
- Replan —è–∫ fallback
- Graceful degradation (skip –∑–∞–º—ñ—Å—Ç—å fail)

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### Performance
- –°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –Ω–∞ TODO item: 2-5 —Å–µ–∫—É–Ω–¥
- –°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –ø–æ–≤–Ω–æ–≥–æ workflow: 10-30 —Å–µ–∫—É–Ω–¥
- Success rate: >85% (–∑ adjustments)

### Tool usage
- Filesystem: ~40% –≤—Å—ñ—Ö –≤–∏–∫–ª–∏–∫—ñ–≤
- Playwright: ~30%
- Shell: ~20%
- –Ü–Ω—à—ñ: ~10%

### Common failure patterns
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —à–ª—è—Ö–∏ —Ñ–∞–π–ª—ñ–≤ (30%)
2. Timeout –±—Ä–∞—É–∑–µ—Ä–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π (25%)
3. –ù–µ–≤—ñ—Ä–Ω—ñ CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ (20%)
4. Permission denied (15%)
5. –Ü–Ω—à–µ (10%)

---

## üöÄ Best Practices

### –î–ª—è Atlas:
‚úÖ –°—Ç–≤–æ—Ä—é–π –ø—Ä–æ—Å—Ç—ñ, –∞—Ç–æ–º–∞—Ä–Ω—ñ items  
‚úÖ –û–¥–∏–Ω item = –æ–¥–Ω–∞ –¥—ñ—è  
‚úÖ –ß—ñ—Ç–∫—ñ success_criteria  
‚ùå –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ tools  
‚ùå –ù–µ –æ–±–º–µ–∂—É–π –∫—ñ–ª—å–∫—ñ—Å—Ç—å items  

### –î–ª—è Tetyana:
‚úÖ –¢–Ü–õ–¨–ö–ò tools –∑ {{AVAILABLE_TOOLS}}  
‚úÖ –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –Ω–∞–±—ñ—Ä tools (2-5)  
‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏  
‚ùå –ù–µ –≤–∏–≥–∞–¥—É–π tools  
‚ùå –ù–µ –¥–æ–¥–∞–≤–∞–π >5 tools (–∫—Ä–∞—â–µ —Ä–æ–∑–±–∏—Ç–∏)  

### –î–ª—è Grisha:
‚úÖ Evidence-based verification  
‚úÖ Vision analysis –¥–ª—è UI  
‚úÖ –î–µ—Ç–∞–ª—å–Ω—ñ –∑–≤—ñ—Ç–∏  
‚ùå –ù–µ –¥–æ–≤—ñ—Ä—è–π –Ω–∞ —Å–ª–æ–≤–æ  
‚ùå –ù–µ –ø—Ä–æ–ø—É—Å–∫–∞–π –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —Ñ–∞–π–ª—ñ–≤  
