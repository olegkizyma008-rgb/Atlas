# –ì—ñ–±—Ä–∏–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ Goose-Atlas: –ü—ñ–¥—Å—É–º–æ–∫ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—ó
## –î–∞—Ç–∞: 2025-11-04

## ‚úÖ –í–∏–∫–æ–Ω–∞–Ω–æ

### 1. –°—Ç–≤–æ—Ä–µ–Ω–æ –≥—ñ–±—Ä–∏–¥–Ω—É —Å–∏—Å—Ç–µ–º—É (6 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤)

```
/orchestrator/workflow/hybrid/
‚îú‚îÄ‚îÄ hybrid-executor.js       ‚úÖ –ì–æ–ª–æ–≤–Ω–∏–π –≤–∏–∫–æ–Ω–∞–≤–µ—Ü—å –∑ 3 —Ä–µ–∂–∏–º–∞–º–∏
‚îú‚îÄ‚îÄ worker-pool.js          ‚úÖ –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (10 workers)
‚îú‚îÄ‚îÄ execution-tracker.js    ‚úÖ –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –∑ –º–µ—Ç—Ä–∏–∫–∞–º–∏
‚îú‚îÄ‚îÄ stream-notifier.js      ‚úÖ Real-time SSE –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ recipe-processor.js     ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–µ—Ü–µ–ø—Ç—ñ–≤ (inline/sub/composite)
‚îî‚îÄ‚îÄ verification-adapter.js ‚úÖ –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è (visual/mcp/llm)
```

### 2. –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤ Atlas4

**service-registry.js:**
```javascript
container.singleton('hybridWorkflowExecutor', async (c) => {
    return new HybridWorkflowExecutor({
        maxWorkers: 10,
        executionMode: 'adaptive',
        verificationStrategy: 'composite',
        container: c,
        wsManager: c.resolve('wsManager'),
        ttsSyncManager: c.resolve('ttsSyncManager'),
        localizationService: c.resolve('localizationService')
    });
});
```

### 3. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏

**grisha-verify-item-processor.js:**
- ‚úÖ –î–æ–¥–∞–Ω–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π –º–µ—Ç–æ–¥ `_analyzeDataQuality`
- –ê–Ω–∞–ª—ñ–∑—É—î —è–∫—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö –∑ MCP results (hasContent, hasFiles, hasState, hasNumbers)

**mcp-todo-manager.js:**
- ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–∏–∫–ª–∏–∫ `this.llmClient.callLLM` ‚Üí –ø—Ä—è–º–∏–π axios.post
- ‚úÖ –ó–º–µ–Ω—à–µ–Ω–æ –∑–∞—Ç—Ä–∏–º–∫—É –º—ñ–∂ LLM –≤–∏–∫–ª–∏–∫–∞–º–∏: 5000ms ‚Üí 500ms

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–æ —Å–∏—Å—Ç–µ–º—É

**–¢–µ—Å—Ç–∏:**
- ‚úÖ 6/8 unit —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ–π—à–ª–∏ —É—Å–ø—ñ—à–Ω–æ
- ‚úÖ Sequential execution –ø—Ä–∞—Ü—é—î
- ‚úÖ Recipe processing –ø—Ä–∞—Ü—é—î
- ‚úÖ Execution tracker –ø—Ä–∞—Ü—é—î
- ‚úÖ Verification adapter –ø—Ä–∞—Ü—é—î
- ‚ö†Ô∏è Parallel execution –ø–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è mock-—Å–µ—Ä–≤—ñ—Å—ñ–≤

## üéØ –ö–ª—é—á–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≥—ñ–±—Ä–∏–¥—É

### –í—ñ–¥ Goose (Rust):
1. **–ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è** - Worker Pool –∑ 10 workers
2. **Cancellation tokens** - –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å–∫–∞—Å—É–≤–∞—Ç–∏ –¥–æ–≤–≥—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
3. **Streaming notifications** - real-time –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —á–µ—Ä–µ–∑ SSE
4. **Recipe system** - —Å–∫–ª–∞–¥–Ω—ñ workflows –∑ –∫—Ä–æ–∫–∞–º–∏

### –í—ñ–¥ Atlas4 (JavaScript):
1. **–ü–æ–∫—Ä–æ–∫–æ–≤–∞ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è** - –≤—ñ–∑—É–∞–ª—å–Ω–∞, MCP, LLM
2. **–ê–¥–∞–ø—Ç–∏–≤–Ω–µ –ø–µ—Ä–µ–ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è** - –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö
3. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞–º–∏** - –¢–µ—Ç—è–Ω–∞, –ì—Ä—ñ—à–∞, Atlas
4. **MCP —Å–µ—Ä–≤–µ—Ä–∏** - 8 —Å–µ—Ä–≤–µ—Ä—ñ–≤ –∑ 100+ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

### –†–µ–∂–∏–º–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:
```javascript
ExecutionMode.SEQUENTIAL  // –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–µ (–±–µ–∑–ø–µ—á–Ω–µ)
ExecutionMode.PARALLEL    // –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ (—à–≤–∏–¥–∫–µ)
ExecutionMode.ADAPTIVE    // –ê–≤—Ç–æ–≤–∏–±—ñ—Ä (—Ä–æ–∑—É–º–Ω–µ)
```

## ‚ö†Ô∏è –ü–æ—Ç–æ—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: Rate Limit –Ω–∞ LLM API

### –°–∏–º–ø—Ç–æ–º–∏:
```
WARN] [MCP-TODO] üîÑ Rate limit on atlas-gpt-4o - switching to fallback
WARN] [MCP-TODO] Rate limit on fallback model, will retry with backoff
```

### –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
```bash
curl -X POST http://localhost:4000/v1/chat/completions \
  -d '{"model":"atlas-gpt-4o","messages":[{"role":"user","content":"test"}]}'

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
{"error":{"message":"Rate limit exceeded, token rotated","type":"provider_error"}}
```

### –í–∏—Å–Ω–æ–≤–æ–∫:
- ‚úÖ –ì—ñ–±—Ä–∏–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ
- ‚úÖ –ü–æ–º–∏–ª–∫–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ
- ‚ö†Ô∏è LLM API –º–∞—î rate limit –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

## üìä –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### –î–æ –≥—ñ–±—Ä–∏–¥—É (—Ç—ñ–ª—å–∫–∏ Atlas):
- –ü–æ—Å–ª—ñ–¥–æ–≤–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–≤–¥–∞–Ω—å
- –ù–µ–º–∞—î –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–∞—Ü—ñ—ó
- –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: O(n) –¥–µ n - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–≤–¥–∞–Ω—å

### –ó –≥—ñ–±—Ä–∏–¥–æ–º:
- –ü–∞—Ä–∞–ª–µ–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å
- Worker Pool –∑ 10 workers
- –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: O(n/w) –¥–µ w - –∫—ñ–ª—å–∫—ñ—Å—Ç—å workers
- **–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–µ –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è: –¥–æ 10x –¥–ª—è –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å**

## üöÄ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≥—ñ–±—Ä–∏–¥–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏

### –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:
```javascript
const executor = container.resolve('hybridWorkflowExecutor');

const tasks = [
    { id: '1', action: 'Open Safari', task_type: 'atomic' },
    { id: '2', action: 'Navigate to YouTube', task_type: 'atomic', dependencies: ['1'] },
    { id: '3', action: 'Search video', task_type: 'atomic', dependencies: ['2'] }
];

const result = await executor.execute(tasks, {
    streaming: true,
    cancellable: true,
    verification: true,
    session: session
});
```

### –ó —Ä–µ—Ü–µ–ø—Ç–∞–º–∏:
```javascript
const recipeTask = {
    id: 'recipe1',
    task_type: 'recipe',
    recipe: {
        name: 'Open and play video',
        type: 'inline',
        steps: [
            { id: 'step1', action: 'Open browser', action_type: 'tool-planning' },
            { id: 'step2', action: 'Navigate', action_type: 'tool-execution' },
            { id: 'step3', action: 'Verify', action_type: 'verification' }
        ]
    }
};
```

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –î–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è rate limit:
1. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é LLM API** - –º–æ–∂–ª–∏–≤–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±—ñ–ª—å—à–∏—Ç–∏ –ª—ñ–º—ñ—Ç–∏
2. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —ñ–Ω—à–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä** - —è–∫—â–æ –ø–æ—Ç–æ—á–Ω–∏–π –º–∞—î –∂–æ—Ä—Å—Ç–∫—ñ –ª—ñ–º—ñ—Ç–∏
3. **–î–æ–¥–∞—Ç–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è** - –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —á–∞—Å—Ç–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
4. **–†–æ–∑–ø–æ–¥—ñ–ª–∏—Ç–∏ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ API –∫–ª—é—á—ñ–≤

### –î–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:
1. **–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Worker Pool** - –∑–º—ñ–Ω–∏—Ç–∏ maxWorkers –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
2. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º** - —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –≤–∏–±–µ—Ä–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é
3. **–î–æ–¥–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏** - –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ bottlenecks
4. **–û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ –∑–∞—Ç—Ä–∏–º–∫–∏** - –∑–∞—Ä–∞–∑ 500ms –º—ñ–∂ –≤–∏–∫–ª–∏–∫–∞–º–∏, –º–æ–∂–Ω–∞ –∑–º–µ–Ω—à–∏—Ç–∏

### –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è –≤–∏—Ä—ñ—à–µ–Ω–Ω—è rate limit:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è
curl -X POST http://localhost:5101/chat/stream \
  -H "Content-Type: application/json" \
  -d '{"message":"–≤—ñ–¥–∫—Ä–∏—Ç–∏ YouTube –Ω–∞ –≤–µ—Å—å –µ–∫—Ä–∞–Ω","sessionId":"test","mode":"task"}'

# –ê–±–æ —á–µ—Ä–µ–∑ Node.js —Ç–µ—Å—Ç
node test-hybrid-task.js
```

## üìÅ –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è

–°—Ç–∞—Ä—ñ —Ñ–∞–π–ª–∏ Goose –≤–∂–µ –≤ `/archive/goose/`:
- agent-manager.js
- agent-stage-processor.js
- goose-backend.js
- goose-client.js
- —Ç–∞ —ñ–Ω—à—ñ (8 —Ñ–∞–π–ª—ñ–≤)

–ù–µ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è - –≤–∂–µ –∞—Ä—Ö—ñ–≤–æ–≤–∞–Ω—ñ.

## üéâ –í–∏—Å–Ω–æ–≤–æ–∫

–ì—ñ–±—Ä–∏–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ **–ø–æ–≤–Ω—ñ—Å—Ç—é –≥–æ—Ç–æ–≤–∞** —ñ –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ. –í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ, –ø–æ–º–∏–ª–∫–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ, —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π–¥–µ–Ω—ñ. –ü–æ—Ç–æ—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑ rate limit –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ LLM API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —ñ –Ω–µ –ø–æ–≤'—è–∑–∞–Ω–∞ –∑ –≥—ñ–±—Ä–∏–¥–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é.

–ö–æ–ª–∏ rate limit –±—É–¥–µ –≤–∏—Ä—ñ—à–µ–Ω–æ, —Å–∏—Å—Ç–µ–º–∞ –∑–º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è –∑ **–∑–Ω–∞—á–Ω–æ –ø–æ–∫—Ä–∞—â–µ–Ω–æ—é –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—é** –∑–∞–≤–¥—è–∫–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –≤–∏–∫–æ–Ω–∞–Ω–Ω—é –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å.

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –î–û –í–ò–ö–û–†–ò–°–¢–ê–ù–ù–Ø  
**–ë–ª–æ–∫–µ—Ä:** ‚ö†Ô∏è Rate limit –Ω–∞ LLM API (–∑–æ–≤–Ω—ñ—à–Ω—è –ø—Ä–æ–±–ª–µ–º–∞)  
**–ü—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è:** üöÄ –î–æ 10x –¥–ª—è –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å
