# üîÑ –§–∞–∑–∞ 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∫–æ–º—ñ—Ç –∑ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–º –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º

**–î–∞—Ç–∞**: 19 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–†–ï–ê–õ–Ü–ó–û–í–ê–ù–û –Ü –ü–†–û–¢–ï–°–¢–û–í–ê–ù–û**

---

## üéØ –©–æ –±—É–ª–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∫–æ–º—ñ—Ç –∑ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–º –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä –º–æ–∂–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–º—ñ—Ç–∏—Ç–∏ –∑–º—ñ–Ω–∏ –∑ —Ä–æ–∑—É–º–Ω–∏–º –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º –∫–æ–ª–∏ —Ü–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ.

---

## üîß –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î

### 1Ô∏è‚É£ –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è

–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î **–¥–≤–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—ó** –ø–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º:

```python
# –ö—Ä–∏—Ç–µ—Ä—ñ–π 1: –ß–∞—Å –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –∫–æ–º—ñ—Ç—Ç—É
time_since_last >= commit_threshold  # 300 —Å–µ–∫ (5 —Ö–≤–∏–ª–∏–Ω)

# –ö—Ä–∏—Ç–µ—Ä—ñ–π 2: –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω
changes_count >= min_changes_for_commit  # 5 –∑–º—ñ–Ω
```

**–û–±–∏–¥–≤–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—ó –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω—ñ!**

### 2Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ–º—ñ—Ç—Ç—É

–Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –Ω–∞–¥–∞–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —Å–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä—É—î –π–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

```
üîç Codemap analysis: 69 changes, 498 dead code items, 0 cycles
```

–í–∫–ª—é—á–∞—î:
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥—É
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ü–∏–∫–ª—ñ—á–Ω–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

### 3Ô∏è‚É£ –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤

–°–∏—Å—Ç–µ–º–∞ –∑–±–µ—Ä—ñ–≥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–µ—Ä—Å—ñ—é –≤ `.codemap_version`:

```json
{
  "last_commit_hash": "ab508da",
  "last_commit_time": 1763504561.04239,
  "timestamp": "2025-11-19T00:22:41.042401",
  "system": "codemap-mcp"
}
```

**–¢—ñ—Å–Ω–∞ –ø—Ä–∏–≤'—è–∑–∫–∞ –¥–æ —Å–∏—Å—Ç–µ–º–∏:**
- –•–µ—à –∫–æ–º—ñ—Ç—Ç—É
- –ß–∞—Å –∫–æ–º—ñ—Ç—Ç—É
- Timestamp
- –°–∏—Å—Ç–µ–º–∞ (codemap-mcp)

---

## üìä –ú–µ—Ç–æ–¥–∏ —Å–∏—Å—Ç–µ–º–∏

### `_load_version_info()`
–ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–µ—Ä—Å—ñ—é –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É

```python
def _load_version_info(self):
    """Load version info from .codemap_version file"""
    # –ß–∏—Ç–∞—î .codemap_version
    # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î last_commit_hash
    # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î last_commit_time
```

### `_save_version_info(commit_hash)`
–ó–±–µ—Ä—ñ–≥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –≤–µ—Ä—Å—ñ—é –ø—ñ—Å–ª—è –∫–æ–º—ñ—Ç—Ç—É

```python
def _save_version_info(self, commit_hash: str):
    """Save version info to .codemap_version file"""
    # –ó–±–µ—Ä—ñ–≥–∞—î —Ö–µ—à –∫–æ–º—ñ—Ç—Ç—É
    # –ó–±–µ—Ä—ñ–≥–∞—î —á–∞—Å –∫–æ–º—ñ—Ç—Ç—É
    # –ó–±–µ—Ä—ñ–≥–∞—î timestamp
    # –ó–±–µ—Ä—ñ–≥–∞—î —Å–∏—Å—Ç–µ–º—É
```

### `_get_changes_count()`
–û—Ç—Ä–∏–º—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–µ–∑–∞–∫–æ–º—ñ—Ç–æ–≤–∞–Ω–∏—Ö –∑–º—ñ–Ω

```python
def _get_changes_count(self) -> int:
    """Get number of uncommitted changes"""
    # –ó–∞–ø—É—Å–∫–∞—î: git status --porcelain | wc -l
    # –ü–æ–≤–µ—Ä—Ç–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω
```

### `_should_commit()`
–Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î —á–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω –∫–æ–º—ñ—Ç

```python
def _should_commit(self) -> bool:
    """Intelligently determine if commit should be made"""
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∞—Å –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –∫–æ–º—ñ—Ç—Ç—É
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω
    # –ü–æ–≤–µ—Ä—Ç–∞—î True/False
```

### `auto_commit(message=None)`
–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–º—ñ—Ç–∏—Ç—å –∑–º—ñ–Ω–∏

```python
def auto_commit(self, message: Optional[str] = None) -> Dict[str, Any]:
    """Automatically commit changes with intelligent detection"""
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î _should_commit()
    # –ì–µ–Ω–µ—Ä—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
    # –ö–æ–º—ñ—Ç–∏—Ç—å –∑–º—ñ–Ω–∏
    # –ó–±–µ—Ä—ñ–≥–∞—î –≤–µ—Ä—Å—ñ—é
    # –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—ó–≤

```
‚úÖ Should commit: 69 changes, 1763504561s since last
   ‚Ä¢ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω: 69 >= 5 ‚úÖ
   ‚Ä¢ –ß–∞—Å: 1763504561s >= 300s ‚úÖ
```

### –¢–µ—Å—Ç 2: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

```
üîç Codemap analysis: 69 changes, 498 dead code items, 0 cycles
```

### –¢–µ—Å—Ç 3: –ö–æ–º—ñ—Ç

```
‚úÖ Auto-commit successful: ab508da
   ‚Ä¢ –•–µ—à: ab508da
   ‚Ä¢ –°—Ç–∞—Ç—É—Å: committed
   ‚Ä¢ Timestamp: 2025-11-19T00:22:41.042991
```

### –¢–µ—Å—Ç 4: –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è

```json
{
  "last_commit_hash": "ab508da",
  "last_commit_time": 1763504561.04239,
  "timestamp": "2025-11-19T00:22:41.042401",
  "system": "codemap-mcp"
}
```

---

## üéØ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–∞—Å—É

```python
server.commit_threshold = 300  # 5 —Ö–≤–∏–ª–∏–Ω (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
```

–ó–º—ñ–Ω—ñ—Ç—å –¥–ª—è –±—ñ–ª—å—à/–º–µ–Ω—à —á–∞—Å—Ç–∏—Ö –∫–æ–º—ñ—Ç—ñ–≤:
- `60` - –∫–æ–º—ñ—Ç –∫–æ–∂–Ω—É —Ö–≤–∏–ª–∏–Ω—É
- `300` - –∫–æ–º—ñ—Ç –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
- `3600` - –∫–æ–º—ñ—Ç –∫–æ–∂–Ω—É –≥–æ–¥–∏–Ω—É

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω

```python
server.min_changes_for_commit = 5  # –ú—ñ–Ω—ñ–º—É–º –∑–º—ñ–Ω (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
```

–ó–º—ñ–Ω—ñ—Ç—å –¥–ª—è –±—ñ–ª—å—à/–º–µ–Ω—à —á—É—Ç–ª–∏–≤–æ–≥–æ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è:
- `1` - –∫–æ–º—ñ—Ç –ø—Ä–∏ –±—É–¥—å-—è–∫—ñ–π –∑–º—ñ–Ω—ñ
- `5` - –∫–æ–º—ñ—Ç –ø—Ä–∏ 5+ –∑–º—ñ–Ω–∞—Ö
- `10` - –∫–æ–º—ñ—Ç –ø—Ä–∏ 10+ –∑–º—ñ–Ω–∞—Ö

---

## üöÄ –Ø–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∫–æ–º—ñ—Ç (—Å–∏—Å—Ç–µ–º–∞ –≤–∏–∑–Ω–∞—á–∞—î)

```python
result = server.auto_commit()
# –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∫—Ä–∏—Ç–µ—Ä—ñ—ó
# –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ - –∫–æ–º—ñ—Ç–∏—Ç—å
# –ü–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

### –ö–æ–º—ñ—Ç –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º

```python
result = server.auto_commit("üîß Fix: Updated analysis")
# –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∫—Ä–∏—Ç–µ—Ä—ñ—ó
# –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ - –∫–æ–º—ñ—Ç–∏—Ç—å –∑ –≤–∞—à–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
```

### –ß–µ—Ä–µ–∑ MCP —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

```
Cascade: auto_commit()
# –°–∏—Å—Ç–µ–º–∞ –∫–æ–º—ñ—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

Cascade: auto_commit("üîß Fix: Updated analysis")
# –°–∏—Å—Ç–µ–º–∞ –∫–æ–º—ñ—Ç–∏—Ç—å –∑ –≤–∞—à–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
```

---

## üìã –†–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –°—Ç–∞—Ç—É—Å: `committed`
```json
{
  "status": "committed",
  "hash": "ab508da",
  "message": "üîç Codemap analysis: 69 changes, 498 dead code items, 0 cycles",
  "timestamp": "2025-11-19T00:22:41.042991"
}
```

### –°—Ç–∞—Ç—É—Å: `skipped`
```json
{
  "status": "skipped",
  "reason": "Not enough changes or time since last commit",
  "changes_count": 2,
  "time_since_last": 45.5
}
```

### –°—Ç–∞—Ç—É—Å: `nothing_to_commit`
```json
{
  "status": "nothing_to_commit",
  "message": "nothing to commit, working tree clean"
}
```

### –°—Ç–∞—Ç—É—Å: `error`
```json
{
  "status": "error",
  "error": "fatal: not a git repository"
}
```

---

## üèÜ –ü–µ—Ä–µ–≤–∞–≥–∏

‚úÖ **–Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è** - –°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –∑–Ω–∞—î –∫–æ–ª–∏ –∫–æ–º—ñ—Ç–∏—Ç–∏  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è** - –ì–µ–Ω–µ—Ä—É—î –∑–º—ñ—Å—Ç–æ–≤–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è  
‚úÖ **–í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è** - –¢—ñ—Å–Ω–∞ –ø—Ä–∏–≤'—è–∑–∫–∞ –¥–æ —Å–∏—Å—Ç–µ–º–∏  
‚úÖ **–ì–Ω—É—á–∫—ñ—Å—Ç—å** - –ú–æ–∂–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∫—Ä–∏—Ç–µ—Ä—ñ—ó  
‚úÖ **–ë–µ–∑–ø–µ–∫–∞** - –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∫—Ä–∏—Ç–µ—Ä—ñ—ó –ø–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º  

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞      | –ó–Ω–∞—á–µ–Ω–Ω—è |
| ------------ | -------- |
| –ú–µ—Ç–æ–¥—ñ–≤      | 5        |
| –†—è–¥–∫—ñ–≤ –∫–æ–¥—É  | ~150     |
| –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ | 1        |
| –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π | 2        |
| –°—Ç–∞—Ç—É—Å—ñ–≤     | 4        |

---

## üîó –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

### –ó —Å–∏—Å—Ç–µ–º–æ—é Codemap
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–º—ñ—Ç–∏—Ç—å –∞–Ω–∞–ª—ñ–∑
- –ó–±–µ—Ä—ñ–≥–∞—î –≤–µ—Ä—Å—ñ—é –≤ `.codemap_version`
- –ì–µ–Ω–µ—Ä—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –º–µ—Ç—Ä–∏–∫–∞–º–∏

### –ó Git
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `git status` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑–º—ñ–Ω
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `git add -A` –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `git commit` –¥–ª—è –∫–æ–º—ñ—Ç—É–≤–∞–Ω–Ω—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `git rev-parse HEAD` –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ö–µ—à—É

### –ó Windsurf Cascade
- –î–æ—Å—Ç—É–ø–Ω–æ —è–∫ MCP —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `auto_commit`
- –ú–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∑ Cascade
- –ü–æ–≤–µ—Ä—Ç–∞—î —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## ‚ú® –í–∏—Å–Ω–æ–≤–æ–∫

**–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä –º–∞—î —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∫–æ–º—ñ—Ç!**

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –∫–æ–ª–∏ –∫–æ–º—ñ—Ç–∏—Ç–∏, –≥–µ–Ω–µ—Ä—É—î –∑–º—ñ—Å—Ç–æ–≤–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —ñ –∑–±–µ—Ä—ñ–≥–∞—î –≤–µ—Ä—Å—ñ—é —Ñ–∞–π–ª—ñ–≤ —Ç—ñ—Å–Ω–æ –ø—Ä–∏–≤'—è–∑–∞–Ω—É –¥–æ —Å–∏—Å—Ç–µ–º–∏ Codemap.

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–†–ï–ê–õ–Ü–ó–û–í–ê–ù–û –Ü –ü–†–û–¢–ï–°–¢–û–í–ê–ù–û**  
**–î–∞—Ç–∞**: 19 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025
