# ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó Architecture System v2.0

**–î–∞—Ç–∞**: 22 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025  
**–í–µ—Ä—Å—ñ—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –§–∞–∑–∞ 1 ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê | –§–∞–∑–∞ 2-4 ‚è≥ –í —Ä–æ–∑—Ä–æ–±—Ü—ñ

---

## üìã –§–∞–∑–∞ 1: –Ø–¥—Ä–æ (–¢–∏–∂–¥–µ–Ω—å 1) ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê

### 1.1 –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚úÖ –ì–û–¢–û–í–û

- [x] –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ `REFACTORING_PLAN.md`
- [x] –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ `QUICK_START_REFACTORING.md`
- [x] –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ `WINDSURF_INTEGRATION.md`
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –≥—ñ–ª–∫—É `feature/architecture-v2`
- [x] –û–Ω–æ–≤–∏—Ç–∏ `requirements.txt` –∑ –Ω–æ–≤–∏–º–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏

**–ö–æ–º–∞–Ω–¥–∏**:
```bash
git checkout -b feature/architecture-v2
pip install networkx==3.5 diskcache==5.6.3 radon==6.1.1 watchdog==3.0.0
```

### 1.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É ‚úÖ –ì–û–¢–û–í–û

- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É `codemap-system/core/`
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É `codemap-system/analysis/`
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É `codemap-system/windsurf/`
- [x] –î–æ–¥–∞—Ç–∏ `__init__.py` –≤ –∫–æ–∂–Ω—É –ø–∞–ø–∫—É
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É `codemap-system/docs/` –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

### 1.3 –ü–µ—Ä–µ–ø–∏—Å—É–≤–∞–Ω–Ω—è `architecture_mapper.py` ‚úÖ –ì–û–¢–û–í–û

**–§–∞–π–ª**: `codemap-system/core/architecture_mapper.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [x] –î–æ–¥–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç–∏: `networkx`, `diskcache`, `ast`
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `_detect_circular_dependencies()` –∑ DFS
- [x] –ü–µ—Ä–µ–ø–∏—Å–∞—Ç–∏ `_determine_file_status()` –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é
- [x] –î–æ–¥–∞—Ç–∏ –º–µ—Ç–æ–¥–∏: `_is_entry_point()`, `_is_config_file()`, `_is_deprecated()`, `_is_legacy()`, `_is_in_development()`
- [x] –î–æ–¥–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π
- [x] –î–æ–¥–∞—Ç–∏ AST –ø–∞—Ä—Å–∏–Ω–≥ –¥–ª—è Python —Ñ–∞–π–ª—ñ–≤
- [x] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ atlas4 –ø—Ä–æ–µ–∫—Ç—ñ ‚úÖ

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**:
```bash
cd codemap-system
python3 -c "
from core.architecture_mapper import ArchitectureMapper
m = ArchitectureMapper()
arch = m.analyze_architecture()
print(f'Files: {arch[\"statistics\"][\"total_files\"]}')
print(f'Cycles: {len(arch[\"circular_dependencies\"])}')
print(f'Unused: {arch[\"statistics\"][\"unused_files\"]}')
"
```

### 1.4 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è `code_duplication_detector.py`

**–§–∞–π–ª**: `codemap-system/core/code_duplication_detector.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `find_duplicates(min_lines=5)`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `_extract_code_blocks()`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ö–µ—à—É–≤–∞–Ω–Ω—è –±–ª–æ–∫—ñ–≤ —á–µ—Ä–µ–∑ MD5
- [ ] –î–æ–¥–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é —Ñ–∞–π–ª—ñ–≤
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ atlas4 –ø—Ä–æ–µ–∫—Ç—ñ

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**:
```bash
python3 -c "
from core.code_duplication_detector import CodeDuplicationDetector
d = CodeDuplicationDetector('.')
dups = d.find_duplicates()
print(f'Duplicates found: {len(dups)}')
for dup in dups[:3]:
    print(f'  {dup["count"]} files: {dup["files"][:2]}')
"
```

### 1.5 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è `code_quality_analyzer.py` ‚úÖ –ì–û–¢–û–í–û

**–§–∞–π–ª**: `codemap-system/core/code_quality_analyzer.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `analyze_file()`
- [x] –í–∏—Ç—è–≥—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞ —ó—Ö –¥–æ–≤–∂–∏–Ω—É
- [x] –í–∏—è–≤–∏—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏ —è–∫–æ—Å—Ç—ñ
- [x] –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ —è–∫—ñ—Å—Ç—å —Å–∫–æ—Ä
- [x] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è ‚úÖ

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**:
```bash
python3 -c "
from core.code_quality_analyzer import CodeQualityAnalyzer
from pathlib import Path
a = CodeQualityAnalyzer(Path('.'))
result = a.analyze_file(Path('core/architecture_mapper.py'))
print(f'Quality score: {result["quality_score"]}')
print(f'Issues: {len(result["issues"])}')
"
```

### 1.6 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –§–∞–∑–∏ 1 ‚úÖ –ì–û–¢–û–í–û

- [x] –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∞–Ω–∞–ª—ñ–∑ –Ω–∞ atlas4
- [x] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ü–∏–∫–ª—ñ—á–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- [x] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç–∏
- [x] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —è–∫—ñ—Å—Ç—å –∫–æ–¥—É
- [x] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- [x] –ù–∞–ø–∏—Å–∞—Ç–∏ `quick_test.py` - 6/6 —Ç–µ—Å—Ç—ñ–≤ –ø—Ä–æ–π—à–ª–∏ ‚úÖ
- [x] –°—Ç–≤–æ—Ä–∏—Ç–∏ `architecture_daemon.py` –¥–ª—è –ø–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É ‚úÖ

**–ö–æ–º–∞–Ω–¥–∏**:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–æ–≤–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
python3 core/architecture_mapper.py

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
tail -f logs/architecture_server.log

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–µ—à
ls -la .cache/
```

---

## üìã –§–∞–∑–∞ 2: Windsurf (–¢–∏–∂–¥–µ–Ω—å 2)

### 2.1 –ü–µ—Ä–µ–ø–∏—Å—É–≤–∞–Ω–Ω—è MCP —Å–µ—Ä–≤–µ—Ä–∞

**–§–∞–π–ª**: `codemap-system/windsurf/mcp_architecture_server.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –î–æ–¥–∞—Ç–∏ WebSocket –ø—ñ–¥—Ç—Ä–∏–º–∫—É
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `ArchitectureWebSocketServer`
- [ ] –î–æ–¥–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª—ñ–≤ —á–µ—Ä–µ–∑ `watchdog`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `FileChangeHandler`
- [ ] –î–æ–¥–∞—Ç–∏ `WindsurfIntegration` –∫–ª–∞—Å
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥–∏ –¥–ª—è –≤—Å—ñ—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤
- [ ] –î–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ MCP —Å–µ—Ä–≤–µ—Ä
python3 windsurf/mcp_architecture_server.py

# –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –≤ —ñ–Ω—à–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ
curl -X POST http://localhost:9000/tools/call \
  -H "Content-Type: application/json" \
  -d '{"name": "get_architecture_overview"}'
```

### 2.2 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Windsurf –∫–æ–º–∞–Ω–¥

**–§–∞–π–ª**: `codemap-system/windsurf/windsurf_commands.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `@command("architecture.analyze")`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `@command("architecture.showDependencies")`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `@command("architecture.refactoringSuggestions")`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `@command("architecture.findUnused")`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `@command("architecture.findCircular")`
- [ ] –î–æ–¥–∞—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 2.3 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Windsurf —Å–ø–æ–≤—ñ—â–µ–Ω—å

**–§–∞–π–ª**: `codemap-system/windsurf/windsurf_notifications.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `WindsurfNotificationManager`
- [ ] –î–æ–¥–∞—Ç–∏ —Ç–∏–ø–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å (unused, circular, coupling, deprecated)
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `notify_architecture_issue()`
- [ ] –î–æ–¥–∞—Ç–∏ –¥—ñ—ó –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 2.4 –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Windsurf

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –û–Ω–æ–≤–∏—Ç–∏ `mcp_config.json` —É Windsurf
- [ ] –î–æ–¥–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–≥ –¥–ª—è architecture —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è
- [ ] –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –≤ Windsurf
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è

**–ö–æ–Ω—Ñ—ñ–≥**:
```json
{
  "mcpServers": {
    "architecture": {
      "command": "python3",
      "args": ["/Users/dev/Documents/GitHub/atlas4/codemap-system/windsurf/mcp_architecture_server.py"],
      "env": {
        "PROJECT_ROOT": "/Users/dev/Documents/GitHub/atlas4"
      }
    }
  }
}
```

### 2.5 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –§–∞–∑–∏ 2

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç–∏ MCP —Å–µ—Ä–≤–µ—Ä
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–º–∞–Ω–¥–∏ –≤ Windsurf
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ WebSocket
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª—ñ–≤
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è

---

## üìã –§–∞–∑–∞ 3: –§—É–Ω–∫—Ü—ñ—ó (–¢–∏–∂–¥–µ–Ω—å 3)

### 3.1 –ê–Ω–∞–ª—ñ–∑ –±–µ–∑–ø–µ–∫–∏

**–§–∞–π–ª**: `codemap-system/core/security_analyzer.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `analyze_file()`
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –Ω–µ–±–µ–∑–ø–µ—á–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ SQL injection
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ XSS
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ CSRF
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 3.2 –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

**–§–∞–π–ª**: `codemap-system/core/performance_analyzer.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `analyze_file()`
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –≤–ª–æ–∂–µ–Ω—ñ —Ü–∏–∫–ª–∏
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ —Ü–∏–∫–ª–∏
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ –±–ª–æ–∫—É—é—á—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- [ ] –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∫–æ–¥
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 3.3 –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É

**–§–∞–π–ª**: `codemap-system/core/refactoring_recommender.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `get_recommendations()`
- [ ] –î–æ–¥–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
- [ ] –î–æ–¥–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- [ ] –î–æ–¥–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è —Ä–æ–∑–≤'—è–∑–∞–Ω–Ω—è —Ü–∏–∫–ª—ñ–≤
- [ ] –î–æ–¥–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- [ ] –î–æ–¥–∞—Ç–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–∏–∑–∞—Ü—ñ—é
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 3.4 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –§–∞–∑–∏ 3

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∞–Ω–∞–ª—ñ–∑ –±–µ–∑–ø–µ–∫–∏
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∞–Ω–∞–ª—ñ–∑ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
- [ ] –û—Ç—Ä–∏–º–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —è–∫—ñ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è

---

## üìã –§–∞–∑–∞ 4: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è (–¢–∏–∂–¥–µ–Ω—å 4)

### 4.1 –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑

**–§–∞–π–ª**: `codemap-system/analysis/parallel_analyzer.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `ParallelAnalyzer`
- [ ] –î–æ–¥–∞—Ç–∏ `ThreadPoolExecutor`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `analyze_files_parallel()`
- [ ] –î–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

### 4.2 –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

**–§–∞–π–ª**: `codemap-system/analysis/incremental_analyzer.py`

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `IncrementalAnalyzer`
- [ ] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `analyze_changes()`
- [ ] –î–æ–¥–∞—Ç–∏ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —á–∞—Å–æ–≤–∏—Ö –º—ñ—Ç–æ–∫
- [ ] –î–æ–¥–∞—Ç–∏ –≤–∏—è–≤–ª–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 4.3 –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ

**–ß–µ–∫-–ª–∏—Å—Ç**:
- [ ] –ü—Ä–æ—Ñ–∞–π–ª–∏–Ω–≥ –∞–Ω–∞–ª—ñ–∑—É
- [ ] –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–∞—Ä—Å–∏–Ω–≥—É
- [ ] –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –∫–µ—à—É–≤–∞–Ω–Ω—è
- [ ] –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –≥—Ä–∞—Ñ—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- [ ] –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —á–∞—Å—É

**–ö–æ–º–∞–Ω–¥–∏**:
```bash
# –ü—Ä–æ—Ñ–∞–π–ª–∏–Ω–≥
python3 -m cProfile -s cumtime core/architecture_mapper.py

# –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
python3 -m memory_profiler core/architecture_mapper.py
```

### 4.4 –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –§–∞–∑–∏ 4

- [ ] –í–∏–º—ñ—Ä–∏—Ç–∏ —á–∞—Å –∞–Ω–∞–ª—ñ–∑—É (—Ü—ñ–ª—å: <5 —Å–µ–∫)
- [ ] –í–∏–º—ñ—Ä–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É

### –ü–æ—Ç–æ—á–Ω—ñ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞             | –ü–æ—Ç–æ—á–Ω–æ | –¶—ñ–ª—å   | –°—Ç–∞—Ç—É—Å |
| ------------------- | ------- | ------ | ------ |
| –ß–∞—Å –∞–Ω–∞–ª—ñ–∑—É         | ~30 —Å–µ–∫ | <5 —Å–µ–∫ | ‚ùå      |
| –¶–∏–∫–ª—ñ—á–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ | 0%      | 100%   | ‚ùå      |
| –î—É–±–ª—ñ–∫–∞—Ç–∏           | 0%      | 100%   | ‚ùå      |
| –ö–µ—à –Ω–∞ –¥–∏—Å–∫—É        | ‚ùå       | ‚úÖ      | ‚ùå      |
| Windsurf —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è | üü°       | ‚úÖ      | ‚ùå      |
| –ë–µ–∑–ø–µ–∫–∞             | ‚ùå       | ‚úÖ      | ‚ùå      |
| –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å      | ‚ùå       | ‚úÖ      | ‚ùå      |

### –ú–µ—Ç—Ä–∏–∫–∏ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É

| –ú–µ—Ç—Ä–∏–∫–∞               | –¶—ñ–ª—å |
| --------------------- | ---- |
| Code coverage         | >80% |
| Cyclomatic complexity | <10  |
| Lines per function    | <50  |
| Duplication           | <5%  |

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### Unit —Ç–µ—Å—Ç–∏

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–∏
mkdir -p codemap-system/tests
touch codemap-system/tests/__init__.py
touch codemap-system/tests/test_architecture_mapper.py
touch codemap-system/tests/test_code_duplication.py
touch codemap-system/tests/test_code_quality.py

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏
pytest codemap-system/tests/ -v --cov=codemap-system/core
```

### Integration —Ç–µ—Å—Ç–∏

```bash
# –¢–µ—Å—Ç—É–≤–∞—Ç–∏ MCP —Å–µ—Ä–≤–µ—Ä
python3 -m pytest codemap-system/tests/test_mcp_server.py -v

# –¢–µ—Å—Ç—É–≤–∞—Ç–∏ Windsurf —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é
python3 -m pytest codemap-system/tests/test_windsurf_integration.py -v
```

---

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### –î–æ–∫—É–º–µ–Ω—Ç–∏ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è

- [ ] `README.md` - –û—Å–Ω–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- [ ] `API.md` - API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- [ ] `CONFIGURATION.md` - –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- [ ] `TROUBLESHOOTING.md` - –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º
- [ ] `EXAMPLES.md` - –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

---

## üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### Pre-deployment

- [ ] –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç—å
- [ ] –ö–æ–¥ review
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –≥–æ—Ç–æ–≤–∞
- [ ] –õ–æ–≥—É–≤–∞–Ω–Ω—è –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ
- [ ] –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ

### Deployment

- [ ] Merge –≤ `main` –≥—ñ–ª–∫—É
- [ ] –û–Ω–æ–≤–∏—Ç–∏ `requirements.txt`
- [ ] –û–Ω–æ–≤–∏—Ç–∏ `.env.architecture`
- [ ] –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∏
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### Post-deployment

- [ ] –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ –ª–æ–≥–∏
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏
- [ ] –ó—ñ–±—Ä–∞—Ç–∏ feedback
- [ ] –î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏
- [ ] –ü–ª–∞–Ω—É–≤–∞—Ç–∏ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∏ —Ç–∞ –ø–∏—Ç–∞–Ω–Ω—è

- –õ–æ–≥–∏: `codemap-system/logs/`
- –ó–≤—ñ—Ç–∏: `codemap-system/reports/`
- –ö–æ–Ω—Ñ—ñ–≥: `codemap-system/.env.architecture`

### –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∞–Ω–∞–ª—ñ–∑
python3 core/architecture_mapper.py

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ MCP —Å–µ—Ä–≤–µ—Ä
python3 windsurf/mcp_architecture_server.py

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏
tail -f logs/architecture_server.log

# –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à
rm -rf .cache/*

# –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–≤—ñ—Ç
python3 -c "from core.architecture_mapper import ArchitectureMapper; m = ArchitectureMapper(); m.export_architecture(Path('reports/latest.json'))"
```

---

## üìÖ –ì—Ä–∞—Ñ—ñ–∫

| –¢–∏–∂–¥–µ–Ω—å | –§–∞–∑–∞        | –ó–∞–≤–¥–∞–Ω–Ω—è                               | –°—Ç–∞—Ç—É—Å |
| ------- | ----------- | -------------------------------------- | ------ |
| 1       | –Ø–¥—Ä–æ        | architecture_mapper, –¥—É–±–ª—ñ–∫–∞—Ç–∏, —è–∫—ñ—Å—Ç—å | ‚è≥      |
| 2       | Windsurf    | MCP, –∫–æ–º–∞–Ω–¥–∏, —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è               | ‚è≥      |
| 3       | –§—É–Ω–∫—Ü—ñ—ó     | –ë–µ–∑–ø–µ–∫–∞, –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó  | ‚è≥      |
| 4       | –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è | –ü–∞—Ä–∞–ª–µ–ª—ñ–∑–º, —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç, —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è      | ‚è≥      |

---

**–í–µ—Ä—Å—ñ—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –¥–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: 22 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025

**–ì–æ—Ç–æ–≤–æ –¥–æ —Å—Ç–∞—Ä—Ç—É! üöÄ**
