2025-10-26 16:30:06 [ERROR] [CHAT-MEMORY] ❌ Memory processing failed: this.memoryEligibilityProcessor.execute is not a function {"metadata":{}}
2025-10-26 16:30:52 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:52 [ERROR] Stack trace: ReferenceError: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:924:70)
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:52)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:53 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:53 [ERROR] Stack trace: ReferenceError: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:924:70)
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:52)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:55 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:55 [ERROR] Stack trace: ReferenceError: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:924:70)
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:52)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:30:57 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:30:57 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761489003086_leccw6ke5","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:40:02 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:02 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:07 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:07 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:13 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:40:19 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:40:19 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761489561992_fav2dlqbf","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:45:24 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:30 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:30 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:36 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:36 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:697:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-26 16:45:36 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-26 16:45:40 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:45:40 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761489850281_omy8ltjv5","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1233:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13"}}
2025-10-26 16:49:36 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 401 {"metadata":{}}
2025-10-26 16:49:36 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 401
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-26 16:49:36 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-26 16:49:36 [ERROR] [STAGE-0-MCP] API Response Error: status=401, data={"error":{"message":"401 Incorrect API key provided: gho_swah****************************8jbP. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}} {"metadata":{}}
2025-10-26 16:49:49 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 401 {"metadata":{}}
2025-10-26 16:49:49 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 401
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-26 16:49:49 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-26 16:49:49 [ERROR] [STAGE-0-MCP] API Response Error: status=401, data={"error":{"message":"401 Incorrect API key provided: gho_swah****************************8jbP. You can find your API key at https://platform.openai.com/account/api-keys.","type":"invalid_request_error","param":null,"code":"invalid_api_key"}} {"metadata":{}}
2025-10-26 17:15:19 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-26 17:15:19 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-26 17:15:19 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-26 17:15:19 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:19 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:24:20 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:26:17 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-27 20:26:17 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-27 20:26:17 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-27 20:26:17 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Connection error.","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-27 20:26:18 [ERROR] executor {"metadata":{}}
2025-10-27 20:26:18 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:26:18 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761589567585_dx0gmgede","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:28:49 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-27 20:28:49 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:698:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-27 20:29:19 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-27 20:29:19 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-27 20:29:19 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-27 20:29:19 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"Connection error.","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-27 20:29:20 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: timeout of 30000ms exceeded {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: timeout of 30000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:519:28)\n    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:588:17)\n    at process.processTimers (node:internal/timers:523:7)\n    at Axios.request..."}}
2025-10-27 20:29:21 [ERROR] executor {"metadata":{}}
2025-10-27 20:29:21 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:29:21 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761589758495_x7em8j4li","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:29:24 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-27 20:29:24 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:698:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-27 20:29:28 [ERROR] [STAGE-2.0-MCP] ❌ Server selection failed: Request failed with status code 500 {"metadata":{"category":"server-selection","component":"server-selection","errorName":"AxiosError","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-27 20:29:55 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-server {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-27 20:29:55 [ERROR] mcp-manager {"metadata":{}}
2025-10-28 01:04:12 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:04:12 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:04:12 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:04:12 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:04:19 [ERROR] executor {"metadata":{}}
2025-10-28 01:04:19 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:04:19 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761604791957_vzai8yqhi","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:04:43 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:04:43 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:04:43 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:04:43 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:04:51 [ERROR] executor {"metadata":{}}
2025-10-28 01:04:51 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:04:51 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761604791957_vzai8yqhi","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:05:59 [ERROR] executor {"metadata":{}}
2025-10-28 01:05:59 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:05:59 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606353923_5g2es51gc","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:06:51 [ERROR] executor {"metadata":{}}
2025-10-28 01:06:51 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:06:51 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606406413_vkw62cuq2","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:11:15 [ERROR] [STAGE-0-MCP] Mode selection failed: timeout of 60000ms exceeded {"metadata":{}}
2025-10-28 01:11:15 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: timeout of 60000ms exceeded
    at RedirectableRequest.handleRequestTimeout (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:675:16)
    at RedirectableRequest.emit (node:events:519:28)
    at Timeout.<anonymous> (/Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/follow-redirects/index.js:221:12)
    at listOnTimeout (node:internal/timers:588:17)
    at process.processTimers (node:internal/timers:523:7)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:11:15 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:11:15 [ERROR] [STAGE-0-MCP] No response received from API {"metadata":{}}
2025-10-28 01:11:18 [ERROR] executor {"metadata":{}}
2025-10-28 01:11:18 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:11:18 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606406413_vkw62cuq2","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:18:06 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:18:06 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:18:06 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:18:06 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:18:12 [ERROR] executor {"metadata":{}}
2025-10-28 01:18:12 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:18:12 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606827791_01pttxqdp","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:20:38 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:20:38 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:20:38 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:20:38 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:20:44 [ERROR] executor {"metadata":{}}
2025-10-28 01:20:44 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:20:44 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606827791_01pttxqdp","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:21:13 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:21:13 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:21:13 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:21:13 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:21:21 [ERROR] executor {"metadata":{}}
2025-10-28 01:21:21 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:21:21 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761606827791_01pttxqdp","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:35:25 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-28 01:35:25 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:87:13 {"metadata":{}}
2025-10-28 01:35:25 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-28 01:35:25 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-28 01:35:32 [ERROR] executor {"metadata":{}}
2025-10-28 01:35:32 [ERROR] MCP workflow failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"Request failed with status code 500","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 01:35:32 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Request failed with status code 500","sessionId":"session_1761608018847_ygvg4nc6b","stack":"AxiosError: Request failed with status code 500\n    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:531:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:2..."}}
2025-10-28 22:21:47 [ERROR] [DEV-ANALYSIS] Self-analysis failed: this._analyzeImpact is not a function {"metadata":{}}
2025-10-28 22:23:01 [ERROR] [MCP-TODO] LLM API error: 500 Internal Server Error {"metadata":{"category":"mcp-todo","component":"mcp-todo","status":500,"data":"{\"error\":{\"message\":\"400 Unknown model: mistral-medium-2411\",\"type\":\"provider_error\",\"provider\":\"atlas\",\"code\":\"API_ERROR\"}}","url":"http://localhost:4000/v1/chat/completions","method":"post"}}
2025-10-28 22:23:01 [ERROR] atlas-todo-planning {"metadata":{}}
2025-10-28 22:23:01 [ERROR] atlas-todo-planning {"metadata":{}}
2025-10-28 22:23:01 [ERROR] MCP workflow failed: TODO planning failed: TODO creation failed: Request failed with status code 500 {"metadata":{"sessionId":"default","error":"TODO planning failed: TODO creation failed: Request failed with status code 500","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:768:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:147:13"}}
2025-10-28 22:23:01 [ERROR] Step-by-step workflow failed {"metadata":{"error":"TODO planning failed: TODO creation failed: Request failed with status code 500","sessionId":"session_1761682901147_8e4v7meah","stack":"Error: TODO planning failed: TODO creation failed: Request failed with status code 500\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:768:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:147:13"}}
2025-10-28 23:28:56 [ERROR] [DEV-MODE] Self-analysis failed: this.logger.system is not a function {"metadata":{}}
2025-10-28 23:34:56 [ERROR] [DEV-MODE] Self-analysis failed: this.logger.info is not a function {"metadata":{}}
2025-10-28 23:44:10 [ERROR] [DEV-MODE] Self-analysis failed: this.logger.info is not a function {"metadata":{}}
2025-10-28 23:59:41 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:41 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1055:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:46 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:46 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1055:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:52 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:52 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1055:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-28 23:59:52 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-28 23:59:59 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1591:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13"}}
2025-10-28 23:59:59 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761688425761_5hkcw3a7o","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1591:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13"}}
2025-10-29 00:36:56 [ERROR] [STAGE-0-MCP] Mode selection failed: Request failed with status code 500 {"metadata":{}}
2025-10-29 00:36:56 [ERROR] [STAGE-0-MCP] Error stack: AxiosError: Request failed with status code 500
    at settle (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/settle.js:19:12)
    at IncomingMessage.handleStreamEnd (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/adapters/http.js:617:11)
    at IncomingMessage.emit (node:events:531:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
    at Axios.request (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/node_modules/axios/lib/core/Axios.js:45:41)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ModeSelectionProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/mode-selection-processor.js:89:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:73:24)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{}}
2025-10-29 00:36:56 [ERROR] [STAGE-0-MCP] Error name: AxiosError {"metadata":{}}
2025-10-29 00:36:56 [ERROR] [STAGE-0-MCP] API Response Error: status=500, data={"error":{"message":"400 The response was filtered due to the prompt triggering Azure OpenAI's content management policy. Please modify your prompt and retry. To learn more about our content filtering policies please read our documentation: https://go.microsoft.com/fwlink/?linkid=2198766","type":"provider_error","provider":"atlas","code":"API_ERROR"}} {"metadata":{}}
2025-10-29 00:47:10 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:10 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1070:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:15 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:15 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1070:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:21 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:21 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1070:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 00:47:28 [ERROR] MCP workflow failed: Cannot read properties of undefined (reading 'push') {"metadata":{"sessionId":"default","error":"Cannot read properties of undefined (reading 'push')","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1606:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13"}}
2025-10-29 00:47:29 [ERROR] Step-by-step workflow failed {"metadata":{"error":"Cannot read properties of undefined (reading 'push')","sessionId":"session_1761691387280_p1y1i5q1s","stack":"TypeError: Cannot read properties of undefined (reading 'push')\n    at executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1606:21)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13"}}
2025-10-29 01:05:51 [ERROR] [DEV-ANALYSIS] Failed to gather real context: mcpManager.getServer is not a function {"metadata":{"category":"system","component":"dev-analysis","error":"mcpManager.getServer is not a function"}}
2025-10-29 01:05:54 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'length')"}}
2025-10-29 01:09:23 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'length')"}}
2025-10-29 01:21:48 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:21:48 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'length')"}}
2025-10-29 01:25:11 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:25:11 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'length') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'length')"}}
2025-10-29 01:38:26 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:42:51 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:42:51 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1101:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:42:56 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:42:56 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1101:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:43:02 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: item is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:43:02 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: item is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1101:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:43:02 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 01:49:17 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:50:09 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:50:11 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:11 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:13 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:13 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:13 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1123:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:14 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:50:16 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:16 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:18 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:18 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:18 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:18 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1123:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:20 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:20 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:50:22 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:22 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:24 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:50:24 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:50:24 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:50:24 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1123:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:53:41 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:54:36 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:36 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:54:38 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:38 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:40 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:40 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:40 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:40 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1179:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:41 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:41 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:54:43 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:43 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:45 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:45 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:45 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:45 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1179:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:47 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:47 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:54:49 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:51 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:54:51 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:54:51 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:54:51 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1179:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:58:05 [ERROR] mcp-server {"metadata":{}}
2025-10-29 01:58:58 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:58:58 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:59:00 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:00 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:59:02 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:02 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan..."}}
2025-10-29 01:59:02 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:02 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1186:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:03 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:03 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:59:05 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:05 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:59:07 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:07 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan..."}}
2025-10-29 01:59:07 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:07 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1186:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:09 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:09 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 01:59:11 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:11 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:59:13 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 01:59:13 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 01:59:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 01:59:13 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1186:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:154:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:20:04 [ERROR] [DEV-ANALYSIS] Self-analysis failed: this._analyzeMemoryPatterns is not a function {"metadata":{"category":"system","component":"dev-analysis","error":"this._analyzeMemoryPatterns is not a function"}}
2025-10-29 02:23:44 [ERROR] mcp-server {"metadata":{}}
2025-10-29 02:23:44 [ERROR] [DEV-ANALYSIS] Self-analysis failed: Cannot read properties of undefined (reading 'push') {"metadata":{"category":"system","component":"dev-analysis","error":"Cannot read properties of undefined (reading 'push')"}}
2025-10-29 02:28:57 [ERROR] [DEV-ANALYSIS] Self-analysis failed: parentItem is not defined {"metadata":{"category":"system","component":"dev-analysis","error":"parentItem is not defined"}}
2025-10-29 02:30:37 [ERROR] [DEV-ANALYSIS] Self-analysis failed: this._detectInterventionRequest is not a function {"metadata":{"category":"system","component":"dev-analysis","error":"this._detectInterventionRequest is not a function"}}
2025-10-29 02:34:10 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:10 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 02:34:12 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:12 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan..."}}
2025-10-29 02:34:14 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:14 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:14 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1198:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:15 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:15 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 02:34:17 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:17 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:19 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:19 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:19 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:19 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1198:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:21 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:21 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools..."}}
2025-10-29 02:34:23 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:23 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:25 [ERROR] [MCP-TODO] MCP Manager is null in planTools! {"metadata":{"category":"mcp-todo","component":"mcp-todo"}}
2025-10-29 02:34:25 [ERROR] [MCP-TODO] Failed to plan tools for item 1: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"Error","stack":"Error: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:981:15)\n    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:945:35)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async..."}}
2025-10-29 02:34:25 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation. {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 02:34:25 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: MCP Manager is not initialized (null) in planTools. Check DI registration and service instantiation.
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:966:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:141:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1198:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 05:45:03 [ERROR] mcp-server {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-server {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:45:03 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-server {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-server {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 05:48:49 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 06:18:04 [ERROR] mcp-server {"metadata":{}}
2025-10-29 06:18:04 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 06:18:04 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 06:20:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:14 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:15 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:15 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:17 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:17 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 06:20:17 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 06:20:17 [ERROR] Item 3 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":3}}
2025-10-29 06:20:17 [ERROR] Item 4 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":4}}
2025-10-29 06:20:17 [ERROR] Item 5 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":5}}
2025-10-29 06:20:17 [ERROR] Item 6 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":6}}
2025-10-29 06:20:17 [ERROR] Item 7 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":7}}
2025-10-29 06:20:17 [ERROR] Item 8 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":8}}
2025-10-29 06:20:17 [ERROR] Item 9 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":9}}
2025-10-29 06:20:17 [ERROR] Item 10 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":10}}
2025-10-29 06:20:17 [ERROR] Item 11 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":11}}
2025-10-29 06:20:17 [ERROR] Item 12 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":12}}
2025-10-29 06:20:17 [ERROR] Item 13 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":13}}
2025-10-29 06:20:17 [ERROR] Item 14 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":14}}
2025-10-29 06:20:17 [ERROR] Item 15 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":15}}
2025-10-29 06:20:17 [ERROR] Item 16 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":16}}
2025-10-29 06:20:17 [ERROR] Item 17 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":17}}
2025-10-29 06:20:17 [ERROR] Item 18 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":18}}
2025-10-29 06:20:17 [ERROR] Item 19 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":19}}
2025-10-29 06:20:17 [ERROR] Item 20 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":20}}
2025-10-29 13:00:51 [ERROR] mcp-server {"metadata":{}}
2025-10-29 13:00:51 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:00:51 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:01:13 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:13 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:14 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:14 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:16 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:16 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:01:16 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 13:15:26 [ERROR] mcp-server {"metadata":{}}
2025-10-29 13:15:26 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:15:26 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:16:33 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:33 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:34 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:34 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:37 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: availableTools is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:37 [ERROR] Stack trace: ReferenceError: availableTools is not defined
    at TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:109:33)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:16:37 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 13:24:28 [ERROR] mcp-server {"metadata":{}}
2025-10-29 13:24:28 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:24:28 [ERROR] mcp-manager {"metadata":{}}
2025-10-29 13:40:44 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestra..."}}
2025-10-29 13:40:46 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:48 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:48 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:48 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:49 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:51 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:53 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:53 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:53 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:55 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:57 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/d..."}}
2025-10-29 13:40:59 [ERROR] [MCP-TODO] Failed to plan tools for item 1: localizationService is not defined {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":1,"errorName":"ReferenceError","stack":"ReferenceError: localizationService is not defined\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1139:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    at async executeWor..."}}
2025-10-29 13:40:59 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:59 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: localizationService is not defined
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 13:40:59 [ERROR] Item 2 blocked 10 times - SKIPPING to prevent infinite loop {"metadata":{"sessionId":"default","itemId":2}}
2025-10-29 13:47:11 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:47:11 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 13:47:18 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:47:18 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 13:47:31 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2037:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:889:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 13:47:33 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:47:33 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 13:47:38 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:47:38 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 13:47:55 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2037:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:889:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 13:48:09 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:48:09 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-10-29 13:48:17 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:48:17 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-10-29 13:48:29 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2037:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:889:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 13:48:31 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:48:31 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt1","mode":"active_window"}}
2025-10-29 13:48:36 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 13:48:36 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1.1_verify_attempt2","mode":"active_window"}}
2025-10-29 14:01:52 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:01:52 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 14:01:59 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:01:59 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 14:02:50 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2115:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:900:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:02:53 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:02:53 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt1","mode":"active_window"}}
2025-10-29 14:03:00 [ERROR] [VISUAL] Active window capture failed: this._normalizeAppName is not a function {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:03:00 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 14:03:31 [ERROR] [PORT-4000] Timeout - port 4000 too slow {"metadata":{"category":"vision-analysis","note":"OpenRouter fallback disabled - vision parsing not working"}}
2025-10-29 14:03:31 [ERROR] [VISION] API call failed: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled. {"metadata":{"category":"vision-analysis","component":"vision-analysis","stack":"Error: Port 4000 timeout and Ollama unavailable. OpenRouter fallback disabled.\n    at VisionAnalysisService._callPort4000VisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/services/vision-analysis-service.js:852:15)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:549:9)\n    at process.processTimers (node:internal/timers:523:7)\n    at async VisionAnalysisService._callVisionAPI (file:///Users/dev/Documents/GitHub/atlas4/orch..."}}
2025-10-29 14:10:41 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2115:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:900:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:10:51 [ERROR] [VISUAL] Active window capture failed: Command failed: screencapture -x -R -1920,-41,1920,41 "/tmp/atlas_visual/screenshot_item_1_verify_attempt2_active_window_1761739850793.png"
rect (-1920.0, -41.0, 1920.0, 41.0) does not intersect any displays
 {"metadata":{"category":"visual-capture","targetApp":"Калькулятор"}}
2025-10-29 14:10:51 [ERROR] [VISUAL] Screenshot capture failed: Screenshot capture failed for mode: active_window {"metadata":{"category":"visual-capture","component":"visual-capture","context":"item_1_verify_attempt2","mode":"active_window"}}
2025-10-29 14:24:52 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2115:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:900:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:25:03 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761740693653: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761740693653","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1331:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:25:07 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2115:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:900:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:25:19 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761740719149: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761740719149","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 14:25:21 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761740719149: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761740719149","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 14:35:12 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2136:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:921:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:35:16 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2136:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:921:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:35:35 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2136:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:921:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:36:14 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761741336545: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761741336545","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1331:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:37:26 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2.1_1761741336545: No tool calls generated - plan is empty {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2.1_1761741336545","errorName":"Error","stack":"Error: No tool calls generated - plan is empty\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1331:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:37:31 [ERROR] [MCP-GRISHA] ❌ MCP verification failed: results.forEach is not a function {"metadata":{"category":"grisha-verify-item","component":"grisha-verify-item","stack":"TypeError: results.forEach is not a function\n    at GrishaVerifyItemProcessor._calculateExecutionConfidence (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:2136:17)\n    at GrishaVerifyItemProcessor._analyzeMcpResults (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:921:42)\n    at GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator..."}}
2025-10-29 14:37:37 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 14:37:39 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 14:37:41 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 14:37:41 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 14:37:41 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 14:37:43 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 14:37:45 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 14:37:47 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 14:37:47 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 14:37:47 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:03:52 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743032451: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743032451","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:03:54 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743032451: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743032451","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:03:56 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743032451: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743032451","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:03:56 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:03:56 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3707:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:725:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1403:32)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:03:56 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3734:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:03:57 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743037976: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743037976","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/a..."}}
2025-10-29 15:03:59 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743037976: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743037976","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:04:01 [ERROR] [MCP-TODO] Failed to plan tools for item verify_2_1761743037976: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"verify_2_1761743037976","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'items')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1101:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (..."}}
2025-10-29 15:04:01 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:01 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'items')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3707:28)
    at async GrishaVerifyItemProcessor._executeMcpVerification (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:725:36)
    at async GrishaVerifyItemProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:250:32)
    at async GrishaVerifyItemProcessor.getDetailedAnalysisForAtlas (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/grisha-verify-item-processor.js:1208:30)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1486:36)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:01 [ERROR] [UNIFIED-MCP] Workflow failed: plan with tool_calls is required for execution {"metadata":{"category":"mcp-todo","error":"Error: plan with tool_calls is required for execution\n    at TetyanaExecuteToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-execute-tools-processor.js:62:19)\n    at MCPTodoManager.executeVerificationWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:3734:58)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async GrishaVer..."}}
2025-10-29 15:04:07 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 15:04:09 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 15:04:11 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 15:04:11 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:11 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:13 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHu..."}}
2025-10-29 15:04:15 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)\n    a..."}}
2025-10-29 15:04:17 [ERROR] [MCP-TODO] Failed to plan tools for item 2.1: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"mcp-todo","component":"mcp-todo","itemId":"2.1","errorName":"TypeError","stack":"TypeError: Cannot read properties of undefined (reading 'includes')\n    at MCPTodoManager._planToolsAttempt (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:1132:24)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:520:9)\n    at async MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:948:24)\n    at async TetyanaPlanToolsProcessor.execut..."}}
2025-10-29 15:04:17 [ERROR] [STAGE-2.1-MCP] ❌ Tool planning failed: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes') {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
2025-10-29 15:04:17 [ERROR] Stack trace: Error: Tool planning failed after 3 attempts: Tool planning failed: Cannot read properties of undefined (reading 'includes')
    at MCPTodoManager.planTools (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/mcp-todo-manager.js:969:11)
    at runNextTicks (node:internal/process/task_queues:65:5)
    at process.processTimers (node:internal/timers:520:9)
    at async TetyanaPlanToolsProcessor.execute (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/stages/tetyana-plan-tools-processor.js:182:26)
    at async executeWorkflow (file:///Users/dev/Documents/GitHub/atlas4/orchestrator/workflow/executor-v3.js:1300:30)
    at async file:///Users/dev/Documents/GitHub/atlas4/orchestrator/api/routes/chat.routes.js:161:13 {"metadata":{"category":"tetyana-plan-tools","component":"tetyana-plan-tools"}}
