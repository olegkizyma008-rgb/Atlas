# ===================================
# ATLAS v5.0 - Environment Configuration
# ===================================
# Last Updated: 2025-11-03 (CASCADE Models Integration)

# === SYSTEM ===
NODE_ENV=production
BUILD_NUMBER=dev
LOG_LEVEL=info
FORCE_FREE_PORTS=true

# === LLM API CONFIGURATION ===
LLM_API_ENDPOINT=http://localhost:4000/v1/chat/completions
LLM_API_FALLBACK_ENDPOINT=
LLM_API_USE_FALLBACK=true
LLM_API_TIMEOUT=60000

# === AI BACKEND CONFIGURATION ===
AI_BACKEND_MODE=mcp
AI_BACKEND_PRIMARY=mcp
AI_BACKEND_DISABLE_FALLBACK=false

# === AI MODEL CONFIGURATION ===
AI_MODEL_CLASSIFICATION=atlas-ministral-3b
AI_TEMP_CLASSIFICATION=0.05
AI_MODEL_CHAT=atlas-mistral-medium-2505
AI_TEMP_CHAT=0.7
AI_MODEL_ANALYSIS=ext-mistral-codestral-2405
AI_TEMP_ANALYSIS=0.2
AI_MODEL_TTS_OPT=atlas-phi-4-mini-instruct
AI_TEMP_TTS_OPT=0.15

# === MCP MODEL CONFIGURATION ===
MCP_MODEL_MODE_SELECTION=atlas-mistral-small-2503
MCP_TEMP_MODE_SELECTION=0.05
MCP_MODEL_BACKEND_SELECTION=atlas-mistral-small-2503
MCP_TEMP_BACKEND_SELECTION=0.05
MCP_MODEL_CONTEXT_ENRICHMENT=ext-mistral-codestral-latest
MCP_TEMP_CONTEXT_ENRICHMENT=0.3
MCP_MODEL_TODO_PLANNING=ext-mistral-codestral-latest
MCP_TEMP_TODO_PLANNING=0.3
MCP_MODEL_PLAN_TOOLS=atlas-gpt-4o-mini
MCP_TEMP_PLAN_TOOLS=0.1
MCP_MODEL_VERIFICATION_ELIGIBILITY=atlas-ministral-3b
MCP_TEMP_VERIFICATION_ELIGIBILITY=0.1
MCP_MODEL_VERIFY_ITEM=atlas-mistral-small-2503
MCP_TEMP_VERIFY_ITEM=0.15
MCP_MODEL_ADJUST_TODO=ext-mistral-codestral-latest
MCP_TEMP_ADJUST_TODO=0.2
MCP_MODEL_REPLAN_TODO=ext-mistral-codestral-latest
MCP_TEMP_REPLAN_TODO=0.3
MCP_MODEL_FINAL_SUMMARY=atlas-ministral-3b
MCP_TEMP_FINAL_SUMMARY=0.5
MCP_MODEL_VISION=atlas-llama-3.2-11b-vision-instruct
MCP_TEMP_VISION=0.2
MCP_MODEL_DEV_ANALYSIS=ext-mistral-codestral-latest
MCP_TEMP_DEV_ANALYSIS=0.2
MCP_MODEL_TTS_OPT=atlas-ministral-3b
MCP_TEMP_TTS_OPT=0.3

# === CHAT MEMORY ===
MCP_MODEL_CHAT_MEMORY_ELIGIBILITY=atlas-ai21-jamba-1.5-mini
MCP_TEMP_CHAT_MEMORY_ELIGIBILITY=0.1

# === MCP LLM VALIDATOR ===
MCP_LLM_MODEL=ext-mistral-codestral-2405
MCP_LLM_TEMPERATURE=0.1

# === SECURITY ===
SECURITY_LLM_VALIDATOR_ENABLED=true
SECURITY_VALIDATOR_FALLBACK=allow
SECURITY_REPETITION_CHECK_ENABLED=true
SECURITY_MAX_CONSECUTIVE_REPETITIONS=3
SECURITY_MAX_TOTAL_CALLS=10
SECURITY_AUTO_BLOCK_CRITICAL=true
SECURITY_AUTO_BLOCK_HIGH=true

# === AUTO-CORRECTION ===
AUTO_CORRECTION_ENABLED=true
AUTO_CORRECTION_INTERVAL=300000
AUTO_CORRECTION_MAX_FIXES=5
AUTO_CORRECTION_NOTIFY=subtle
MCP_PYTHON_SDK_ENABLED=true
MCP_JAVA_SDK_ENABLED=true

# === MCP RETRY ===
MCP_MAX_ATTEMPTS=3
MCP_CIRCUIT_BREAKER_THRESHOLD=3
MCP_CIRCUIT_BREAKER_RESET_MS=60000
MCP_TIMEOUT_MS=30000
MCP_EXPONENTIAL_BACKOFF=true

# === TTS & VOICE ===
REAL_TTS_MODE=true
TTS_DEVICE=mps
TTS_PORT=3001
ATLAS_TTS_MAX_CHUNK_SIZE=400

# === WHISPER ===
WHISPER_BACKEND=cpp
WHISPER_DEVICE=metal
WHISPER_PORT=3002
WHISPER_CPP_BIN=/Users/dev/Documents/GitHub/atlas4/third_party/whisper.cpp.upstream/build/bin/whisper-cli
WHISPER_CPP_MODEL=/Users/dev/Documents/GitHub/atlas4/models/whisper/ggml-large-v3.bin
WHISPER_CPP_NGL=20
WHISPER_CPP_THREADS=10
WHISPER_SAMPLE_RATE=48000

# === NETWORK PORTS ===
ORCHESTRATOR_PORT=5101
WEB_PORT=5001
FRONTEND_PORT=5001

# === LOCALIZATION ===
USER_LANGUAGE=uk
SHOW_SYSTEM_MESSAGES=false
SYSTEM_MESSAGE_LEVEL=1

# ===================================
# CASCADE (WINDSURF) INTEGRATION
# ===================================

# Enable Cascade
CASCADE_ENABLED=true

# API endpoints
CASCADE_API_ENDPOINT=http://localhost:5101/api/cascade/self-analysis
CASCADE_ETERNITY_ENDPOINT=http://localhost:5101/api/eternity
CASCADE_API_TIMEOUT=120000
CASCADE_ETERNITY_TIMEOUT=180000

# Capabilities
CASCADE_SELF_ANALYSIS_ENABLED=true
CASCADE_ETERNITY_ENABLED=true
CASCADE_SELF_IMPROVEMENT_ENABLED=true
CASCADE_CODESTRAL_ENABLED=true

# Permissions
CASCADE_SELF_MODIFICATION_ENABLED=true
CASCADE_REQUIRE_APPROVAL=false
CASCADE_WRITE_CODE=true
CASCADE_WRITE_CONFIG=true
CASCADE_EXECUTE_MODIFICATIONS=true

# Codestral integration (API 4000)
CASCADE_CODESTRAL_MODEL=ext-mistral-codestral-2405
CASCADE_CODESTRAL_TEMP=0.2
CASCADE_CODESTRAL_MAX_TOKENS=4000

# Security
CASCADE_MAX_FILES_PER_CHANGE=5
CASCADE_REQUIRE_BACKUP=true
CASCADE_VALIDATE_BEFORE_APPLY=true

# Audit
CASCADE_AUDIT_ENABLED=true
CASCADE_REPORT_TO_OLEG=true
CASCADE_NOTIFY_SUCCESS=true

# Mode
CASCADE_AUTONOMOUS_MODE=true
CASCADE_OPERATION_MODE=continuous

# ===================================
# WINDSURF API
# ===================================
WINDSURF_API_KEY=sk-ws-01-5CZJkTpbe05yLrWh0wYJcZsLLK8dujrwoehAW6ku9r4x_YOyo_Zftm6vrRNLDC6BXRDkekfSGTfdJm7_rUvXTBrmoiZ7Iw
WINDSURF_API_ENDPOINT=https://api.windsurf.ai/v1

# ===================================
# CASCADE MODEL SELECTION
# ===================================

# WINDSURF моделі (через Windsurf API):
CASCADE_PRIMARY_MODEL=claude-sonnet-4.5-thinking
CASCADE_FALLBACK_MODEL=claude-sonnet-4.5
CASCADE_CODE_ANALYSIS_MODEL=gpt-5-codex

# CODESTRAL модель (через API 4000):
CASCADE_CODESTRAL_MODEL=ext-mistral-codestral-2405

# === FEATURES ===
USE_METAL_GPU=true
OPTIMIZE_FOR_M1_MAX=true